<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-unrecognised-pragmas #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-comment">{- HLINT ignore &quot;Unused LANGUAGE pragma&quot; -}</span><span>
</span><span id="line-16"></span><span class="hs-comment">{- HLINT ignore &quot;Avoid lambda using `infix`&quot; -}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.CLI.EraBased.Run.Transaction</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitnesses"><span class="hs-identifier">mkShelleyBootstrapWitnesses</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#partitionSomeWitnesses"><span class="hs-identifier">partitionSomeWitnesses</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCmds"><span class="hs-identifier">runTransactionCmds</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildCmd"><span class="hs-identifier">runTransactionBuildCmd</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildRawCmd"><span class="hs-identifier">runTransactionBuildRawCmd</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignCmd"><span class="hs-identifier">runTransactionSignCmd</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSubmitCmd"><span class="hs-identifier">runTransactionSubmitCmd</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinFeeCmd"><span class="hs-identifier">runTransactionCalculateMinFeeCmd</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinValueCmd"><span class="hs-identifier">runTransactionCalculateMinValueCmd</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionPolicyIdCmd"><span class="hs-identifier">runTransactionPolicyIdCmd</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionHashScriptDataCmd"><span class="hs-identifier">runTransactionHashScriptDataCmd</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionTxIdCmd"><span class="hs-identifier">runTransactionTxIdCmd</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionWitnessCmd"><span class="hs-identifier">runTransactionWitnessCmd</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignWitnessCmd"><span class="hs-identifier">runTransactionSignWitnessCmd</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutByronEra"><span class="hs-identifier">toTxOutByronEra</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInAnyEra"><span class="hs-identifier">toTxOutInAnyEra</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">where</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-api-10.5.0.0-bc2bc7f8bc2a6fc243052ec7d559f0f558d0fbf1d954dae44d093dd2c996f9d1/share/doc/html/src/Cardano.Api.html"><span class="hs-identifier">Cardano.Api</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-api-10.5.0.0-bc2bc7f8bc2a6fc243052ec7d559f0f558d0fbf1d954dae44d093dd2c996f9d1/share/doc/html/src/Cardano.Api.Byron.html"><span class="hs-identifier">Cardano.Api.Byron</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Byron</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-api-10.5.0.0-bc2bc7f8bc2a6fc243052ec7d559f0f558d0fbf1d954dae44d093dd2c996f9d1/share/doc/html/src/Cardano.Api.Ledger.html"><span class="hs-identifier">Cardano.Api.Ledger</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-api-10.5.0.0-bc2bc7f8bc2a6fc243052ec7d559f0f558d0fbf1d954dae44d093dd2c996f9d1/share/doc/html/src/Cardano.Api.Network.html"><span class="hs-identifier">Cardano.Api.Network</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-api-10.5.0.0-bc2bc7f8bc2a6fc243052ec7d559f0f558d0fbf1d954dae44d093dd2c996f9d1/share/doc/html/src/Cardano.Api.Network.html"><span class="hs-identifier">Cardano.Api.Network</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net.Tx</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-api-10.5.0.0-bc2bc7f8bc2a6fc243052ec7d559f0f558d0fbf1d954dae44d093dd2c996f9d1/share/doc/html/src/Cardano.Api.Shelley.html"><span class="hs-identifier">Cardano.Api.Shelley</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-binary-1.7.1.0-82e6a16c5de057afe818d9a263c14d256ace639737b38f11e743cd35dc443931/share/doc/html/src/Cardano.Binary.html"><span class="hs-identifier">Cardano.Binary</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html"><span class="hs-identifier">Cardano.CLI.EraBased.Commands.Transaction</span></a></span><span>
</span><span id="line-47"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinFeeCmdArgs"><span class="hs-identifier">TransactionCalculateMinFeeCmdArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txBodyFile"><span class="hs-identifier">txBodyFile</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html"><span class="hs-identifier">Cardano.CLI.EraBased.Commands.Transaction</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cmd</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Genesis.Common.html"><span class="hs-identifier">Cardano.CLI.EraBased.Run.Genesis.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Genesis.Common.html#readProtocolParameters"><span class="hs-identifier">readProtocolParameters</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Query.html"><span class="hs-identifier">Cardano.CLI.EraBased.Run.Query</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Read.html"><span class="hs-identifier">Cardano.CLI.EraBased.Script.Mint.Read</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Types.html"><span class="hs-identifier">Cardano.CLI.EraBased.Script.Mint.Types</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html"><span class="hs-identifier">Cardano.CLI.EraBased.Transaction.HashCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html#checkCertificateHashes"><span class="hs-identifier">checkCertificateHashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>                   </span><span class="annot"><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html#checkProposalHashes"><span class="hs-identifier">checkProposalHashes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html#checkVotingProcedureHashes"><span class="hs-identifier">checkVotingProcedureHashes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Orphans.html"><span class="hs-identifier">Cardano.CLI.Orphans</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Read.html"><span class="hs-identifier">Cardano.CLI.Read</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.Common.html"><span class="hs-identifier">Cardano.CLI.Types.Common</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.Errors.BootstrapWitnessError.html"><span class="hs-identifier">Cardano.CLI.Types.Errors.BootstrapWitnessError</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.Errors.NodeEraMismatchError.html"><span class="hs-identifier">Cardano.CLI.Types.Errors.NodeEraMismatchError</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html"><span class="hs-identifier">Cardano.CLI.Types.Errors.TxCmdError</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxValidationError.html"><span class="hs-identifier">Cardano.CLI.Types.Errors.TxValidationError</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.Output.html"><span class="hs-identifier">Cardano.CLI.Types.Output</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Output.html#renderScriptCosts"><span class="hs-identifier">renderScriptCosts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.CLI.Types.TxFeature.html"><span class="hs-identifier">Cardano.CLI.Types.TxFeature</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#forM"><span class="hs-identifier">forM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.html#unless"><span class="hs-identifier">unless</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-2.2.3.0-0dd2e1ddd7e981ab58d86fb751cbb00bd55cdd2eda38b7379d143d083431cd0d/share/doc/html/src/Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-2.2.3.0-0dd2e1ddd7e981ab58d86fb751cbb00bd55cdd2eda38b7379d143d083431cd0d/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-2.2.3.0-0dd2e1ddd7e981ab58d86fb751cbb00bd55cdd2eda38b7379d143d083431cd0d/share/doc/html/src/Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-pretty-0.8.10-b284cc6b9db73737627a563d667096228ece9d928bbedd02b9690e45d6764723/share/doc/html/src/Data.Aeson.Encode.Pretty.html"><span class="hs-identifier">Data.Aeson.Encode.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-pretty-0.8.10-b284cc6b9db73737627a563d667096228ece9d928bbedd02b9690e45d6764723/share/doc/html/src/Data.Aeson.Encode.Pretty.html#encodePretty"><span class="hs-identifier">encodePretty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html"><span class="hs-identifier">Data.Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#Bifunctor"><span class="hs-identifier">Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.html"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bytestring</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Char8.html"><span class="hs-identifier">Data.ByteString.Char8</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Lazy.Char8.html"><span class="hs-identifier">Data.ByteString.Lazy.Char8</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Containers.ListUtils.html"><span class="hs-identifier">Data.Containers.ListUtils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Containers.ListUtils.html#nubOrd"><span class="hs-identifier">nubOrd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#%3A~%3A"><span class="hs-operator">(:~:)</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#forM_"><span class="hs-identifier">forM_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Foldable</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html"><span class="hs-identifier">Data.Function</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator">(&amp;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#catMaybes"><span class="hs-identifier">catMaybes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#mapMaybe"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#maybeToList"><span class="hs-identifier">maybeToList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#Set"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/text-2.1.1-66dd499aca7e777f8d20f0e47452fe261f2354d2ebc11923ec07d645d3895501/share/doc/html/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/text-2.1.1-66dd499aca7e777f8d20f0e47452fe261f2354d2ebc11923ec07d645d3895501/share/doc/html/src/Data.Text.IO.html"><span class="hs-identifier">Data.Text.IO</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html"><span class="hs-identifier">Data.Type.Equality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#TestEquality"><span class="hs-identifier">TestEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Exts.html"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#IsList"><span class="hs-identifier">IsList</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/System.IO.html"><span class="hs-identifier">System.IO</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span id="local-6989586621682145296"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCmds"><span class="hs-identifier hs-type">runTransactionCmds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCmds"><span class="hs-identifier hs-type">Cmd.TransactionCmds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145296"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-92"></span><span id="runTransactionCmds"><span class="annot"><span class="annottext">runTransactionCmds :: forall era. TransactionCmds era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCmds"><span class="hs-identifier hs-var hs-var">runTransactionCmds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildCmd"><span class="hs-identifier hs-type">Cmd.TransactionBuildCmd</span></a></span><span> </span><span id="local-6989586621682146354"><span class="annot"><span class="annottext">TransactionBuildCmdArgs era
</span><a href="#local-6989586621682146354"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionBuildCmdArgs era -&gt; ExceptT TxCmdError IO ()
forall era. TransactionBuildCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildCmd"><span class="hs-identifier hs-var">runTransactionBuildCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionBuildCmdArgs era
</span><a href="#local-6989586621682146354"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildEstimateCmd"><span class="hs-identifier hs-type">Cmd.TransactionBuildEstimateCmd</span></a></span><span> </span><span id="local-6989586621682146356"><span class="annot"><span class="annottext">TransactionBuildEstimateCmdArgs era
</span><a href="#local-6989586621682146356"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionBuildEstimateCmdArgs era -&gt; ExceptT TxCmdError IO ()
forall era.
TransactionBuildEstimateCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildEstimateCmd"><span class="hs-identifier hs-var">runTransactionBuildEstimateCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionBuildEstimateCmdArgs era
</span><a href="#local-6989586621682146356"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildRawCmd"><span class="hs-identifier hs-type">Cmd.TransactionBuildRawCmd</span></a></span><span> </span><span id="local-6989586621682146359"><span class="annot"><span class="annottext">TransactionBuildRawCmdArgs era
</span><a href="#local-6989586621682146359"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionBuildRawCmdArgs era -&gt; ExceptT TxCmdError IO ()
forall era.
TransactionBuildRawCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildRawCmd"><span class="hs-identifier hs-var">runTransactionBuildRawCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionBuildRawCmdArgs era
</span><a href="#local-6989586621682146359"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSignCmd"><span class="hs-identifier hs-type">Cmd.TransactionSignCmd</span></a></span><span> </span><span id="local-6989586621682146361"><span class="annot"><span class="annottext">TransactionSignCmdArgs
</span><a href="#local-6989586621682146361"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionSignCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignCmd"><span class="hs-identifier hs-var">runTransactionSignCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionSignCmdArgs
</span><a href="#local-6989586621682146361"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSubmitCmd"><span class="hs-identifier hs-type">Cmd.TransactionSubmitCmd</span></a></span><span> </span><span id="local-6989586621682146363"><span class="annot"><span class="annottext">TransactionSubmitCmdArgs
</span><a href="#local-6989586621682146363"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionSubmitCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSubmitCmd"><span class="hs-identifier hs-var">runTransactionSubmitCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionSubmitCmdArgs
</span><a href="#local-6989586621682146363"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinFeeCmd"><span class="hs-identifier hs-type">Cmd.TransactionCalculateMinFeeCmd</span></a></span><span> </span><span id="local-6989586621682146365"><span class="annot"><span class="annottext">TransactionCalculateMinFeeCmdArgs
</span><a href="#local-6989586621682146365"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionCalculateMinFeeCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinFeeCmd"><span class="hs-identifier hs-var">runTransactionCalculateMinFeeCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionCalculateMinFeeCmdArgs
</span><a href="#local-6989586621682146365"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinValueCmd"><span class="hs-identifier hs-type">Cmd.TransactionCalculateMinValueCmd</span></a></span><span> </span><span id="local-6989586621682146367"><span class="annot"><span class="annottext">TransactionCalculateMinValueCmdArgs era
</span><a href="#local-6989586621682146367"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionCalculateMinValueCmdArgs era -&gt; ExceptT TxCmdError IO ()
forall era.
TransactionCalculateMinValueCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinValueCmd"><span class="hs-identifier hs-var">runTransactionCalculateMinValueCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionCalculateMinValueCmdArgs era
</span><a href="#local-6989586621682146367"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionHashScriptDataCmd"><span class="hs-identifier hs-type">Cmd.TransactionHashScriptDataCmd</span></a></span><span> </span><span id="local-6989586621682146369"><span class="annot"><span class="annottext">TransactionHashScriptDataCmdArgs
</span><a href="#local-6989586621682146369"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionHashScriptDataCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionHashScriptDataCmd"><span class="hs-identifier hs-var">runTransactionHashScriptDataCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionHashScriptDataCmdArgs
</span><a href="#local-6989586621682146369"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionTxIdCmd"><span class="hs-identifier hs-type">Cmd.TransactionTxIdCmd</span></a></span><span> </span><span id="local-6989586621682146371"><span class="annot"><span class="annottext">TransactionTxIdCmdArgs
</span><a href="#local-6989586621682146371"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionTxIdCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionTxIdCmd"><span class="hs-identifier hs-var">runTransactionTxIdCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionTxIdCmdArgs
</span><a href="#local-6989586621682146371"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionPolicyIdCmd"><span class="hs-identifier hs-type">Cmd.TransactionPolicyIdCmd</span></a></span><span> </span><span id="local-6989586621682146373"><span class="annot"><span class="annottext">TransactionPolicyIdCmdArgs
</span><a href="#local-6989586621682146373"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionPolicyIdCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionPolicyIdCmd"><span class="hs-identifier hs-var">runTransactionPolicyIdCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionPolicyIdCmdArgs
</span><a href="#local-6989586621682146373"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionWitnessCmd"><span class="hs-identifier hs-type">Cmd.TransactionWitnessCmd</span></a></span><span> </span><span id="local-6989586621682146375"><span class="annot"><span class="annottext">TransactionWitnessCmdArgs
</span><a href="#local-6989586621682146375"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionWitnessCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionWitnessCmd"><span class="hs-identifier hs-var">runTransactionWitnessCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionWitnessCmdArgs
</span><a href="#local-6989586621682146375"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSignWitnessCmd"><span class="hs-identifier hs-type">Cmd.TransactionSignWitnessCmd</span></a></span><span> </span><span id="local-6989586621682146377"><span class="annot"><span class="annottext">TransactionSignWitnessCmdArgs
</span><a href="#local-6989586621682146377"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransactionSignWitnessCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignWitnessCmd"><span class="hs-identifier hs-var">runTransactionSignWitnessCmd</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionSignWitnessCmdArgs
</span><a href="#local-6989586621682146377"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- Building transactions</span><span>
</span><span id="line-108"></span><span class="hs-comment">--</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span id="local-6989586621682145300"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildCmd"><span class="hs-identifier hs-type">runTransactionBuildCmd</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionBuildCmdArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145300"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-113"></span><span id="runTransactionBuildCmd"><span class="annot"><span class="annottext">runTransactionBuildCmd :: forall era. TransactionBuildCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildCmd"><span class="hs-identifier hs-var hs-var">runTransactionBuildCmd</span></a></span></span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionBuildCmdArgs</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682146481"><span class="annot"><span class="annottext">Era era
currentEra :: Era era
currentEra :: forall era. TransactionBuildCmdArgs era -&gt; Era era
</span><a href="#local-6989586621682146481"><span class="hs-identifier hs-var hs-var">currentEra</span></a></span></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146483"><span class="annot"><span class="annottext">SocketPath
nodeSocketPath :: SocketPath
nodeSocketPath :: forall era. TransactionBuildCmdArgs era -&gt; SocketPath
</span><a href="#local-6989586621682146483"><span class="hs-identifier hs-var hs-var">nodeSocketPath</span></a></span></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146485"><span class="annot"><span class="annottext">ConsensusModeParams
consensusModeParams :: ConsensusModeParams
consensusModeParams :: forall era. TransactionBuildCmdArgs era -&gt; ConsensusModeParams
</span><a href="#local-6989586621682146485"><span class="hs-identifier hs-var hs-var">consensusModeParams</span></a></span></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">networkId :: forall era. TransactionBuildCmdArgs era -&gt; NetworkId
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#networkId"><span class="hs-identifier hs-var">networkId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146488"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682146488"><span class="hs-identifier hs-var">networkId</span></a></span></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mScriptValidity :: forall era. TransactionBuildCmdArgs era -&gt; Maybe ScriptValidity
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#mScriptValidity"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146490"><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682146490"><span class="hs-identifier hs-var">mScriptValidity</span></a></span></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mOverrideWitnesses :: forall era. TransactionBuildCmdArgs era -&gt; Maybe Word
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#mOverrideWitnesses"><span class="hs-identifier hs-var">mOverrideWitnesses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146492"><span class="annot"><span class="annottext">Maybe Word
</span><a href="#local-6989586621682146492"><span class="hs-identifier hs-var">mOverrideWitnesses</span></a></span></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146493"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
txins :: [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
txins :: forall era.
TransactionBuildCmdArgs era
-&gt; [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
</span><a href="#local-6989586621682146493"><span class="hs-identifier hs-var hs-var">txins</span></a></span></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146495"><span class="annot"><span class="annottext">[TxIn]
readOnlyReferenceInputs :: [TxIn]
readOnlyReferenceInputs :: forall era. TransactionBuildCmdArgs era -&gt; [TxIn]
</span><a href="#local-6989586621682146495"><span class="hs-identifier hs-var hs-var">readOnlyReferenceInputs</span></a></span></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">requiredSigners :: forall era. TransactionBuildCmdArgs era -&gt; [RequiredSigner]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#requiredSigners"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146498"><span class="annot"><span class="annottext">[RequiredSigner]
</span><a href="#local-6989586621682146498"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146499"><span class="annot"><span class="annottext">[TxIn]
txinsc :: [TxIn]
txinsc :: forall era. TransactionBuildCmdArgs era -&gt; [TxIn]
</span><a href="#local-6989586621682146499"><span class="hs-identifier hs-var hs-var">txinsc</span></a></span></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mReturnCollateral :: forall era.
TransactionBuildCmdArgs era -&gt; Maybe TxOutShelleyBasedEra
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#mReturnCollateral"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146502"><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
</span><a href="#local-6989586621682146502"><span class="hs-identifier hs-var">mReturnColl</span></a></span></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146503"><span class="annot"><span class="annottext">Maybe Lovelace
mTotalCollateral :: Maybe Lovelace
mTotalCollateral :: forall era. TransactionBuildCmdArgs era -&gt; Maybe Lovelace
</span><a href="#local-6989586621682146503"><span class="hs-identifier hs-var hs-var">mTotalCollateral</span></a></span></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146505"><span class="annot"><span class="annottext">[TxOutAnyEra]
txouts :: [TxOutAnyEra]
txouts :: forall era. TransactionBuildCmdArgs era -&gt; [TxOutAnyEra]
</span><a href="#local-6989586621682146505"><span class="hs-identifier hs-var hs-var">txouts</span></a></span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146507"><span class="annot"><span class="annottext">TxOutChangeAddress
changeAddresses :: TxOutChangeAddress
changeAddresses :: forall era. TransactionBuildCmdArgs era -&gt; TxOutChangeAddress
</span><a href="#local-6989586621682146507"><span class="hs-identifier hs-var hs-var">changeAddresses</span></a></span></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146509"><span class="annot"><span class="annottext">Maybe (Value, [CliMintScriptRequirements])
mValue :: Maybe (Value, [CliMintScriptRequirements])
mValue :: forall era.
TransactionBuildCmdArgs era
-&gt; Maybe (Value, [CliMintScriptRequirements])
</span><a href="#local-6989586621682146509"><span class="hs-identifier hs-var hs-var">mValue</span></a></span></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146511"><span class="annot"><span class="annottext">Maybe SlotNo
mValidityLowerBound :: Maybe SlotNo
mValidityLowerBound :: forall era. TransactionBuildCmdArgs era -&gt; Maybe SlotNo
</span><a href="#local-6989586621682146511"><span class="hs-identifier hs-var hs-var">mValidityLowerBound</span></a></span></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146513"><span class="annot"><span class="annottext">TxValidityUpperBound era
mValidityUpperBound :: TxValidityUpperBound era
mValidityUpperBound :: forall era. TransactionBuildCmdArgs era -&gt; TxValidityUpperBound era
</span><a href="#local-6989586621682146513"><span class="hs-identifier hs-var hs-var">mValidityUpperBound</span></a></span></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146515"><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
certificates :: [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
certificates :: forall era.
TransactionBuildCmdArgs era
-&gt; [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146515"><span class="hs-identifier hs-var hs-var">certificates</span></a></span></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146517"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
withdrawals :: [(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
withdrawals :: forall era.
TransactionBuildCmdArgs era
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146517"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146519"><span class="annot"><span class="annottext">TxMetadataJsonSchema
metadataSchema :: TxMetadataJsonSchema
metadataSchema :: forall era. TransactionBuildCmdArgs era -&gt; TxMetadataJsonSchema
</span><a href="#local-6989586621682146519"><span class="hs-identifier hs-var hs-var">metadataSchema</span></a></span></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146521"><span class="annot"><span class="annottext">[ScriptFile]
scriptFiles :: [ScriptFile]
scriptFiles :: forall era. TransactionBuildCmdArgs era -&gt; [ScriptFile]
</span><a href="#local-6989586621682146521"><span class="hs-identifier hs-var hs-var">scriptFiles</span></a></span></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146523"><span class="annot"><span class="annottext">[MetadataFile]
metadataFiles :: [MetadataFile]
metadataFiles :: forall era. TransactionBuildCmdArgs era -&gt; [MetadataFile]
</span><a href="#local-6989586621682146523"><span class="hs-identifier hs-var hs-var">metadataFiles</span></a></span></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146525"><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
mUpdateProposalFile :: Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
mUpdateProposalFile :: forall era.
TransactionBuildCmdArgs era
-&gt; Maybe
     (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><a href="#local-6989586621682146525"><span class="hs-identifier hs-var hs-var">mUpdateProposalFile</span></a></span></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146527"><span class="annot"><span class="annottext">[(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
voteFiles :: [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
voteFiles :: forall era.
TransactionBuildCmdArgs era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146527"><span class="hs-identifier hs-var hs-var">voteFiles</span></a></span></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146529"><span class="annot"><span class="annottext">[(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
proposalFiles :: [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
proposalFiles :: forall era.
TransactionBuildCmdArgs era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146529"><span class="hs-identifier hs-var hs-var">proposalFiles</span></a></span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146531"><span class="annot"><span class="annottext">Maybe TxTreasuryDonation
treasuryDonation :: Maybe TxTreasuryDonation
treasuryDonation :: forall era. TransactionBuildCmdArgs era -&gt; Maybe TxTreasuryDonation
</span><a href="#local-6989586621682146531"><span class="hs-identifier hs-var hs-var">treasuryDonation</span></a></span></span><span> </span><span class="hs-comment">-- Maybe TxTreasuryDonation</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146533"><span class="annot"><span class="annottext">TxBuildOutputOptions
buildOutputOptions :: TxBuildOutputOptions
buildOutputOptions :: forall era. TransactionBuildCmdArgs era -&gt; TxBuildOutputOptions
</span><a href="#local-6989586621682146533"><span class="hs-identifier hs-var hs-var">buildOutputOptions</span></a></span></span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146535"><span class="annot"><span class="annottext">eon :: ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var hs-var">eon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Era era -&gt; ShelleyBasedEra era
forall era. Era era -&gt; ShelleyBasedEra era
forall a (f :: a -&gt; *) (g :: a -&gt; *) (era :: a).
Convert f g =&gt;
f era -&gt; g era
</span><span class="hs-identifier hs-var">convert</span></span><span> </span><span class="annot"><span class="annottext">Era era
</span><a href="#local-6989586621682146481"><span class="hs-identifier hs-var">currentEra</span></a></span><span>
</span><span id="line-144"></span><span>        </span><span id="local-6989586621682146537"><span class="annot"><span class="annottext">era' :: CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var hs-var">era'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-comment">-- The user can specify an era prior to the era that the node is currently in.</span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-comment">-- We cannot use the user specified era to construct a query against a node because it may differ</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-comment">-- from the node's era and this will result in the 'QueryEraMismatch' failure.</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146539"><span class="annot"><span class="annottext">localNodeConnInfo :: LocalNodeConnectInfo
</span><a href="#local-6989586621682146539"><span class="hs-identifier hs-var hs-var">localNodeConnInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-151"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span>
</span><span id="line-152"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">localConsensusModeParams :: ConsensusModeParams
</span><span class="hs-identifier hs-var">localConsensusModeParams</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
</span><a href="#local-6989586621682146485"><span class="hs-identifier hs-var">consensusModeParams</span></a></span><span>
</span><span id="line-153"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localNodeNetworkId :: NetworkId
</span><span class="hs-identifier hs-var">localNodeNetworkId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682146488"><span class="hs-identifier hs-var">networkId</span></a></span><span>
</span><span id="line-154"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localNodeSocketPath :: SocketPath
</span><span class="hs-identifier hs-var">localNodeSocketPath</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621682146483"><span class="hs-identifier hs-var">nodeSocketPath</span></a></span><span>
</span><span id="line-155"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621682146544"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682146544"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; ExceptT
     TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
 -&gt; ExceptT
      TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; ExceptT
     TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall era a ctx.
ShelleyBasedEra era
-&gt; [(a, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFiles"><span class="hs-identifier hs-var">readScriptWitnessFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
</span><a href="#local-6989586621682146493"><span class="hs-identifier hs-var">txins</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621682146548"><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146548"><span class="hs-identifier hs-var">certFilesAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-159"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall era a ctx.
ShelleyBasedEra era
-&gt; [(a, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFiles"><span class="hs-identifier hs-var">readScriptWitnessFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146515"><span class="hs-identifier hs-var">certificates</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">-- TODO: Conway Era - How can we make this more composable?</span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621682146549"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146549"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="annottext">[ExceptT
   TxCmdError
   IO
   (Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a></span><span>
</span><span id="line-164"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(Certificate era
 -&gt; (Certificate era, Maybe (ScriptWitness WitCtxStake era)))
-&gt; ExceptT TxCmdError IO (Certificate era)
-&gt; ExceptT
     TxCmdError
     IO
     (Certificate era, Maybe (ScriptWitness WitCtxStake era))
forall a b.
(a -&gt; b) -&gt; ExceptT TxCmdError IO a -&gt; ExceptT TxCmdError IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span>
</span><span id="line-165"></span><span>            </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682146551"><span class="hs-identifier hs-var">mSwit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeError -&gt; TxCmdError)
-&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era)
-&gt; ExceptT TxCmdError IO (Certificate era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadTextViewFileError"><span class="hs-identifier hs-var">TxCmdReadTextViewFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeError) IO (Certificate era)
 -&gt; ExceptT TxCmdError IO (Certificate era))
-&gt; (IO (Either (FileError TextEnvelopeError) (Certificate era))
    -&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT TxCmdError IO (Certificate era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeError) (Certificate era))
 -&gt; ExceptT TxCmdError IO (Certificate era))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT TxCmdError IO (Certificate era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-167"></span><span>                </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ShelleyBasedEraConstraints era =&gt;
    IO (Either (FileError TextEnvelopeError) (Certificate era)))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
forall era a.
ShelleyBasedEra era -&gt; (ShelleyBasedEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyBasedEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyBasedEraConstraints era =&gt;
  IO (Either (FileError TextEnvelopeError) (Certificate era)))
 -&gt; IO (Either (FileError TextEnvelopeError) (Certificate era)))
-&gt; (ShelleyBasedEraConstraints era =&gt;
    IO (Either (FileError TextEnvelopeError) (Certificate era)))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-168"></span><span>                  </span><span class="annot"><span class="annottext">AsType (Certificate era)
-&gt; File Any 'In
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
forall a content.
HasTextEnvelope a =&gt;
AsType a
-&gt; File content 'In -&gt; IO (Either (FileError TextEnvelopeError) a)
</span><span class="hs-identifier hs-var">readFileTextEnvelope</span></span><span> </span><span class="annot"><span class="annottext">AsType (Certificate era)
forall era. AsType (Certificate era)
</span><span class="hs-identifier hs-var">AsCertificate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; File Any 'In
forall content (direction :: FileDirection).
FilePath -&gt; File content direction
</span><span class="hs-identifier hs-var">File</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682146563"><span class="hs-identifier hs-var">certFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#CertificateFile"><span class="hs-identifier hs-type">CertificateFile</span></a></span><span> </span><span id="local-6989586621682146563"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682146563"><span class="hs-identifier hs-var">certFile</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146551"><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682146551"><span class="hs-identifier hs-var">mSwit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146548"><span class="hs-identifier hs-var">certFilesAndMaybeScriptWits</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ((Certificate era, Maybe (ScriptWitness WitCtxStake era))
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146549"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Certificate era -&gt; ExceptT TxCmdError IO ()
forall era. Certificate era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html#checkCertificateHashes"><span class="hs-identifier hs-var">checkCertificateHashes</span></a></span><span> </span><span class="annot"><span class="annottext">(Certificate era -&gt; ExceptT TxCmdError IO ())
-&gt; ((Certificate era, Maybe (ScriptWitness WitCtxStake era))
    -&gt; Certificate era)
-&gt; (Certificate era, Maybe (ScriptWitness WitCtxStake era))
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Certificate era, Maybe (ScriptWitness WitCtxStake era))
-&gt; Certificate era
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621682146566"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146566"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-177"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall era a b ctx.
ShelleyBasedEra era
-&gt; [(a, b, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, b, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFilesTuple"><span class="hs-identifier hs-var">readScriptWitnessFilesTuple</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146517"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621682146568"><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682146568"><span class="hs-identifier hs-var">txMetadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-179"></span><span>      </span><span class="annot"><span class="annottext">(MetadataError -&gt; TxCmdError)
-&gt; ExceptT MetadataError IO (TxMetadataInEra era)
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdMetadataError"><span class="hs-identifier hs-var">TxCmdMetadataError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT MetadataError IO (TxMetadataInEra era)
 -&gt; ExceptT TxCmdError IO (TxMetadataInEra era))
-&gt; (IO (Either MetadataError (TxMetadataInEra era))
    -&gt; ExceptT MetadataError IO (TxMetadataInEra era))
-&gt; IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT MetadataError IO (TxMetadataInEra era)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either MetadataError (TxMetadataInEra era))
 -&gt; ExceptT TxCmdError IO (TxMetadataInEra era))
-&gt; IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-180"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxMetadataJsonSchema
-&gt; [MetadataFile]
-&gt; IO (Either MetadataError (TxMetadataInEra era))
forall era.
ShelleyBasedEra era
-&gt; TxMetadataJsonSchema
-&gt; [MetadataFile]
-&gt; IO (Either MetadataError (TxMetadataInEra era))
</span><a href="Cardano.CLI.Read.html#readTxMetadata"><span class="hs-identifier hs-var">readTxMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">TxMetadataJsonSchema
</span><a href="#local-6989586621682146519"><span class="hs-identifier hs-var">metadataSchema</span></a></span><span> </span><span class="annot"><span class="annottext">[MetadataFile]
</span><a href="#local-6989586621682146523"><span class="hs-identifier hs-var">metadataFiles</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146571"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682146571"><span class="hs-identifier hs-var">mas</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146572"><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682146572"><span class="hs-identifier hs-var">sWitFiles</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Value, [CliMintScriptRequirements])
-&gt; Maybe (Value, [CliMintScriptRequirements])
-&gt; (Value, [CliMintScriptRequirements])
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Value, [CliMintScriptRequirements])
</span><a href="#local-6989586621682146509"><span class="hs-identifier hs-var">mValue</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621682146573"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682146573"><span class="hs-identifier hs-var">usedToGetReferenceInputs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682146571"><span class="hs-identifier hs-var">mas</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; (Value, [MintScriptWitnessWithPolicyId era]))
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT
     TxCmdError IO (Value, [MintScriptWitnessWithPolicyId era])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError CliScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError CliScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdCliScriptWitnessError"><span class="hs-identifier hs-var">TxCmdCliScriptWitnessError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CliMintScriptRequirements
 -&gt; ExceptT
      (FileError CliScriptWitnessError)
      IO
      (MintScriptWitnessWithPolicyId era))
-&gt; [CliMintScriptRequirements]
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     (MintScriptWitnessWithPolicyId era)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) era.
MonadIOTransError (FileError CliScriptWitnessError) t m =&gt;
ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; t m (MintScriptWitnessWithPolicyId era)
</span><a href="Cardano.CLI.EraBased.Script.Mint.Read.html#readMintScriptWitness"><span class="hs-identifier hs-var">readMintScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682146572"><span class="hs-identifier hs-var">sWitFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621682146578"><span class="annot"><span class="annottext">[ScriptInAnyLang]
</span><a href="#local-6989586621682146578"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-185"></span><span>      </span><span class="annot"><span class="annottext">(FileError ScriptDecodeError -&gt; TxCmdError)
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
-&gt; ExceptT TxCmdError IO [ScriptInAnyLang]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError ScriptDecodeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptFileError"><span class="hs-identifier hs-var">TxCmdScriptFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
 -&gt; ExceptT TxCmdError IO [ScriptInAnyLang])
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
-&gt; ExceptT TxCmdError IO [ScriptInAnyLang]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-186"></span><span>        </span><span class="annot"><span class="annottext">(ScriptFile
 -&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang)
-&gt; [ScriptFile]
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *).
MonadIOTransError (FileError ScriptDecodeError) t m =&gt;
FilePath -&gt; t m ScriptInAnyLang
</span><a href="Cardano.CLI.Read.html#readFileScriptInAnyLang"><span class="hs-identifier hs-var">readFileScriptInAnyLang</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath
 -&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang)
-&gt; (ScriptFile -&gt; FilePath)
-&gt; ScriptFile
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptFile -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><span class="hs-identifier hs-var">unFile</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ScriptFile]
</span><a href="#local-6989586621682146521"><span class="hs-identifier hs-var">scriptFiles</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span id="local-6989586621682146582"><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682146582"><span class="hs-identifier hs-var">txAuxScripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><span class="annottext">Either TxCmdError (TxAuxScripts era)
-&gt; ExceptT TxCmdError IO (TxAuxScripts era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxAuxScripts era)
 -&gt; ExceptT TxCmdError IO (TxAuxScripts era))
-&gt; Either TxCmdError (TxAuxScripts era)
-&gt; ExceptT TxCmdError IO (TxAuxScripts era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TxAuxScriptsValidationError -&gt; TxCmdError)
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
-&gt; Either TxCmdError (TxAuxScripts era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxScriptsValidationError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdAuxScriptsValidationError"><span class="hs-identifier hs-var">TxCmdAuxScriptsValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxAuxScriptsValidationError (TxAuxScripts era)
 -&gt; Either TxCmdError (TxAuxScripts era))
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
-&gt; Either TxCmdError (TxAuxScripts era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [ScriptInAnyLang]
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
forall era.
ShelleyBasedEra era
-&gt; [ScriptInAnyLang]
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxAuxScripts"><span class="hs-identifier hs-var">validateTxAuxScripts</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptInAnyLang]
</span><a href="#local-6989586621682146578"><span class="hs-identifier hs-var">scripts</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621682146587"><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682146587"><span class="hs-identifier hs-var">mProp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><a href="#local-6989586621682146525"><span class="hs-identifier hs-var">mUpdateProposalFile</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Featured</span></span><span> </span><span id="local-6989586621682146589"><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682146589"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682146590"><span class="annot"><span class="annottext">UpdateProposalFile
</span><a href="#local-6989586621682146590"><span class="hs-identifier hs-var">updateProposalFile</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-192"></span><span>        </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
-&gt; UpdateProposalFile
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
forall era.
ShelleyToBabbageEra era
-&gt; UpdateProposalFile
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
</span><a href="Cardano.CLI.Read.html#readTxUpdateProposal"><span class="hs-identifier hs-var">readTxUpdateProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682146589"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateProposalFile
</span><a href="#local-6989586621682146590"><span class="hs-identifier hs-var">updateProposalFile</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
-&gt; (ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
    -&gt; ExceptT TxCmdError IO (TxUpdateProposal era))
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeError -&gt; TxCmdError)
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadTextViewFileError"><span class="hs-identifier hs-var">TxCmdReadTextViewFileError</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
forall era. TxUpdateProposal era
</span><span class="hs-identifier hs-var">TxUpdateProposalNone</span></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>    </span><span id="local-6989586621682146593"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682146593"><span class="hs-identifier hs-var">requiredSigners</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="annottext">(RequiredSigner -&gt; ExceptT TxCmdError IO (Hash PaymentKey))
-&gt; [RequiredSigner] -&gt; ExceptT TxCmdError IO [Hash PaymentKey]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RequiredSignerError -&gt; TxCmdError)
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
-&gt; ExceptT TxCmdError IO (Hash PaymentKey)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">RequiredSignerError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdRequiredSignerError"><span class="hs-identifier hs-var">TxCmdRequiredSignerError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT RequiredSignerError IO (Hash PaymentKey)
 -&gt; ExceptT TxCmdError IO (Hash PaymentKey))
-&gt; (RequiredSigner
    -&gt; ExceptT RequiredSignerError IO (Hash PaymentKey))
-&gt; RequiredSigner
-&gt; ExceptT TxCmdError IO (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either RequiredSignerError (Hash PaymentKey))
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either RequiredSignerError (Hash PaymentKey))
 -&gt; ExceptT RequiredSignerError IO (Hash PaymentKey))
-&gt; (RequiredSigner
    -&gt; IO (Either RequiredSignerError (Hash PaymentKey)))
-&gt; RequiredSigner
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RequiredSigner -&gt; IO (Either RequiredSignerError (Hash PaymentKey))
</span><a href="Cardano.CLI.Read.html#readRequiredSigner"><span class="hs-identifier hs-var">readRequiredSigner</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RequiredSigner]
</span><a href="#local-6989586621682146498"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621682146596"><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682146596"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
-&gt; (TxOutShelleyBasedEra
    -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; ExceptT TxCmdError IO (Maybe (TxOut CtxTx era))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
</span><a href="#local-6989586621682146502"><span class="hs-identifier hs-var">mReturnColl</span></a></span><span> </span><span class="annot"><span class="annottext">((TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
 -&gt; ExceptT TxCmdError IO (Maybe (TxOut CtxTx era)))
-&gt; (TxOutShelleyBasedEra
    -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; ExceptT TxCmdError IO (Maybe (TxOut CtxTx era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInShelleyBasedEra"><span class="hs-identifier hs-var">toTxOutInShelleyBasedEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span>    </span><span id="local-6989586621682146598"><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682146598"><span class="hs-identifier hs-var">txOuts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; [TxOutAnyEra] -&gt; ExceptT TxCmdError IO [TxOut CtxTx era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInAnyEra"><span class="hs-identifier hs-var">toTxOutInAnyEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOutAnyEra]
</span><a href="#local-6989586621682146505"><span class="hs-identifier hs-var">txouts</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-comment">-- Conway related</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621682146599"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146599"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-203"></span><span>      </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; (ConwayEraOnwards era
    -&gt; ExceptT
         TxCmdError
         IO
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; CardanoEra era
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a era.
a -&gt; (ConwayEraOnwards era -&gt; a) -&gt; CardanoEra era -&gt; a
forall (eon :: * -&gt; *) a era.
Eon eon =&gt;
a -&gt; (eon era -&gt; a) -&gt; CardanoEra era -&gt; a
</span><span class="hs-identifier hs-var">inEonForEra</span></span><span>
</span><span id="line-204"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682146601"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146601"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(VoteError -&gt; TxCmdError)
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">VoteError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdVoteError"><span class="hs-identifier hs-var">TxCmdVoteError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   VoteError
   IO
   [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO
  (Either
     VoteError
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-var">ExceptT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall era.
ConwayEraOnwards era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
</span><a href="Cardano.CLI.Read.html#readVotingProceduresFiles"><span class="hs-identifier hs-var">readVotingProceduresFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146601"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">[(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146527"><span class="hs-identifier hs-var">voteFiles</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>        </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ((VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146599"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; VotingProcedures era -&gt; ExceptT TxCmdError IO ()
forall era.
ShelleyBasedEra era
-&gt; VotingProcedures era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html#checkVotingProcedureHashes"><span class="hs-identifier hs-var">checkVotingProcedureHashes</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">(VotingProcedures era -&gt; ExceptT TxCmdError IO ())
-&gt; ((VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))
    -&gt; VotingProcedures era)
-&gt; (VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))
-&gt; VotingProcedures era
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span>    </span><span id="local-6989586621682146605"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146605"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-211"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     TxCmdError [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO
   (Either
      TxCmdError [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
 -&gt; ExceptT
      TxCmdError
      IO
      [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        TxCmdError [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-212"></span><span>        </span><span class="annot"><span class="annottext">(ProposalError -&gt; TxCmdError)
-&gt; Either
     ProposalError
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Either
     TxCmdError [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProposalError"><span class="hs-identifier hs-var">TxCmdProposalError</span></a></span><span>
</span><span id="line-213"></span><span>          </span><span class="annot"><span class="annottext">(Either
   ProposalError
   [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; Either
      TxCmdError [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        TxCmdError [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
forall era.
ShelleyBasedEra era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
</span><a href="Cardano.CLI.Read.html#readTxGovernanceActions"><span class="hs-identifier hs-var">readTxGovernanceActions</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146529"><span class="hs-identifier hs-var">proposalFiles</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ((Proposal era, Maybe (ScriptWitness WitCtxStake era))
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146605"><span class="hs-identifier hs-var">proposals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; Proposal era -&gt; ExceptT TxCmdError IO ()
forall era.
ShelleyBasedEra era -&gt; Proposal era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Transaction.HashCheck.html#checkProposalHashes"><span class="hs-identifier hs-var">checkProposalHashes</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">(Proposal era -&gt; ExceptT TxCmdError IO ())
-&gt; ((Proposal era, Maybe (ScriptWitness WitCtxStake era))
    -&gt; Proposal era)
-&gt; (Proposal era, Maybe (ScriptWitness WitCtxStake era))
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Proposal era, Maybe (ScriptWitness WitCtxStake era))
-&gt; Proposal era
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-comment">-- Extract return addresses from proposals and check that the return address in each proposal is registered</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146608"><span class="annot"><span class="annottext">returnAddrHashes :: Set StakeCredential
</span><a href="#local-6989586621682146608"><span class="hs-identifier hs-var hs-var">returnAddrHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>          </span><span class="annot"><span class="annottext">[Item (Set StakeCredential)] -&gt; Set StakeCredential
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span>
</span><span id="line-221"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item (Set StakeCredential)
StakeCredential
</span><a href="#local-6989586621682146609"><span class="hs-identifier hs-var">stakeCred</span></a></span><span>
</span><span id="line-222"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146610"><span class="annot"><span class="annottext">Proposal era
</span><a href="#local-6989586621682146610"><span class="hs-identifier hs-var">proposal</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146605"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-223"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146609"><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682146609"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GovernanceAction era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Proposal era
-&gt; (Lovelace, StakeCredential, GovernanceAction era)
forall era.
ShelleyBasedEra era
-&gt; Proposal era
-&gt; (Lovelace, StakeCredential, GovernanceAction era)
</span><span class="hs-identifier hs-var">fromProposalProcedure</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">Proposal era
</span><a href="#local-6989586621682146610"><span class="hs-identifier hs-var">proposal</span></a></span><span>
</span><span id="line-224"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-225"></span><span>        </span><span id="local-6989586621682146612"><span class="annot"><span class="annottext">treasuryWithdrawalAddresses :: Set StakeCredential
</span><a href="#local-6989586621682146612"><span class="hs-identifier hs-var hs-var">treasuryWithdrawalAddresses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>          </span><span class="annot"><span class="annottext">[Item (Set StakeCredential)] -&gt; Set StakeCredential
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span>
</span><span id="line-227"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item (Set StakeCredential)
StakeCredential
</span><a href="#local-6989586621682146613"><span class="hs-identifier hs-var">stakeCred</span></a></span><span>
</span><span id="line-228"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146614"><span class="annot"><span class="annottext">Proposal era
</span><a href="#local-6989586621682146614"><span class="hs-identifier hs-var">proposal</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146605"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-229"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StakeCredential
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146615"><span class="annot"><span class="annottext">GovernanceAction era
</span><a href="#local-6989586621682146615"><span class="hs-identifier hs-var">govAction</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Proposal era
-&gt; (Lovelace, StakeCredential, GovernanceAction era)
forall era.
ShelleyBasedEra era
-&gt; Proposal era
-&gt; (Lovelace, StakeCredential, GovernanceAction era)
</span><span class="hs-identifier hs-var">fromProposalProcedure</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">Proposal era
</span><a href="#local-6989586621682146614"><span class="hs-identifier hs-var">proposal</span></a></span><span>
</span><span id="line-230"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TreasuryWithdrawal</span></span><span> </span><span id="local-6989586621682146617"><span class="annot"><span class="annottext">[(Network, StakeCredential, Lovelace)]
</span><a href="#local-6989586621682146617"><span class="hs-identifier hs-var">withdrawalsList</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (ScriptHash StandardCrypto)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GovernanceAction era
</span><a href="#local-6989586621682146615"><span class="hs-identifier hs-var">govAction</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Match on TreasuryWithdrawal action</span><span>
</span><span id="line-231"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Network
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146613"><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682146613"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Network, StakeCredential, Lovelace)]
</span><a href="#local-6989586621682146617"><span class="hs-identifier hs-var">withdrawalsList</span></a></span><span> </span><span class="hs-comment">-- Extract fund-receiving stake credentials</span><span>
</span><span id="line-232"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-233"></span><span>        </span><span id="local-6989586621682146618"><span class="annot"><span class="annottext">allAddrHashes :: Set StakeCredential
</span><a href="#local-6989586621682146618"><span class="hs-identifier hs-var hs-var">allAddrHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set StakeCredential -&gt; Set StakeCredential -&gt; Set StakeCredential
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#union"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="annot"><span class="annottext">Set StakeCredential
</span><a href="#local-6989586621682146608"><span class="hs-identifier hs-var">returnAddrHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Set StakeCredential
</span><a href="#local-6989586621682146612"><span class="hs-identifier hs-var">treasuryWithdrawalAddresses</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682146620"><span class="annot"><span class="annottext">Map StakeAddress Lovelace
</span><a href="#local-6989586621682146620"><span class="hs-identifier hs-var">balances</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map StakeAddress PoolId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     AcquiringFailure
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure
        (Either
           UnsupportedNtcVersionError
           (Either
              EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span>
</span><span id="line-237"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
-&gt; IO
     (Either
        AcquiringFailure
        (Either
           UnsupportedNtcVersionError
           (Either
              EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span>
</span><span id="line-238"></span><span>            </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621682146539"><span class="hs-identifier hs-var">localNodeConnInfo</span></a></span><span>
</span><span id="line-239"></span><span>            </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalStateQuery.Type.html#VolatileTip"><span class="hs-identifier hs-var">Consensus.VolatileTip</span></a></span><span>
</span><span id="line-240"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Set StakeCredential
-&gt; NetworkId
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
forall era block point r.
ShelleyBasedEra era
-&gt; Set StakeCredential
-&gt; NetworkId
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
</span><span class="hs-identifier hs-var">queryStakeAddresses</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">Set StakeCredential
</span><a href="#local-6989586621682146618"><span class="hs-identifier hs-var">allAddrHashes</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682146488"><span class="hs-identifier hs-var">networkId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     AcquiringFailure
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         AcquiringFailure
         (Either
            UnsupportedNtcVersionError
            (Either
               EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
    -&gt; ExceptT
         TxCmdError
         IO
         (Either
            UnsupportedNtcVersionError
            (Either
               EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(AcquiringFailure
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         UnsupportedNtcVersionError
         (Either
            EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure
        (Either
           UnsupportedNtcVersionError
           (Either
              EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         UnsupportedNtcVersionError
         (Either
            EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))))
-&gt; (AcquiringFailure -&gt; TxCmdError)
-&gt; AcquiringFailure
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (AcquiringFailure -&gt; QueryConvenienceError)
-&gt; AcquiringFailure
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">AcqFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     UnsupportedNtcVersionError
     (Either
        EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         UnsupportedNtcVersionError
         (Either
            EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
    -&gt; ExceptT
         TxCmdError
         IO
         (Either
            EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnsupportedNtcVersionError
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        UnsupportedNtcVersionError
        (Either
           EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId)))
-&gt; (UnsupportedNtcVersionError -&gt; TxCmdError)
-&gt; UnsupportedNtcVersionError
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (UnsupportedNtcVersionError -&gt; QueryConvenienceError)
-&gt; UnsupportedNtcVersionError
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">QceUnsupportedNtcVersion</span></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
    -&gt; ExceptT
         TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId))
-&gt; ExceptT
     TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(EraMismatch
 -&gt; ExceptT
      TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        EraMismatch (Map StakeAddress Lovelace, Map StakeAddress PoolId))
-&gt; ExceptT
     TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId))
-&gt; (EraMismatch -&gt; TxCmdError)
-&gt; EraMismatch
-&gt; ExceptT
     TxCmdError IO (Map StakeAddress Lovelace, Map StakeAddress PoolId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">EraMismatch -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxSubmitErrorEraMismatch"><span class="hs-identifier hs-var">TxCmdTxSubmitErrorEraMismatch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146631"><span class="annot"><span class="annottext">unregisteredAddresses :: Set StakeCredential
</span><a href="#local-6989586621682146631"><span class="hs-identifier hs-var hs-var">unregisteredAddresses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-247"></span><span>          </span><span class="annot"><span class="annottext">(StakeCredential -&gt; Bool)
-&gt; Set StakeCredential -&gt; Set StakeCredential
forall a. (a -&gt; Bool) -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#filter"><span class="hs-identifier hs-var">Set.filter</span></a></span><span>
</span><span id="line-248"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682146633"><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682146633"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StakeAddress -&gt; Map StakeAddress Lovelace -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Internal.html#notMember"><span class="hs-identifier hs-var">Map.notMember</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NetworkId -&gt; StakeCredential -&gt; StakeAddress
</span><span class="hs-identifier hs-var">makeStakeAddress</span></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682146488"><span class="hs-identifier hs-var">networkId</span></a></span><span> </span><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682146633"><span class="hs-identifier hs-var">stakeCred</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map StakeAddress Lovelace
</span><a href="#local-6989586621682146620"><span class="hs-identifier hs-var">balances</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>            </span><span class="annot"><span class="annottext">Set StakeCredential
</span><a href="#local-6989586621682146618"><span class="hs-identifier hs-var">allAddrHashes</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT TxCmdError IO () -&gt; ExceptT TxCmdError IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set StakeCredential -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Set StakeCredential
</span><a href="#local-6989586621682146631"><span class="hs-identifier hs-var">unregisteredAddresses</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT TxCmdError IO () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-252"></span><span>      </span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall a. TxCmdError -&gt; ExceptT TxCmdError IO a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/mtl-2.3.1-inplace/src/Control.Monad.Error.Class.html#throwError"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; TxCmdError -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-253"></span><span>        </span><span class="annot"><span class="annottext">Set StakeCredential -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdUnregisteredStakeAddress"><span class="hs-identifier hs-var">TxCmdUnregisteredStakeAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Set StakeCredential
</span><a href="#local-6989586621682146631"><span class="hs-identifier hs-var">unregisteredAddresses</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-comment">-- the same collateral input can be used for several plutus scripts</span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146639"><span class="annot"><span class="annottext">filteredTxinsc :: [TxIn]
</span><a href="#local-6989586621682146639"><span class="hs-identifier hs-var hs-var">filteredTxinsc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; [TxIn]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Containers.ListUtils.html#nubOrd"><span class="hs-identifier hs-var">nubOrd</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146499"><span class="hs-identifier hs-var">txinsc</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146640"><span class="annot"><span class="annottext">allReferenceInputs :: [TxIn]
</span><a href="#local-6989586621682146640"><span class="hs-identifier hs-var hs-var">allReferenceInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-259"></span><span>          </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
forall era.
[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getAllReferenceInputs"><span class="hs-identifier hs-var">getAllReferenceInputs</span></a></span><span>
</span><span id="line-260"></span><span>            </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682146544"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-261"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era)
-&gt; [MintScriptWitnessWithPolicyId era]
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era
forall era.
MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era
</span><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#mswScriptWitness"><span class="hs-identifier hs-var">mswScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; [ScriptWitness WitCtxMint era])
-&gt; [MintScriptWitnessWithPolicyId era]
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
-&gt; [MintScriptWitnessWithPolicyId era]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682146573"><span class="hs-identifier hs-var">usedToGetReferenceInputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>            </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146549"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-263"></span><span>            </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146566"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-264"></span><span>            </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146599"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span><span>
</span><span id="line-265"></span><span>            </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146605"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-266"></span><span>            </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146495"><span class="hs-identifier hs-var">readOnlyReferenceInputs</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146644"><span class="annot"><span class="annottext">inputsThatRequireWitnessing :: [TxIn]
</span><a href="#local-6989586621682146644"><span class="hs-identifier hs-var hs-var">inputsThatRequireWitnessing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682146645"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146645"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682146645"><span class="hs-identifier hs-var">input</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxTxIn era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682146544"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-269"></span><span>        </span><span id="local-6989586621682146646"><span class="annot"><span class="annottext">allTxInputs :: [TxIn]
</span><a href="#local-6989586621682146646"><span class="hs-identifier hs-var hs-var">allTxInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146644"><span class="hs-identifier hs-var">inputsThatRequireWitnessing</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; [TxIn] -&gt; [TxIn]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146640"><span class="hs-identifier hs-var">allReferenceInputs</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; [TxIn] -&gt; [TxIn]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146639"><span class="hs-identifier hs-var">filteredTxinsc</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span> </span><span id="local-6989586621682146681"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146681"><span class="hs-identifier hs-var">nodeEra</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; IO
     (Either
        AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621682146539"><span class="hs-identifier hs-var">localNodeConnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalStateQuery.Type.html#VolatileTip"><span class="hs-identifier hs-var">Consensus.VolatileTip</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
forall block point r.
LocalStateQueryExpr
  block
  point
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
</span><span class="hs-identifier hs-var">queryCurrentEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
    -&gt; ExceptT
         TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(AcquiringFailure
 -&gt; ExceptT
      TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; (AcquiringFailure -&gt; TxCmdError)
-&gt; AcquiringFailure
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (AcquiringFailure -&gt; QueryConvenienceError)
-&gt; AcquiringFailure
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">AcqFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; (ExceptT
      TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
    -&gt; ExceptT TxCmdError IO AnyCardanoEra)
-&gt; ExceptT TxCmdError IO AnyCardanoEra
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnsupportedNtcVersionError -&gt; ExceptT TxCmdError IO AnyCardanoEra)
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; ExceptT TxCmdError IO AnyCardanoEra
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO AnyCardanoEra
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO AnyCardanoEra)
-&gt; (UnsupportedNtcVersionError -&gt; TxCmdError)
-&gt; UnsupportedNtcVersionError
-&gt; ExceptT TxCmdError IO AnyCardanoEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (UnsupportedNtcVersionError -&gt; QueryConvenienceError)
-&gt; UnsupportedNtcVersionError
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">QceUnsupportedNtcVersion</span></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682146683"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621682146683"><span class="hs-identifier hs-var">txEraUtxo</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LedgerProtocolParameters era
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146684"><span class="annot"><span class="annottext">EraHistory
</span><a href="#local-6989586621682146684"><span class="hs-identifier hs-var">eraHistory</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146685"><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621682146685"><span class="hs-identifier hs-var">systemStart</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set PoolId
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map StakeCredential Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole StandardCrypto) Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146686"><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)
</span><a href="#local-6989586621682146686"><span class="hs-identifier hs-var">featuredCurrentTreasuryValueM</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-277"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     AcquiringFailure
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span>
</span><span id="line-278"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span>
</span><span id="line-279"></span><span>            </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621682146539"><span class="hs-identifier hs-var">localNodeConnInfo</span></a></span><span>
</span><span id="line-280"></span><span>            </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalStateQuery.Type.html#VolatileTip"><span class="hs-identifier hs-var">Consensus.VolatileTip</span></a></span><span>
</span><span id="line-281"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; [TxIn]
-&gt; [Certificate era]
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall era block point r.
CardanoEra era
-&gt; [TxIn]
-&gt; [Certificate era]
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
</span><span class="hs-identifier hs-var">queryStateForBalancedTx</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146681"><span class="hs-identifier hs-var">nodeEra</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146646"><span class="hs-identifier hs-var">allTxInputs</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     AcquiringFailure
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         AcquiringFailure
         (Either
            QueryConvenienceError
            (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
             Set PoolId, Map StakeCredential Lovelace,
             Map (Credential 'DRepRole StandardCrypto) Lovelace,
             Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
    -&gt; ExceptT
         TxCmdError
         IO
         (Either
            QueryConvenienceError
            (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
             Set PoolId, Map StakeCredential Lovelace,
             Map (Credential 'DRepRole StandardCrypto) Lovelace,
             Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(AcquiringFailure
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         QueryConvenienceError
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         QueryConvenienceError
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; (AcquiringFailure -&gt; TxCmdError)
-&gt; AcquiringFailure
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (AcquiringFailure -&gt; QueryConvenienceError)
-&gt; AcquiringFailure
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">AcqFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     QueryConvenienceError
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         QueryConvenienceError
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
    -&gt; ExceptT
         TxCmdError
         IO
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError
 -&gt; ExceptT
      TxCmdError
      IO
      (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
       Set PoolId, Map StakeCredential Lovelace,
       Map (Credential 'DRepRole StandardCrypto) Lovelace,
       Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
       Set PoolId, Map StakeCredential Lovelace,
       Map (Credential 'DRepRole StandardCrypto) Lovelace,
       Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; (QueryConvenienceError -&gt; TxCmdError)
-&gt; QueryConvenienceError
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span>    </span><span id="local-6989586621682146688"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682146688"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-287"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682146571"><span class="hs-identifier hs-var">mas</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; (Value, [MintScriptWitnessWithPolicyId era]))
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT
     TxCmdError IO (Value, [MintScriptWitnessWithPolicyId era])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError CliScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError CliScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdCliScriptWitnessError"><span class="hs-identifier hs-var">TxCmdCliScriptWitnessError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CliMintScriptRequirements
 -&gt; ExceptT
      (FileError CliScriptWitnessError)
      IO
      (MintScriptWitnessWithPolicyId era))
-&gt; [CliMintScriptRequirements]
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     (MintScriptWitnessWithPolicyId era)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) era.
MonadIOTransError (FileError CliScriptWitnessError) t m =&gt;
ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; t m (MintScriptWitnessWithPolicyId era)
</span><a href="Cardano.CLI.EraBased.Script.Mint.Read.html#readMintScriptWitness"><span class="hs-identifier hs-var">readMintScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682146572"><span class="hs-identifier hs-var">sWitFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146689"><span class="annot"><span class="annottext">currentTreasuryValueAndDonation :: Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682146689"><span class="hs-identifier hs-var hs-var">currentTreasuryValueAndDonation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-289"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TxTreasuryDonation
</span><a href="#local-6989586621682146531"><span class="hs-identifier hs-var">treasuryDonation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Featured ConwayEraOnwards era TxCurrentTreasuryValue
-&gt; TxCurrentTreasuryValue
forall (eon :: * -&gt; *) era a. Featured eon era a -&gt; a
</span><span class="hs-identifier hs-var">unFeatured</span></span><span> </span><span class="annot"><span class="annottext">(Featured ConwayEraOnwards era TxCurrentTreasuryValue
 -&gt; TxCurrentTreasuryValue)
-&gt; Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)
-&gt; Maybe TxCurrentTreasuryValue
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)
</span><a href="#local-6989586621682146686"><span class="hs-identifier hs-var">featuredCurrentTreasuryValueM</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-290"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TxTreasuryDonation
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe TxCurrentTreasuryValue
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-comment">-- We shouldn't specify the treasury value when no donation is being done</span><span>
</span><span id="line-291"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682146691"><span class="annot"><span class="annottext">TxTreasuryDonation
</span><a href="#local-6989586621682146691"><span class="hs-identifier hs-var">_td</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe TxCurrentTreasuryValue
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-comment">-- TODO: Current treasury value couldn't be obtained but is required: we should fail suggesting that the node's version is too old</span><span>
</span><span id="line-292"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682146692"><span class="annot"><span class="annottext">TxTreasuryDonation
</span><a href="#local-6989586621682146692"><span class="hs-identifier hs-var">td</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682146693"><span class="annot"><span class="annottext">TxCurrentTreasuryValue
</span><a href="#local-6989586621682146693"><span class="hs-identifier hs-var">ctv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCurrentTreasuryValue
</span><a href="#local-6989586621682146693"><span class="hs-identifier hs-var">ctv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxTreasuryDonation
</span><a href="#local-6989586621682146692"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-comment">-- We need to construct the txBodycontent outside of runTxBuild</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">BalancedTxBody</span></span><span> </span><span id="local-6989586621682146695"><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682146695"><span class="hs-identifier hs-var">txBodyContent</span></a></span></span><span> </span><span id="local-6989586621682146696"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682146696"><span class="hs-identifier hs-var">balancedTxBody</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-296"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; SocketPath
-&gt; NetworkId
-&gt; Maybe ScriptValidity
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; TxOutChangeAddress
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; Maybe Word
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall era.
ShelleyBasedEra era
-&gt; SocketPath
-&gt; NetworkId
-&gt; Maybe ScriptValidity
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; TxOutChangeAddress
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; Maybe Word
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTxBuild"><span class="hs-identifier hs-var">runTxBuild</span></a></span><span>
</span><span id="line-297"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span>
</span><span id="line-298"></span><span>        </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621682146483"><span class="hs-identifier hs-var">nodeSocketPath</span></a></span><span>
</span><span id="line-299"></span><span>        </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682146488"><span class="hs-identifier hs-var">networkId</span></a></span><span>
</span><span id="line-300"></span><span>        </span><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682146490"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span>
</span><span id="line-301"></span><span>        </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682146544"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-302"></span><span>        </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146495"><span class="hs-identifier hs-var">readOnlyReferenceInputs</span></a></span><span>
</span><span id="line-303"></span><span>        </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146639"><span class="hs-identifier hs-var">filteredTxinsc</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682146596"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682146503"><span class="hs-identifier hs-var">mTotalCollateral</span></a></span><span>
</span><span id="line-306"></span><span>        </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682146598"><span class="hs-identifier hs-var">txOuts</span></a></span><span>
</span><span id="line-307"></span><span>        </span><span class="annot"><span class="annottext">TxOutChangeAddress
</span><a href="#local-6989586621682146507"><span class="hs-identifier hs-var">changeAddresses</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682146688"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682146511"><span class="hs-identifier hs-var">mValidityLowerBound</span></a></span><span>
</span><span id="line-310"></span><span>        </span><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682146513"><span class="hs-identifier hs-var">mValidityUpperBound</span></a></span><span>
</span><span id="line-311"></span><span>        </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146549"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-312"></span><span>        </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146566"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-313"></span><span>        </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682146593"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span>
</span><span id="line-314"></span><span>        </span><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682146582"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span>
</span><span id="line-315"></span><span>        </span><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682146568"><span class="hs-identifier hs-var">txMetadata</span></a></span><span>
</span><span id="line-316"></span><span>        </span><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682146587"><span class="hs-identifier hs-var">mProp</span></a></span><span>
</span><span id="line-317"></span><span>        </span><span class="annot"><span class="annottext">Maybe Word
</span><a href="#local-6989586621682146492"><span class="hs-identifier hs-var">mOverrideWitnesses</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146599"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146605"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-320"></span><span>        </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682146689"><span class="hs-identifier hs-var">currentTreasuryValueAndDonation</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-comment">-- TODO: Calculating the script cost should live as a different command.</span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-comment">-- Why? Because then we can simply read a txbody and figure out</span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-comment">-- the script cost vs having to build the tx body each time</span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxBuildOutputOptions
</span><a href="#local-6989586621682146533"><span class="hs-identifier hs-var">buildOutputOptions</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-326"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#OutputScriptCostOnly"><span class="hs-identifier hs-type">OutputScriptCostOnly</span></a></span><span> </span><span id="local-6989586621682146699"><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682146699"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-327"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTxWith</span></span><span> </span><span id="local-6989586621682146702"><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
</span><a href="#local-6989586621682146702"><span class="hs-identifier hs-var">mTxProtocolParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; BuildTxWith BuildTx (Maybe (LedgerProtocolParameters era))
forall build era.
TxBodyContent build era
-&gt; BuildTxWith build (Maybe (LedgerProtocolParameters era))
</span><span class="hs-identifier hs-var">txProtocolParams</span></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682146695"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span>        </span><span id="local-6989586621682146704"><span class="annot"><span class="annottext">LedgerProtocolParameters era
</span><a href="#local-6989586621682146704"><span class="hs-identifier hs-var">pparams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
-&gt; ExceptT TxCmdError IO (Maybe (LedgerProtocolParameters era))
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
</span><a href="#local-6989586621682146702"><span class="hs-identifier hs-var">mTxProtocolParams</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Maybe (LedgerProtocolParameters era))
-&gt; (ExceptT TxCmdError IO (Maybe (LedgerProtocolParameters era))
    -&gt; ExceptT TxCmdError IO (LedgerProtocolParameters era))
-&gt; ExceptT TxCmdError IO (LedgerProtocolParameters era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (LedgerProtocolParameters era)
-&gt; ExceptT TxCmdError IO (Maybe (LedgerProtocolParameters era))
-&gt; ExceptT TxCmdError IO (LedgerProtocolParameters era)
forall x (m :: * -&gt; *) a.
Monad m =&gt;
ExceptT x m a -&gt; ExceptT x m (Maybe a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO (LedgerProtocolParameters era)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProtocolParametersNotPresentInTxBody"><span class="hs-identifier hs-var">TxCmdProtocolParametersNotPresentInTxBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>        </span><span id="local-6989586621682146707"><span class="annot"><span class="annottext">Prices
</span><a href="#local-6989586621682146707"><span class="hs-identifier hs-var">executionUnitPrices</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-331"></span><span>          </span><span class="annot"><span class="annottext">Maybe Prices -&gt; ExceptT TxCmdError IO (Maybe Prices)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; LedgerProtocolParameters era -&gt; Maybe Prices
forall era.
CardanoEra era -&gt; LedgerProtocolParameters era -&gt; Maybe Prices
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getExecutionUnitPrices"><span class="hs-identifier hs-var">getExecutionUnitPrices</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerProtocolParameters era
</span><a href="#local-6989586621682146704"><span class="hs-identifier hs-var">pparams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Maybe Prices)
-&gt; (ExceptT TxCmdError IO (Maybe Prices)
    -&gt; ExceptT TxCmdError IO Prices)
-&gt; ExceptT TxCmdError IO Prices
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO Prices
-&gt; ExceptT TxCmdError IO (Maybe Prices)
-&gt; ExceptT TxCmdError IO Prices
forall x (m :: * -&gt; *) a.
Monad m =&gt;
ExceptT x m a -&gt; ExceptT x m (Maybe a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO Prices
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdPParamExecutionUnitsNotAvailable"><span class="hs-identifier hs-var">TxCmdPParamExecutionUnitsNotAvailable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span>        </span><span class="annot"><span class="annottext">era :~: era
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-334"></span><span>          </span><span class="annot"><span class="annottext">CardanoEra era -&gt; CardanoEra era -&gt; Maybe (era :~: era)
forall a b. CardanoEra a -&gt; CardanoEra b -&gt; Maybe (a :~: b)
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#testEquality"><span class="hs-identifier hs-var">testEquality</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146681"><span class="hs-identifier hs-var">nodeEra</span></a></span><span>
</span><span id="line-335"></span><span>            </span><span class="annot"><span class="annottext">Maybe (era :~: era)
-&gt; (Maybe (era :~: era) -&gt; ExceptT TxCmdError IO (era :~: era))
-&gt; ExceptT TxCmdError IO (era :~: era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxCmdError
-&gt; Maybe (era :~: era) -&gt; ExceptT TxCmdError IO (era :~: era)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; Maybe a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeEraMismatchError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxNodeEraMismatchError"><span class="hs-identifier hs-var">TxCmdTxNodeEraMismatchError</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeEraMismatchError -&gt; TxCmdError)
-&gt; NodeEraMismatchError -&gt; TxCmdError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era -&gt; CardanoEra era -&gt; NodeEraMismatchError
forall era nodeEra.
CardanoEra era -&gt; CardanoEra nodeEra -&gt; NodeEraMismatchError
</span><a href="Cardano.CLI.Types.Errors.NodeEraMismatchError.html#NodeEraMismatchError"><span class="hs-identifier hs-var">NodeEraMismatchError</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146681"><span class="hs-identifier hs-var">nodeEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span>        </span><span id="local-6989586621682146729"><span class="annot"><span class="annottext">Map
  ScriptWitnessIndex
  (Either
     ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits))
</span><a href="#local-6989586621682146729"><span class="hs-identifier hs-var">scriptExecUnitsMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-338"></span><span>          </span><span class="annot"><span class="annottext">(TransactionValidityError era -&gt; TxCmdError)
-&gt; ExceptT
     (TransactionValidityError era)
     IO
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
-&gt; ExceptT
     TxCmdError
     IO
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyTxCmdTxExecUnitsErr -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxExecUnitsErr"><span class="hs-identifier hs-var">TxCmdTxExecUnitsErr</span></a></span><span> </span><span class="annot"><span class="annottext">(AnyTxCmdTxExecUnitsErr -&gt; TxCmdError)
-&gt; (TransactionValidityError era -&gt; AnyTxCmdTxExecUnitsErr)
-&gt; TransactionValidityError era
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionValidityError era -&gt; AnyTxCmdTxExecUnitsErr
forall era. TransactionValidityError era -&gt; AnyTxCmdTxExecUnitsErr
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#AnyTxCmdTxExecUnitsErr"><span class="hs-identifier hs-var">AnyTxCmdTxExecUnitsErr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT
   (TransactionValidityError era)
   IO
   (Map
      ScriptWitnessIndex
      (Either
         ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
 -&gt; ExceptT
      TxCmdError
      IO
      (Map
         ScriptWitnessIndex
         (Either
            ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits))))
-&gt; ExceptT
     (TransactionValidityError era)
     IO
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
-&gt; ExceptT
     TxCmdError
     IO
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-339"></span><span>            </span><span class="annot"><span class="annottext">Either
  (TransactionValidityError era)
  (Map
     ScriptWitnessIndex
     (Either
        ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
-&gt; ExceptT
     (TransactionValidityError era)
     IO
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (TransactionValidityError era)
   (Map
      ScriptWitnessIndex
      (Either
         ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
 -&gt; ExceptT
      (TransactionValidityError era)
      IO
      (Map
         ScriptWitnessIndex
         (Either
            ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits))))
-&gt; Either
     (TransactionValidityError era)
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
-&gt; ExceptT
     (TransactionValidityError era)
     IO
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-340"></span><span>              </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; SystemStart
-&gt; LedgerEpochInfo
-&gt; LedgerProtocolParameters era
-&gt; UTxO era
-&gt; TxBody era
-&gt; Either
     (TransactionValidityError era)
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
forall era.
CardanoEra era
-&gt; SystemStart
-&gt; LedgerEpochInfo
-&gt; LedgerProtocolParameters era
-&gt; UTxO era
-&gt; TxBody era
-&gt; Either
     (TransactionValidityError era)
     (Map
        ScriptWitnessIndex
        (Either
           ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits)))
</span><span class="hs-identifier hs-var">evaluateTransactionExecutionUnits</span></span><span>
</span><span id="line-341"></span><span>                </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span>
</span><span id="line-342"></span><span>                </span><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621682146685"><span class="hs-identifier hs-var">systemStart</span></a></span><span>
</span><span id="line-343"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EraHistory -&gt; LedgerEpochInfo
</span><span class="hs-identifier hs-var">toLedgerEpochInfo</span></span><span> </span><span class="annot"><span class="annottext">EraHistory
</span><a href="#local-6989586621682146684"><span class="hs-identifier hs-var">eraHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>                </span><span class="annot"><span class="annottext">LedgerProtocolParameters era
</span><a href="#local-6989586621682146704"><span class="hs-identifier hs-var">pparams</span></a></span><span>
</span><span id="line-345"></span><span>                </span><span class="annot"><span class="annottext">UTxO era
UTxO era
</span><a href="#local-6989586621682146683"><span class="hs-identifier hs-var">txEraUtxo</span></a></span><span>
</span><span id="line-346"></span><span>                </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682146696"><span class="hs-identifier hs-var">balancedTxBody</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146734"><span class="annot"><span class="annottext">mScriptWits :: [(ScriptWitnessIndex, AnyScriptWitness era)]
</span><a href="#local-6989586621682146734"><span class="hs-identifier hs-var hs-var">mScriptWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
-&gt; (ShelleyBasedEra era
    -&gt; [(ScriptWitnessIndex, AnyScriptWitness era)])
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
forall (eon :: * -&gt; *) era a.
Eon eon =&gt;
CardanoEra era -&gt; a -&gt; (eon era -&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">forEraInEon</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((ShelleyBasedEra era
  -&gt; [(ScriptWitnessIndex, AnyScriptWitness era)])
 -&gt; [(ScriptWitnessIndex, AnyScriptWitness era)])
-&gt; (ShelleyBasedEra era
    -&gt; [(ScriptWitnessIndex, AnyScriptWitness era)])
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682146736"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146736"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBodyContent BuildTx era
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
forall era.
ShelleyBasedEra era
-&gt; TxBodyContent BuildTx era
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
</span><span class="hs-identifier hs-var">collectTxBodyScriptWitnesses</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146736"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682146695"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span>        </span><span id="local-6989586621682146738"><span class="annot"><span class="annottext">[ScriptCostOutput]
</span><a href="#local-6989586621682146738"><span class="hs-identifier hs-var">scriptCostOutput</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-351"></span><span>          </span><span class="annot"><span class="annottext">(PlutusScriptCostError -&gt; TxCmdError)
-&gt; ExceptT PlutusScriptCostError IO [ScriptCostOutput]
-&gt; ExceptT TxCmdError IO [ScriptCostOutput]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptCostError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdPlutusScriptCostErr"><span class="hs-identifier hs-var">TxCmdPlutusScriptCostErr</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT PlutusScriptCostError IO [ScriptCostOutput]
 -&gt; ExceptT TxCmdError IO [ScriptCostOutput])
-&gt; ExceptT PlutusScriptCostError IO [ScriptCostOutput]
-&gt; ExceptT TxCmdError IO [ScriptCostOutput]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-352"></span><span>            </span><span class="annot"><span class="annottext">Either PlutusScriptCostError [ScriptCostOutput]
-&gt; ExceptT PlutusScriptCostError IO [ScriptCostOutput]
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either PlutusScriptCostError [ScriptCostOutput]
 -&gt; ExceptT PlutusScriptCostError IO [ScriptCostOutput])
-&gt; Either PlutusScriptCostError [ScriptCostOutput]
-&gt; ExceptT PlutusScriptCostError IO [ScriptCostOutput]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-353"></span><span>              </span><span class="annot"><span class="annottext">UTxO era
-&gt; Prices
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
-&gt; Map
     ScriptWitnessIndex
     (Either
        ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits))
-&gt; Either PlutusScriptCostError [ScriptCostOutput]
forall era.
UTxO era
-&gt; Prices
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
-&gt; Map
     ScriptWitnessIndex
     (Either
        ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits))
-&gt; Either PlutusScriptCostError [ScriptCostOutput]
</span><a href="Cardano.CLI.Types.Output.html#renderScriptCosts"><span class="hs-identifier hs-var">renderScriptCosts</span></a></span><span>
</span><span id="line-354"></span><span>                </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621682146683"><span class="hs-identifier hs-var">txEraUtxo</span></a></span><span>
</span><span id="line-355"></span><span>                </span><span class="annot"><span class="annottext">Prices
</span><a href="#local-6989586621682146707"><span class="hs-identifier hs-var">executionUnitPrices</span></a></span><span>
</span><span id="line-356"></span><span>                </span><span class="annot"><span class="annottext">[(ScriptWitnessIndex, AnyScriptWitness era)]
[(ScriptWitnessIndex, AnyScriptWitness era)]
</span><a href="#local-6989586621682146734"><span class="hs-identifier hs-var">mScriptWits</span></a></span><span>
</span><span id="line-357"></span><span>                </span><span class="annot"><span class="annottext">Map
  ScriptWitnessIndex
  (Either
     ScriptExecutionError (EvalTxExecutionUnitsLog, ExecutionUnits))
</span><a href="#local-6989586621682146729"><span class="hs-identifier hs-var">scriptExecUnitsMap</span></a></span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Lazy.html#writeFile"><span class="hs-identifier hs-var">LBS.writeFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">File () 'Out -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><span class="hs-identifier hs-var">unFile</span></span><span> </span><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682146699"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO ()) -&gt; ByteString -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptCostOutput] -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-pretty-0.8.10-b284cc6b9db73737627a563d667096228ece9d928bbedd02b9690e45d6764723/share/doc/html/src/Data.Aeson.Encode.Pretty.html#encodePretty"><span class="hs-identifier hs-var">encodePretty</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptCostOutput]
</span><a href="#local-6989586621682146738"><span class="hs-identifier hs-var">scriptCostOutput</span></a></span><span>
</span><span id="line-359"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#OutputTxBodyOnly"><span class="hs-identifier hs-type">OutputTxBodyOnly</span></a></span><span> </span><span id="local-6989586621682146743"><span class="annot"><span class="annottext">TxBodyFile 'Out
</span><a href="#local-6989586621682146743"><span class="hs-identifier hs-var">fpath</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146744"><span class="annot"><span class="annottext">noWitTx :: Tx era
</span><a href="#local-6989586621682146744"><span class="hs-identifier hs-var hs-var">noWitTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; TxBody era -&gt; Tx era
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><span class="hs-identifier hs-var">makeSignedTransaction</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682146696"><span class="hs-identifier hs-var">balancedTxBody</span></a></span><span>
</span><span id="line-361"></span><span>        </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; (CardanoEraConstraints era =&gt; IO (Either (FileError ()) ()))
-&gt; IO (Either (FileError ()) ())
forall era a.
CardanoEra era -&gt; (CardanoEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">cardanoEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682146537"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="annot"><span class="annottext">((CardanoEraConstraints era =&gt; IO (Either (FileError ()) ()))
 -&gt; IO (Either (FileError ()) ()))
-&gt; (CardanoEraConstraints era =&gt; IO (Either (FileError ()) ()))
-&gt; IO (Either (FileError ()) ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBodyFile 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
forall era content.
ShelleyBasedEra era
-&gt; File content 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146535"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyFile 'Out
</span><a href="#local-6989586621682146743"><span class="hs-identifier hs-var">fpath</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682146744"><span class="hs-identifier hs-var">noWitTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>          </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; (ExceptT TxCmdError IO (Either (FileError ()) ())
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FileError () -&gt; TxCmdError)
-&gt; FileError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildEstimateCmd"><span class="hs-identifier hs-type">runTransactionBuildEstimateCmd</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682145302"><span class="annot"><a href="#local-6989586621682145302"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-366"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildEstimateCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionBuildEstimateCmdArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145302"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span id="runTransactionBuildEstimateCmd"><span class="annot"><span class="annottext">runTransactionBuildEstimateCmd :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildEstimateCmd"><span class="hs-identifier hs-var hs-var">runTransactionBuildEstimateCmd</span></a></span></span><span> </span><span class="hs-comment">-- TODO change type</span><span>
</span><span id="line-369"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildEstimateCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionBuildEstimateCmdArgs</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682146837"><span class="annot"><span class="annottext">Era era
currentEra :: Era era
currentEra :: forall era. TransactionBuildEstimateCmdArgs era -&gt; Era era
</span><a href="#local-6989586621682146837"><span class="hs-identifier hs-var hs-var">currentEra</span></a></span></span><span>
</span><span id="line-371"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146839"><span class="annot"><span class="annottext">Maybe ScriptValidity
mScriptValidity :: Maybe ScriptValidity
mScriptValidity :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; Maybe ScriptValidity
</span><a href="#local-6989586621682146839"><span class="hs-identifier hs-var hs-var">mScriptValidity</span></a></span></span><span>
</span><span id="line-372"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146841"><span class="annot"><span class="annottext">Int
shelleyWitnesses :: Int
shelleyWitnesses :: forall era. TransactionBuildEstimateCmdArgs era -&gt; Int
</span><a href="#local-6989586621682146841"><span class="hs-identifier hs-var hs-var">shelleyWitnesses</span></a></span></span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146843"><span class="annot"><span class="annottext">Maybe Int
mByronWitnesses :: Maybe Int
mByronWitnesses :: forall era. TransactionBuildEstimateCmdArgs era -&gt; Maybe Int
</span><a href="#local-6989586621682146843"><span class="hs-identifier hs-var hs-var">mByronWitnesses</span></a></span></span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146845"><span class="annot"><span class="annottext">ProtocolParamsFile
protocolParamsFile :: ProtocolParamsFile
protocolParamsFile :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; ProtocolParamsFile
</span><a href="#local-6989586621682146845"><span class="hs-identifier hs-var hs-var">protocolParamsFile</span></a></span></span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146847"><span class="annot"><span class="annottext">Value
totalUTxOValue :: Value
totalUTxOValue :: forall era. TransactionBuildEstimateCmdArgs era -&gt; Value
</span><a href="#local-6989586621682146847"><span class="hs-identifier hs-var hs-var">totalUTxOValue</span></a></span></span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146849"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
txins :: [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
txins :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
</span><a href="#local-6989586621682146849"><span class="hs-identifier hs-var hs-var">txins</span></a></span></span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">readOnlyReferenceInputs :: forall era. TransactionBuildEstimateCmdArgs era -&gt; [TxIn]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#readOnlyReferenceInputs"><span class="hs-identifier hs-var">readOnlyReferenceInputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146852"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146852"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span></span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">requiredSigners :: forall era. TransactionBuildEstimateCmdArgs era -&gt; [RequiredSigner]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#requiredSigners"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146854"><span class="annot"><span class="annottext">[RequiredSigner]
</span><a href="#local-6989586621682146854"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txinsc :: forall era. TransactionBuildEstimateCmdArgs era -&gt; [TxIn]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txinsc"><span class="hs-identifier hs-var">txinsc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146856"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146856"><span class="hs-identifier hs-var">txInsCollateral</span></a></span></span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mReturnCollateral :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; Maybe TxOutShelleyBasedEra
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#mReturnCollateral"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682146858"><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
</span><a href="#local-6989586621682146858"><span class="hs-identifier hs-var">mReturnColl</span></a></span></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146859"><span class="annot"><span class="annottext">[TxOutAnyEra]
txouts :: [TxOutAnyEra]
txouts :: forall era. TransactionBuildEstimateCmdArgs era -&gt; [TxOutAnyEra]
</span><a href="#local-6989586621682146859"><span class="hs-identifier hs-var hs-var">txouts</span></a></span></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">changeAddress :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; TxOutChangeAddress
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#changeAddress"><span class="hs-identifier hs-var">changeAddress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutChangeAddress"><span class="hs-identifier hs-type">TxOutChangeAddress</span></a></span><span> </span><span id="local-6989586621682146863"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682146863"><span class="hs-identifier hs-var">changeAddr</span></a></span></span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146864"><span class="annot"><span class="annottext">Maybe (Value, [CliMintScriptRequirements])
mValue :: Maybe (Value, [CliMintScriptRequirements])
mValue :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; Maybe (Value, [CliMintScriptRequirements])
</span><a href="#local-6989586621682146864"><span class="hs-identifier hs-var hs-var">mValue</span></a></span></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146866"><span class="annot"><span class="annottext">Maybe SlotNo
mValidityLowerBound :: Maybe SlotNo
mValidityLowerBound :: forall era. TransactionBuildEstimateCmdArgs era -&gt; Maybe SlotNo
</span><a href="#local-6989586621682146866"><span class="hs-identifier hs-var hs-var">mValidityLowerBound</span></a></span></span><span>
</span><span id="line-385"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146868"><span class="annot"><span class="annottext">TxValidityUpperBound era
mValidityUpperBound :: TxValidityUpperBound era
mValidityUpperBound :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; TxValidityUpperBound era
</span><a href="#local-6989586621682146868"><span class="hs-identifier hs-var hs-var">mValidityUpperBound</span></a></span></span><span>
</span><span id="line-386"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146870"><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
certificates :: [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
certificates :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146870"><span class="hs-identifier hs-var hs-var">certificates</span></a></span></span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146872"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
withdrawals :: [(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
withdrawals :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146872"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146874"><span class="annot"><span class="annottext">TxMetadataJsonSchema
metadataSchema :: TxMetadataJsonSchema
metadataSchema :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; TxMetadataJsonSchema
</span><a href="#local-6989586621682146874"><span class="hs-identifier hs-var hs-var">metadataSchema</span></a></span></span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146876"><span class="annot"><span class="annottext">[ScriptFile]
scriptFiles :: [ScriptFile]
scriptFiles :: forall era. TransactionBuildEstimateCmdArgs era -&gt; [ScriptFile]
</span><a href="#local-6989586621682146876"><span class="hs-identifier hs-var hs-var">scriptFiles</span></a></span></span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146878"><span class="annot"><span class="annottext">[MetadataFile]
metadataFiles :: [MetadataFile]
metadataFiles :: forall era. TransactionBuildEstimateCmdArgs era -&gt; [MetadataFile]
</span><a href="#local-6989586621682146878"><span class="hs-identifier hs-var hs-var">metadataFiles</span></a></span></span><span>
</span><span id="line-391"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146880"><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
mUpdateProposalFile :: Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
mUpdateProposalFile :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; Maybe
     (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><a href="#local-6989586621682146880"><span class="hs-identifier hs-var hs-var">mUpdateProposalFile</span></a></span></span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146882"><span class="annot"><span class="annottext">[(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
voteFiles :: [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
voteFiles :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146882"><span class="hs-identifier hs-var hs-var">voteFiles</span></a></span></span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146884"><span class="annot"><span class="annottext">[(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
proposalFiles :: [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
proposalFiles :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146884"><span class="hs-identifier hs-var hs-var">proposalFiles</span></a></span></span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146886"><span class="annot"><span class="annottext">Maybe Lovelace
plutusCollateral :: Maybe Lovelace
plutusCollateral :: forall era. TransactionBuildEstimateCmdArgs era -&gt; Maybe Lovelace
</span><a href="#local-6989586621682146886"><span class="hs-identifier hs-var hs-var">plutusCollateral</span></a></span></span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146888"><span class="annot"><span class="annottext">Maybe ReferenceScriptSize
totalReferenceScriptSize :: Maybe ReferenceScriptSize
totalReferenceScriptSize :: forall era.
TransactionBuildEstimateCmdArgs era -&gt; Maybe ReferenceScriptSize
</span><a href="#local-6989586621682146888"><span class="hs-identifier hs-var hs-var">totalReferenceScriptSize</span></a></span></span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146890"><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
currentTreasuryValueAndDonation :: Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
currentTreasuryValueAndDonation :: forall era.
TransactionBuildEstimateCmdArgs era
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682146890"><span class="hs-identifier hs-var hs-var">currentTreasuryValueAndDonation</span></a></span></span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146892"><span class="annot"><span class="annottext">TxBodyFile 'Out
txBodyOutFile :: TxBodyFile 'Out
txBodyOutFile :: forall era. TransactionBuildEstimateCmdArgs era -&gt; TxBodyFile 'Out
</span><a href="#local-6989586621682146892"><span class="hs-identifier hs-var hs-var">txBodyOutFile</span></a></span></span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146894"><span class="annot"><span class="annottext">sbe :: ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Era era -&gt; ShelleyBasedEra era
forall era. Era era -&gt; ShelleyBasedEra era
forall a (f :: a -&gt; *) (g :: a -&gt; *) (era :: a).
Convert f g =&gt;
f era -&gt; g era
</span><span class="hs-identifier hs-var">convert</span></span><span> </span><span class="annot"><span class="annottext">Era era
</span><a href="#local-6989586621682146837"><span class="hs-identifier hs-var">currentEra</span></a></span><span>
</span><span id="line-400"></span><span>        </span><span id="local-6989586621682146895"><span class="annot"><span class="annottext">meo :: MaryEraOnwards era
</span><a href="#local-6989586621682146895"><span class="hs-identifier hs-var hs-var">meo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era -&gt; MaryEraOnwards era
forall era. BabbageEraOnwards era -&gt; MaryEraOnwards era
forall a (f :: a -&gt; *) (g :: a -&gt; *) (era :: a).
Convert f g =&gt;
f era -&gt; g era
</span><span class="hs-identifier hs-var">convert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Era era -&gt; BabbageEraOnwards era
forall era. Era era -&gt; BabbageEraOnwards era
forall a (f :: a -&gt; *) (g :: a -&gt; *) (era :: a).
Convert f g =&gt;
f era -&gt; g era
</span><span class="hs-identifier hs-var">convert</span></span><span> </span><span class="annot"><span class="annottext">Era era
</span><a href="#local-6989586621682146837"><span class="hs-identifier hs-var">currentEra</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BabbageEraOnwards</span></span><span> </span><span class="annot"><a href="#local-6989586621682145302"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>    </span><span id="local-6989586621682146896"><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146896"><span class="hs-identifier hs-var">ledgerPParams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-403"></span><span>      </span><span class="annot"><span class="annottext">(ProtocolParamsError -&gt; TxCmdError)
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
-&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era))
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProtocolParamsError"><span class="hs-identifier hs-var">TxCmdProtocolParamsError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
 -&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era)))
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
-&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
forall era.
ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
</span><a href="Cardano.CLI.EraBased.Run.Genesis.Common.html#readProtocolParameters"><span class="hs-identifier hs-var">readProtocolParameters</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsFile
</span><a href="#local-6989586621682146845"><span class="hs-identifier hs-var">protocolParamsFile</span></a></span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621682146898"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682146898"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-405"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; ExceptT
     TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
 -&gt; ExceptT
      TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; ExceptT
     TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall era a ctx.
ShelleyBasedEra era
-&gt; [(a, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFiles"><span class="hs-identifier hs-var">readScriptWitnessFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
</span><a href="#local-6989586621682146849"><span class="hs-identifier hs-var">txins</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621682146899"><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146899"><span class="hs-identifier hs-var">certFilesAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-408"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-409"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall era a ctx.
ShelleyBasedEra era
-&gt; [(a, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFiles"><span class="hs-identifier hs-var">readScriptWitnessFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146870"><span class="hs-identifier hs-var">certificates</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>    </span><span id="local-6989586621682146900"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146900"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-412"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-413"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall era a b ctx.
ShelleyBasedEra era
-&gt; [(a, b, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, b, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFilesTuple"><span class="hs-identifier hs-var">readScriptWitnessFilesTuple</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146872"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-414"></span><span>    </span><span id="local-6989586621682146901"><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682146901"><span class="hs-identifier hs-var">txMetadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-415"></span><span>      </span><span class="annot"><span class="annottext">(MetadataError -&gt; TxCmdError)
-&gt; ExceptT MetadataError IO (TxMetadataInEra era)
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdMetadataError"><span class="hs-identifier hs-var">TxCmdMetadataError</span></a></span><span>
</span><span id="line-416"></span><span>        </span><span class="annot"><span class="annottext">(ExceptT MetadataError IO (TxMetadataInEra era)
 -&gt; ExceptT TxCmdError IO (TxMetadataInEra era))
-&gt; (IO (Either MetadataError (TxMetadataInEra era))
    -&gt; ExceptT MetadataError IO (TxMetadataInEra era))
-&gt; IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT MetadataError IO (TxMetadataInEra era)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span>
</span><span id="line-417"></span><span>        </span><span class="annot"><span class="annottext">(IO (Either MetadataError (TxMetadataInEra era))
 -&gt; ExceptT TxCmdError IO (TxMetadataInEra era))
-&gt; IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxMetadataJsonSchema
-&gt; [MetadataFile]
-&gt; IO (Either MetadataError (TxMetadataInEra era))
forall era.
ShelleyBasedEra era
-&gt; TxMetadataJsonSchema
-&gt; [MetadataFile]
-&gt; IO (Either MetadataError (TxMetadataInEra era))
</span><a href="Cardano.CLI.Read.html#readTxMetadata"><span class="hs-identifier hs-var">readTxMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxMetadataJsonSchema
</span><a href="#local-6989586621682146874"><span class="hs-identifier hs-var">metadataSchema</span></a></span><span> </span><span class="annot"><span class="annottext">[MetadataFile]
</span><a href="#local-6989586621682146878"><span class="hs-identifier hs-var">metadataFiles</span></a></span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146902"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682146902"><span class="hs-identifier hs-var">mas</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146903"><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682146903"><span class="hs-identifier hs-var">sWitFiles</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Value, [CliMintScriptRequirements])
-&gt; Maybe (Value, [CliMintScriptRequirements])
-&gt; (Value, [CliMintScriptRequirements])
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Value, [CliMintScriptRequirements])
</span><a href="#local-6989586621682146864"><span class="hs-identifier hs-var">mValue</span></a></span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621682146904"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682146904"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-421"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682146902"><span class="hs-identifier hs-var">mas</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; (Value, [MintScriptWitnessWithPolicyId era]))
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT
     TxCmdError IO (Value, [MintScriptWitnessWithPolicyId era])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError CliScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError CliScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdCliScriptWitnessError"><span class="hs-identifier hs-var">TxCmdCliScriptWitnessError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CliMintScriptRequirements
 -&gt; ExceptT
      (FileError CliScriptWitnessError)
      IO
      (MintScriptWitnessWithPolicyId era))
-&gt; [CliMintScriptRequirements]
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     (MintScriptWitnessWithPolicyId era)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) era.
MonadIOTransError (FileError CliScriptWitnessError) t m =&gt;
ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; t m (MintScriptWitnessWithPolicyId era)
</span><a href="Cardano.CLI.EraBased.Script.Mint.Read.html#readMintScriptWitness"><span class="hs-identifier hs-var">readMintScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682146903"><span class="hs-identifier hs-var">sWitFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span>    </span><span id="local-6989586621682146905"><span class="annot"><span class="annottext">[ScriptInAnyLang]
</span><a href="#local-6989586621682146905"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-424"></span><span>      </span><span class="annot"><span class="annottext">(FileError ScriptDecodeError -&gt; TxCmdError)
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
-&gt; ExceptT TxCmdError IO [ScriptInAnyLang]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError ScriptDecodeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptFileError"><span class="hs-identifier hs-var">TxCmdScriptFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
 -&gt; ExceptT TxCmdError IO [ScriptInAnyLang])
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
-&gt; ExceptT TxCmdError IO [ScriptInAnyLang]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-425"></span><span>        </span><span class="annot"><span class="annottext">(ScriptFile
 -&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang)
-&gt; [ScriptFile]
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *).
MonadIOTransError (FileError ScriptDecodeError) t m =&gt;
FilePath -&gt; t m ScriptInAnyLang
</span><a href="Cardano.CLI.Read.html#readFileScriptInAnyLang"><span class="hs-identifier hs-var">readFileScriptInAnyLang</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath
 -&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang)
-&gt; (ScriptFile -&gt; FilePath)
-&gt; ScriptFile
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptFile -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><span class="hs-identifier hs-var">unFile</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ScriptFile]
</span><a href="#local-6989586621682146876"><span class="hs-identifier hs-var">scriptFiles</span></a></span><span>
</span><span id="line-426"></span><span>    </span><span id="local-6989586621682146906"><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682146906"><span class="hs-identifier hs-var">txAuxScripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-427"></span><span>      </span><span class="annot"><span class="annottext">Either TxCmdError (TxAuxScripts era)
-&gt; ExceptT TxCmdError IO (TxAuxScripts era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxAuxScripts era)
 -&gt; ExceptT TxCmdError IO (TxAuxScripts era))
-&gt; Either TxCmdError (TxAuxScripts era)
-&gt; ExceptT TxCmdError IO (TxAuxScripts era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TxAuxScriptsValidationError -&gt; TxCmdError)
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
-&gt; Either TxCmdError (TxAuxScripts era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxScriptsValidationError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdAuxScriptsValidationError"><span class="hs-identifier hs-var">TxCmdAuxScriptsValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxAuxScriptsValidationError (TxAuxScripts era)
 -&gt; Either TxCmdError (TxAuxScripts era))
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
-&gt; Either TxCmdError (TxAuxScripts era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [ScriptInAnyLang]
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
forall era.
ShelleyBasedEra era
-&gt; [ScriptInAnyLang]
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxAuxScripts"><span class="hs-identifier hs-var">validateTxAuxScripts</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptInAnyLang]
</span><a href="#local-6989586621682146905"><span class="hs-identifier hs-var">scripts</span></a></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span>    </span><span id="local-6989586621682146907"><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682146907"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><a href="#local-6989586621682146880"><span class="hs-identifier hs-var">mUpdateProposalFile</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-430"></span><span>      </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Featured</span></span><span> </span><span id="local-6989586621682146908"><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682146908"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682146909"><span class="annot"><span class="annottext">UpdateProposalFile
</span><a href="#local-6989586621682146909"><span class="hs-identifier hs-var">updateProposalFile</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-431"></span><span>        </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
-&gt; UpdateProposalFile
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
forall era.
ShelleyToBabbageEra era
-&gt; UpdateProposalFile
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
</span><a href="Cardano.CLI.Read.html#readTxUpdateProposal"><span class="hs-identifier hs-var">readTxUpdateProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682146908"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateProposalFile
</span><a href="#local-6989586621682146909"><span class="hs-identifier hs-var">updateProposalFile</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
-&gt; (ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
    -&gt; ExceptT TxCmdError IO (TxUpdateProposal era))
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeError -&gt; TxCmdError)
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadTextViewFileError"><span class="hs-identifier hs-var">TxCmdReadTextViewFileError</span></a></span><span>
</span><span id="line-432"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
forall era. TxUpdateProposal era
</span><span class="hs-identifier hs-var">TxUpdateProposalNone</span></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span>    </span><span id="local-6989586621682146910"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682146910"><span class="hs-identifier hs-var">requiredSigners</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-435"></span><span>      </span><span class="annot"><span class="annottext">(RequiredSigner -&gt; ExceptT TxCmdError IO (Hash PaymentKey))
-&gt; [RequiredSigner] -&gt; ExceptT TxCmdError IO [Hash PaymentKey]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RequiredSignerError -&gt; TxCmdError)
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
-&gt; ExceptT TxCmdError IO (Hash PaymentKey)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">RequiredSignerError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdRequiredSignerError"><span class="hs-identifier hs-var">TxCmdRequiredSignerError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT RequiredSignerError IO (Hash PaymentKey)
 -&gt; ExceptT TxCmdError IO (Hash PaymentKey))
-&gt; (RequiredSigner
    -&gt; ExceptT RequiredSignerError IO (Hash PaymentKey))
-&gt; RequiredSigner
-&gt; ExceptT TxCmdError IO (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either RequiredSignerError (Hash PaymentKey))
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either RequiredSignerError (Hash PaymentKey))
 -&gt; ExceptT RequiredSignerError IO (Hash PaymentKey))
-&gt; (RequiredSigner
    -&gt; IO (Either RequiredSignerError (Hash PaymentKey)))
-&gt; RequiredSigner
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RequiredSigner -&gt; IO (Either RequiredSignerError (Hash PaymentKey))
</span><a href="Cardano.CLI.Read.html#readRequiredSigner"><span class="hs-identifier hs-var">readRequiredSigner</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RequiredSigner]
</span><a href="#local-6989586621682146854"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621682146911"><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682146911"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; Maybe TxOutShelleyBasedEra
-&gt; ExceptT TxCmdError IO (Maybe (TxOut CtxTx era))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Maybe a -&gt; m (Maybe b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInShelleyBasedEra"><span class="hs-identifier hs-var">toTxOutInShelleyBasedEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
</span><a href="#local-6989586621682146858"><span class="hs-identifier hs-var">mReturnColl</span></a></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span>    </span><span id="local-6989586621682146912"><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682146912"><span class="hs-identifier hs-var">txOuts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; [TxOutAnyEra] -&gt; ExceptT TxCmdError IO [TxOut CtxTx era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInAnyEra"><span class="hs-identifier hs-var">toTxOutInAnyEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOutAnyEra]
</span><a href="#local-6989586621682146859"><span class="hs-identifier hs-var">txouts</span></a></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-comment">-- the same collateral input can be used for several plutus scripts</span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146913"><span class="annot"><span class="annottext">filteredTxinsc :: [TxIn]
</span><a href="#local-6989586621682146913"><span class="hs-identifier hs-var hs-var">filteredTxinsc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; [TxIn]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Containers.ListUtils.html#nubOrd"><span class="hs-identifier hs-var">nubOrd</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146856"><span class="hs-identifier hs-var">txInsCollateral</span></a></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-comment">-- Conway related</span><span>
</span><span id="line-445"></span><span>    </span><span id="local-6989586621682146914"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146914"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-446"></span><span>      </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; (ConwayEraOnwards era
    -&gt; ExceptT
         TxCmdError
         IO
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ShelleyBasedEra era
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall (eon :: * -&gt; *) a era.
Eon eon =&gt;
a -&gt; (eon era -&gt; a) -&gt; ShelleyBasedEra era -&gt; a
</span><span class="hs-identifier hs-var">inEonForShelleyBasedEra</span></span><span>
</span><span id="line-447"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682146916"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146916"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-449"></span><span>            </span><span class="annot"><span class="annottext">(VoteError -&gt; TxCmdError)
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">VoteError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdVoteError"><span class="hs-identifier hs-var">TxCmdVoteError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   VoteError
   IO
   [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
    -&gt; ExceptT
         VoteError
         IO
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO
  (Either
     VoteError
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-var">ExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO
   (Either
      VoteError
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
 -&gt; ExceptT
      TxCmdError
      IO
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-450"></span><span>              </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall era a.
ConwayEraOnwards era -&gt; (ConwayEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">conwayEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146916"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwardsConstraints era =&gt;
  IO
    (Either
       VoteError
       [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
 -&gt; IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-451"></span><span>                </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall era.
ConwayEraOnwards era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
</span><a href="Cardano.CLI.Read.html#readVotingProceduresFiles"><span class="hs-identifier hs-var">readVotingProceduresFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146916"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">[(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146882"><span class="hs-identifier hs-var">voteFiles</span></a></span><span>
</span><span id="line-452"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span>    </span><span id="local-6989586621682146919"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146919"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-456"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     ProposalError
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
forall era.
ShelleyBasedEra era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
</span><a href="Cardano.CLI.Read.html#readTxGovernanceActions"><span class="hs-identifier hs-var">readTxGovernanceActions</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682146884"><span class="hs-identifier hs-var">proposalFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     ProposalError
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         ProposalError
         [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
    -&gt; ExceptT
         TxCmdError
         IO
         [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposalError
 -&gt; ExceptT
      TxCmdError
      IO
      [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (ProposalError -&gt; TxCmdError)
-&gt; ProposalError
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProposalError"><span class="hs-identifier hs-var">TxCmdProposalError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span>    </span><span id="local-6989586621682146920"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146920"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-460"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ShelleyBasedEraConstraints era =&gt;
    ExceptT
      TxCmdError
      IO
      [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall era a.
ShelleyBasedEra era -&gt; (ShelleyBasedEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyBasedEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyBasedEraConstraints era =&gt;
  ExceptT
    TxCmdError
    IO
    [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
 -&gt; ExceptT
      TxCmdError
      IO
      [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (ShelleyBasedEraConstraints era =&gt;
    ExceptT
      TxCmdError
      IO
      [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-461"></span><span>        </span><span class="annot"><span class="annottext">[ExceptT
   TxCmdError
   IO
   (Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a></span><span>
</span><span id="line-462"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(Certificate era
 -&gt; (Certificate era, Maybe (ScriptWitness WitCtxStake era)))
-&gt; ExceptT TxCmdError IO (Certificate era)
-&gt; ExceptT
     TxCmdError
     IO
     (Certificate era, Maybe (ScriptWitness WitCtxStake era))
forall a b.
(a -&gt; b) -&gt; ExceptT TxCmdError IO a -&gt; ExceptT TxCmdError IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span>
</span><span id="line-463"></span><span>              </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682146928"><span class="hs-identifier hs-var">mSwit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeError -&gt; TxCmdError)
-&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era)
-&gt; ExceptT TxCmdError IO (Certificate era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadTextViewFileError"><span class="hs-identifier hs-var">TxCmdReadTextViewFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeError) IO (Certificate era)
 -&gt; ExceptT TxCmdError IO (Certificate era))
-&gt; (IO (Either (FileError TextEnvelopeError) (Certificate era))
    -&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT TxCmdError IO (Certificate era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeError) (Certificate era))
 -&gt; ExceptT TxCmdError IO (Certificate era))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT TxCmdError IO (Certificate era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-465"></span><span>                  </span><span class="annot"><span class="annottext">AsType (Certificate era)
-&gt; File Any 'In
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
forall a content.
HasTextEnvelope a =&gt;
AsType a
-&gt; File content 'In -&gt; IO (Either (FileError TextEnvelopeError) a)
</span><span class="hs-identifier hs-var">readFileTextEnvelope</span></span><span> </span><span class="annot"><span class="annottext">AsType (Certificate era)
forall era. AsType (Certificate era)
</span><span class="hs-identifier hs-var">AsCertificate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; File Any 'In
forall content (direction :: FileDirection).
FilePath -&gt; File content direction
</span><span class="hs-identifier hs-var">File</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682146929"><span class="hs-identifier hs-var">certFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#CertificateFile"><span class="hs-identifier hs-type">CertificateFile</span></a></span><span> </span><span id="local-6989586621682146929"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682146929"><span class="hs-identifier hs-var">certFile</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682146928"><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682146928"><span class="hs-identifier hs-var">mSwit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146899"><span class="hs-identifier hs-var">certFilesAndMaybeScriptWits</span></a></span><span>
</span><span id="line-468"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span>    </span><span id="local-6989586621682146930"><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682146930"><span class="hs-identifier hs-var">txBodyContent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-471"></span><span>      </span><span class="annot"><span class="annottext">Either TxCmdError (TxBodyContent BuildTx era)
-&gt; ExceptT TxCmdError IO (TxBodyContent BuildTx era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxBodyContent BuildTx era)
 -&gt; ExceptT TxCmdError IO (TxBodyContent BuildTx era))
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
-&gt; ExceptT TxCmdError IO (TxBodyContent BuildTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-472"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#constructTxBodyContent"><span class="hs-identifier hs-var">constructTxBodyContent</span></a></span><span>
</span><span id="line-473"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-474"></span><span>          </span><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682146839"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span>
</span><span id="line-475"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
-&gt; Maybe (PParams (ShelleyLedgerEra era))
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146896"><span class="hs-identifier hs-var">ledgerPParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span>          </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682146898"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-477"></span><span>          </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146852"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-478"></span><span>          </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682146913"><span class="hs-identifier hs-var">filteredTxinsc</span></a></span><span>
</span><span id="line-479"></span><span>          </span><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682146911"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span>
</span><span id="line-480"></span><span>          </span><span class="annot"><span class="annottext">Maybe Lovelace
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-comment">-- TODO: Remove total collateral parameter from estimateBalancedTxBody</span><span>
</span><span id="line-481"></span><span>          </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682146912"><span class="hs-identifier hs-var">txOuts</span></a></span><span>
</span><span id="line-482"></span><span>          </span><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682146866"><span class="hs-identifier hs-var">mValidityLowerBound</span></a></span><span>
</span><span id="line-483"></span><span>          </span><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682146868"><span class="hs-identifier hs-var">mValidityUpperBound</span></a></span><span>
</span><span id="line-484"></span><span>          </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682146904"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span>
</span><span id="line-485"></span><span>          </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146920"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-486"></span><span>          </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146900"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-487"></span><span>          </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682146910"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span>
</span><span id="line-488"></span><span>          </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-number">0</span></span><span>
</span><span id="line-489"></span><span>          </span><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682146906"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span>
</span><span id="line-490"></span><span>          </span><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682146901"><span class="hs-identifier hs-var">txMetadata</span></a></span><span>
</span><span id="line-491"></span><span>          </span><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682146907"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span><span>
</span><span id="line-492"></span><span>          </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146914"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span><span>
</span><span id="line-493"></span><span>          </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146919"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-494"></span><span>          </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682146890"><span class="hs-identifier hs-var">currentTreasuryValueAndDonation</span></a></span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146932"><span class="annot"><span class="annottext">stakeCredentialsToDeregisterMap :: Map StakeCredential Lovelace
</span><a href="#local-6989586621682146932"><span class="hs-identifier hs-var hs-var">stakeCredentialsToDeregisterMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Item (Map StakeCredential Lovelace)]
-&gt; Map StakeCredential Lovelace
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Item (Map StakeCredential Lovelace)]
 -&gt; Map StakeCredential Lovelace)
-&gt; [Item (Map StakeCredential Lovelace)]
-&gt; Map StakeCredential Lovelace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (StakeCredential, Lovelace)]
-&gt; [(StakeCredential, Lovelace)]
forall a. [Maybe a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Certificate era -&gt; Maybe (StakeCredential, Lovelace)
forall era. Certificate era -&gt; Maybe (StakeCredential, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getStakeDeregistrationInfo"><span class="hs-identifier hs-var">getStakeDeregistrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682146934"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146934"><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682146934"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146920"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-496"></span><span>        </span><span id="local-6989586621682146935"><span class="annot"><span class="annottext">drepsToDeregisterMap :: Map (Credential 'DRepRole StandardCrypto) Lovelace
</span><a href="#local-6989586621682146935"><span class="hs-identifier hs-var hs-var">drepsToDeregisterMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Item (Map (Credential 'DRepRole StandardCrypto) Lovelace)]
-&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Item (Map (Credential 'DRepRole StandardCrypto) Lovelace)]
 -&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace)
-&gt; [Item (Map (Credential 'DRepRole StandardCrypto) Lovelace)]
-&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (Credential 'DRepRole StandardCrypto, Lovelace)]
-&gt; [(Credential 'DRepRole StandardCrypto, Lovelace)]
forall a. [Maybe a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Certificate era
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
forall era.
Certificate era
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getDRepDeregistrationInfo"><span class="hs-identifier hs-var">getDRepDeregistrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682146937"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146937"><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682146937"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146920"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-497"></span><span>        </span><span id="local-6989586621682146938"><span class="annot"><span class="annottext">poolsToDeregister :: Set PoolId
</span><a href="#local-6989586621682146938"><span class="hs-identifier hs-var hs-var">poolsToDeregister</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Item (Set PoolId)] -&gt; Set PoolId
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Item (Set PoolId)] -&gt; Set PoolId)
-&gt; [Item (Set PoolId)] -&gt; Set PoolId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe PoolId] -&gt; [PoolId]
forall a. [Maybe a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Certificate era -&gt; Maybe PoolId
forall era. Certificate era -&gt; Maybe PoolId
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getPoolDeregistrationInfo"><span class="hs-identifier hs-var">getPoolDeregistrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682146940"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146940"><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682146940"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682146920"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-498"></span><span>        </span><span id="local-6989586621682146941"><span class="annot"><span class="annottext">totCol :: Lovelace
</span><a href="#local-6989586621682146941"><span class="hs-identifier hs-var hs-var">totCol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Maybe Lovelace -&gt; Lovelace
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682146886"><span class="hs-identifier hs-var">plutusCollateral</span></a></span><span>
</span><span id="line-499"></span><span>        </span><span id="local-6989586621682146942"><span class="annot"><span class="annottext">pScriptExecUnits :: Map ScriptWitnessIndex ExecutionUnits
</span><a href="#local-6989586621682146942"><span class="hs-identifier hs-var hs-var">pScriptExecUnits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-500"></span><span>          </span><span class="annot"><span class="annottext">[Item (Map ScriptWitnessIndex ExecutionUnits)]
-&gt; Map ScriptWitnessIndex ExecutionUnits
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span>
</span><span id="line-501"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><a href="#local-6989586621682146943"><span class="hs-identifier hs-var">sWitIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="#local-6989586621682146944"><span class="hs-identifier hs-var">execUnits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682146943"><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><a href="#local-6989586621682146943"><span class="hs-identifier hs-var">sWitIndex</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyScriptWitness</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra lang era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptOrReferenceInput lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptDatum witctx
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682146944"><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="#local-6989586621682146944"><span class="hs-identifier hs-var">execUnits</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-503"></span><span>                </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBodyContent BuildTx era
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
forall era.
ShelleyBasedEra era
-&gt; TxBodyContent BuildTx era
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
</span><span class="hs-identifier hs-var">collectTxBodyScriptWitnesses</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682146930"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span>
</span><span id="line-504"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">BalancedTxBody</span></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682146948"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682146948"><span class="hs-identifier hs-var">balancedTxBody</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-507"></span><span>      </span><span class="annot"><span class="annottext">Either TxCmdError (BalancedTxBody era)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (BalancedTxBody era)
 -&gt; ExceptT TxCmdError IO (BalancedTxBody era))
-&gt; Either TxCmdError (BalancedTxBody era)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-508"></span><span>        </span><span class="annot"><span class="annottext">(TxFeeEstimationError era -&gt; TxCmdError)
-&gt; Either (TxFeeEstimationError era) (BalancedTxBody era)
-&gt; Either TxCmdError (BalancedTxBody era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxFeeEstimationError era -&gt; TxCmdError
forall era. TxFeeEstimationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdFeeEstimationError"><span class="hs-identifier hs-var">TxCmdFeeEstimationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (TxFeeEstimationError era) (BalancedTxBody era)
 -&gt; Either TxCmdError (BalancedTxBody era))
-&gt; Either (TxFeeEstimationError era) (BalancedTxBody era)
-&gt; Either TxCmdError (BalancedTxBody era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-509"></span><span>          </span><span class="annot"><span class="annottext">MaryEraOnwards era
-&gt; TxBodyContent BuildTx era
-&gt; PParams (ShelleyLedgerEra era)
-&gt; Set PoolId
-&gt; Map StakeCredential Lovelace
-&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace
-&gt; Map ScriptWitnessIndex ExecutionUnits
-&gt; Lovelace
-&gt; Int
-&gt; Int
-&gt; Int
-&gt; AddressInEra era
-&gt; Value
-&gt; Either (TxFeeEstimationError era) (BalancedTxBody era)
forall era.
MaryEraOnwards era
-&gt; TxBodyContent BuildTx era
-&gt; PParams (ShelleyLedgerEra era)
-&gt; Set PoolId
-&gt; Map StakeCredential Lovelace
-&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace
-&gt; Map ScriptWitnessIndex ExecutionUnits
-&gt; Lovelace
-&gt; Int
-&gt; Int
-&gt; Int
-&gt; AddressInEra era
-&gt; Value
-&gt; Either (TxFeeEstimationError era) (BalancedTxBody era)
</span><span class="hs-identifier hs-var">estimateBalancedTxBody</span></span><span>
</span><span id="line-510"></span><span>            </span><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682146895"><span class="hs-identifier hs-var">meo</span></a></span><span>
</span><span id="line-511"></span><span>            </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682146930"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span>
</span><span id="line-512"></span><span>            </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146896"><span class="hs-identifier hs-var">ledgerPParams</span></a></span><span>
</span><span id="line-513"></span><span>            </span><span class="annot"><span class="annottext">Set PoolId
</span><a href="#local-6989586621682146938"><span class="hs-identifier hs-var">poolsToDeregister</span></a></span><span>
</span><span id="line-514"></span><span>            </span><span class="annot"><span class="annottext">Map StakeCredential Lovelace
</span><a href="#local-6989586621682146932"><span class="hs-identifier hs-var">stakeCredentialsToDeregisterMap</span></a></span><span>
</span><span id="line-515"></span><span>            </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole StandardCrypto) Lovelace
</span><a href="#local-6989586621682146935"><span class="hs-identifier hs-var">drepsToDeregisterMap</span></a></span><span>
</span><span id="line-516"></span><span>            </span><span class="annot"><span class="annottext">Map ScriptWitnessIndex ExecutionUnits
</span><a href="#local-6989586621682146942"><span class="hs-identifier hs-var">pScriptExecUnits</span></a></span><span>
</span><span id="line-517"></span><span>            </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682146941"><span class="hs-identifier hs-var">totCol</span></a></span><span>
</span><span id="line-518"></span><span>            </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682146841"><span class="hs-identifier hs-var">shelleyWitnesses</span></a></span><span>
</span><span id="line-519"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621682146843"><span class="hs-identifier hs-var">mByronWitnesses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; (ReferenceScriptSize -&gt; Int) -&gt; Maybe ReferenceScriptSize -&gt; Int
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptSize -&gt; Int
</span><a href="Cardano.CLI.Types.Common.html#unReferenceScriptSize"><span class="hs-identifier hs-var">unReferenceScriptSize</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ReferenceScriptSize
</span><a href="#local-6989586621682146888"><span class="hs-identifier hs-var">totalReferenceScriptSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; AddressAny -&gt; AddressInEra era
forall era. ShelleyBasedEra era -&gt; AddressAny -&gt; AddressInEra era
</span><span class="hs-identifier hs-var">anyAddressInShelleyBasedEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682146863"><span class="hs-identifier hs-var">changeAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>            </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682146847"><span class="hs-identifier hs-var">totalUTxOValue</span></a></span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682146954"><span class="annot"><span class="annottext">noWitTx :: Tx era
</span><a href="#local-6989586621682146954"><span class="hs-identifier hs-var hs-var">noWitTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; TxBody era -&gt; Tx era
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><span class="hs-identifier hs-var">makeSignedTransaction</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682146948"><span class="hs-identifier hs-var">balancedTxBody</span></a></span><span>
</span><span id="line-525"></span><span>    </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span>
</span><span id="line-526"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; (CardanoEraConstraints era =&gt; IO (Either (FileError ()) ()))
-&gt; IO (Either (FileError ()) ())
forall era a.
CardanoEra era -&gt; (CardanoEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">cardanoEraConstraints</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((CardanoEraConstraints era =&gt; IO (Either (FileError ()) ()))
 -&gt; IO (Either (FileError ()) ()))
-&gt; (CardanoEraConstraints era =&gt; IO (Either (FileError ()) ()))
-&gt; IO (Either (FileError ()) ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-527"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBodyFile 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
forall era content.
ShelleyBasedEra era
-&gt; File content 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682146894"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyFile 'Out
</span><a href="#local-6989586621682146892"><span class="hs-identifier hs-var">txBodyOutFile</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682146954"><span class="hs-identifier hs-var">noWitTx</span></a></span><span>
</span><span id="line-528"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>      </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; (ExceptT TxCmdError IO (Either (FileError ()) ())
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FileError () -&gt; TxCmdError)
-&gt; FileError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span id="local-6989586621682145707"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getPoolDeregistrationInfo"><span class="hs-identifier hs-type">getPoolDeregistrationInfo</span></a></span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145707"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PoolId</span></span></span><span>
</span><span id="line-534"></span><span id="getPoolDeregistrationInfo"><span class="annot"><span class="annottext">getPoolDeregistrationInfo :: forall era. Certificate era -&gt; Maybe PoolId
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getPoolDeregistrationInfo"><span class="hs-identifier hs-var hs-var">getPoolDeregistrationInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyRelatedCertificate</span></span><span> </span><span id="local-6989586621682146957"><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682146957"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682146958"><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146958"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-535"></span><span>  </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
-&gt; (ShelleyToBabbageEraConstraints era =&gt; Maybe PoolId)
-&gt; Maybe PoolId
forall era a.
ShelleyToBabbageEra era
-&gt; (ShelleyToBabbageEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyToBabbageEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682146957"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyToBabbageEraConstraints era =&gt; Maybe PoolId)
 -&gt; Maybe PoolId)
-&gt; (ShelleyToBabbageEraConstraints era =&gt; Maybe PoolId)
-&gt; Maybe PoolId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era) -&gt; Maybe PoolId
forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 ShelleyEraTxCert (ShelleyLedgerEra era),
 TxCert (ShelleyLedgerEra era)
 ~ ShelleyTxCert (ShelleyLedgerEra era)) =&gt;
ShelleyTxCert (ShelleyLedgerEra era) -&gt; Maybe PoolId
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getShelleyDeregistrationPoolId"><span class="hs-identifier hs-var">getShelleyDeregistrationPoolId</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146958"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-536"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getPoolDeregistrationInfo"><span class="hs-identifier hs-var">getPoolDeregistrationInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConwayCertificate</span></span><span> </span><span id="local-6989586621682146978"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146978"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682146979"><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146979"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-537"></span><span>  </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; (ConwayEraOnwardsConstraints era =&gt; Maybe PoolId)
-&gt; Maybe PoolId
forall era a.
ConwayEraOnwards era -&gt; (ConwayEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">conwayEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682146978"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwardsConstraints era =&gt; Maybe PoolId) -&gt; Maybe PoolId)
-&gt; (ConwayEraOnwardsConstraints era =&gt; Maybe PoolId)
-&gt; Maybe PoolId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era) -&gt; Maybe PoolId
forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 TxCert (ShelleyLedgerEra era)
 ~ ConwayTxCert (ShelleyLedgerEra era),
 ConwayEraTxCert (ShelleyLedgerEra era)) =&gt;
ConwayTxCert (ShelleyLedgerEra era) -&gt; Maybe PoolId
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDeregistrationPoolId"><span class="hs-identifier hs-var">getConwayDeregistrationPoolId</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682146979"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span id="local-6989586621682145767"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getShelleyDeregistrationPoolId"><span class="hs-identifier hs-type">getShelleyDeregistrationPoolId</span></a></span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">L.EraCrypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145767"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span>
</span><span id="line-541"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyEraTxCert"><span class="hs-identifier hs-type">L.ShelleyEraTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145767"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">L.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145767"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyTxCert"><span class="hs-identifier hs-type">L.ShelleyTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145767"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyTxCert"><span class="hs-identifier hs-type">L.ShelleyTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145767"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PoolId</span></span></span><span>
</span><span id="line-545"></span><span id="getShelleyDeregistrationPoolId"><span class="annot"><span class="annottext">getShelleyDeregistrationPoolId :: forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 ShelleyEraTxCert (ShelleyLedgerEra era),
 TxCert (ShelleyLedgerEra era)
 ~ ShelleyTxCert (ShelleyLedgerEra era)) =&gt;
ShelleyTxCert (ShelleyLedgerEra era) -&gt; Maybe PoolId
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getShelleyDeregistrationPoolId"><span class="hs-identifier hs-var hs-var">getShelleyDeregistrationPoolId</span></a></span></span><span> </span><span id="local-6989586621682147003"><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147003"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-546"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147003"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-547"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#RetirePoolTxCert"><span class="hs-identifier hs-type">L.RetirePoolTxCert</span></a></span><span> </span><span id="local-6989586621682147005"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147005"><span class="hs-identifier hs-var">poolId</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PoolId -&gt; Maybe PoolId
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool StandardCrypto -&gt; PoolId
</span><span class="hs-identifier hs-var">StakePoolKeyHash</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto (ShelleyLedgerEra era))
KeyHash 'StakePool StandardCrypto
</span><a href="#local-6989586621682147005"><span class="hs-identifier hs-var">poolId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>    </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe PoolId
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span id="local-6989586621682145782"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDeregistrationPoolId"><span class="hs-identifier hs-type">getConwayDeregistrationPoolId</span></a></span><span>
</span><span id="line-551"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">L.EraCrypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">L.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayTxCert"><span class="hs-identifier hs-type">L.ConwayTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">L.ConwayEraTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayTxCert"><span class="hs-identifier hs-type">L.ConwayTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PoolId</span></span></span><span>
</span><span id="line-556"></span><span id="getConwayDeregistrationPoolId"><span class="annot"><span class="annottext">getConwayDeregistrationPoolId :: forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 TxCert (ShelleyLedgerEra era)
 ~ ConwayTxCert (ShelleyLedgerEra era),
 ConwayEraTxCert (ShelleyLedgerEra era)) =&gt;
ConwayTxCert (ShelleyLedgerEra era) -&gt; Maybe PoolId
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDeregistrationPoolId"><span class="hs-identifier hs-var hs-var">getConwayDeregistrationPoolId</span></a></span></span><span> </span><span id="local-6989586621682147016"><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147016"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-557"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147016"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-558"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#RetirePoolTxCert"><span class="hs-identifier hs-type">L.RetirePoolTxCert</span></a></span><span> </span><span id="local-6989586621682147017"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147017"><span class="hs-identifier hs-var">poolId</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PoolId -&gt; Maybe PoolId
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool StandardCrypto -&gt; PoolId
</span><span class="hs-identifier hs-var">StakePoolKeyHash</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto (ShelleyLedgerEra era))
KeyHash 'StakePool StandardCrypto
</span><a href="#local-6989586621682147017"><span class="hs-identifier hs-var">poolId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe PoolId
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span id="local-6989586621682145706"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getDRepDeregistrationInfo"><span class="hs-identifier hs-type">getDRepDeregistrationInfo</span></a></span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145706"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">L.Credential</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">L.DRepRole</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-564"></span><span id="getDRepDeregistrationInfo"><span class="annot"><span class="annottext">getDRepDeregistrationInfo :: forall era.
Certificate era
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getDRepDeregistrationInfo"><span class="hs-identifier hs-var hs-var">getDRepDeregistrationInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyRelatedCertificate</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-565"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getDRepDeregistrationInfo"><span class="hs-identifier hs-var">getDRepDeregistrationInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConwayCertificate</span></span><span> </span><span id="local-6989586621682147018"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147018"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682147019"><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147019"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-566"></span><span>  </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    Maybe (Credential 'DRepRole StandardCrypto, Lovelace))
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
forall era a.
ConwayEraOnwards era -&gt; (ConwayEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">conwayEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147018"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwardsConstraints era =&gt;
  Maybe (Credential 'DRepRole StandardCrypto, Lovelace))
 -&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace))
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    Maybe (Credential 'DRepRole StandardCrypto, Lovelace))
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 TxCert (ShelleyLedgerEra era)
 ~ ConwayTxCert (ShelleyLedgerEra era),
 ConwayEraTxCert (ShelleyLedgerEra era)) =&gt;
ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDRepDeregistrationInfo"><span class="hs-identifier hs-var">getConwayDRepDeregistrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147019"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span id="local-6989586621682145792"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDRepDeregistrationInfo"><span class="hs-identifier hs-type">getConwayDRepDeregistrationInfo</span></a></span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">L.EraCrypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145792"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">L.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145792"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayTxCert"><span class="hs-identifier hs-type">L.ConwayTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145792"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">L.ConwayEraTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145792"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayTxCert"><span class="hs-identifier hs-type">L.ConwayTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145792"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">L.Credential</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">L.DRepRole</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-574"></span><span id="getConwayDRepDeregistrationInfo"><span class="annot"><span class="annottext">getConwayDRepDeregistrationInfo :: forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 TxCert (ShelleyLedgerEra era)
 ~ ConwayTxCert (ShelleyLedgerEra era),
 ConwayEraTxCert (ShelleyLedgerEra era)) =&gt;
ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDRepDeregistrationInfo"><span class="hs-identifier hs-var hs-var">getConwayDRepDeregistrationInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxCert (ShelleyLedgerEra era)
-&gt; Maybe
     (Credential 'DRepRole (EraCrypto (ShelleyLedgerEra era)), Lovelace)
ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (Credential 'DRepRole StandardCrypto, Lovelace)
forall era.
ConwayEraTxCert era =&gt;
TxCert era
-&gt; Maybe (Credential 'DRepRole (EraCrypto era), Lovelace)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#getUnRegDRepTxCert"><span class="hs-identifier hs-var">L.getUnRegDRepTxCert</span></a></span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span id="local-6989586621682145705"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getStakeDeregistrationInfo"><span class="hs-identifier hs-type">getStakeDeregistrationInfo</span></a></span><span>
</span><span id="line-577"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145705"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeCredential</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-579"></span><span id="getStakeDeregistrationInfo"><span class="annot"><span class="annottext">getStakeDeregistrationInfo :: forall era. Certificate era -&gt; Maybe (StakeCredential, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getStakeDeregistrationInfo"><span class="hs-identifier hs-var hs-var">getStakeDeregistrationInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyRelatedCertificate</span></span><span> </span><span id="local-6989586621682147042"><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682147042"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682147043"><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147043"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-580"></span><span>  </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
-&gt; (ShelleyToBabbageEraConstraints era =&gt;
    Maybe (StakeCredential, Lovelace))
-&gt; Maybe (StakeCredential, Lovelace)
forall era a.
ShelleyToBabbageEra era
-&gt; (ShelleyToBabbageEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyToBabbageEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682147042"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyToBabbageEraConstraints era =&gt;
  Maybe (StakeCredential, Lovelace))
 -&gt; Maybe (StakeCredential, Lovelace))
-&gt; (ShelleyToBabbageEraConstraints era =&gt;
    Maybe (StakeCredential, Lovelace))
-&gt; Maybe (StakeCredential, Lovelace)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
-&gt; Maybe (StakeCredential, Lovelace)
forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 ShelleyEraTxCert (ShelleyLedgerEra era),
 TxCert (ShelleyLedgerEra era)
 ~ ShelleyTxCert (ShelleyLedgerEra era)) =&gt;
ShelleyTxCert (ShelleyLedgerEra era)
-&gt; Maybe (StakeCredential, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getShelleyDeregistrationInfo"><span class="hs-identifier hs-var">getShelleyDeregistrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147043"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-581"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getStakeDeregistrationInfo"><span class="hs-identifier hs-var">getStakeDeregistrationInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConwayCertificate</span></span><span> </span><span id="local-6989586621682147060"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147060"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682147061"><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147061"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-582"></span><span>  </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    Maybe (StakeCredential, Lovelace))
-&gt; Maybe (StakeCredential, Lovelace)
forall era a.
ConwayEraOnwards era -&gt; (ConwayEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">conwayEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147060"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwardsConstraints era =&gt;
  Maybe (StakeCredential, Lovelace))
 -&gt; Maybe (StakeCredential, Lovelace))
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    Maybe (StakeCredential, Lovelace))
-&gt; Maybe (StakeCredential, Lovelace)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (StakeCredential, Lovelace)
forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 TxCert (ShelleyLedgerEra era)
 ~ ConwayTxCert (ShelleyLedgerEra era),
 ConwayEraTxCert (ShelleyLedgerEra era)) =&gt;
ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (StakeCredential, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDeregistrationInfo"><span class="hs-identifier hs-var">getConwayDeregistrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147061"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span class="hs-comment">-- There for no deposits required pre-conway for registering stake</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- credentials.</span><span>
</span><span id="line-586"></span><span id="local-6989586621682145795"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getShelleyDeregistrationInfo"><span class="hs-identifier hs-type">getShelleyDeregistrationInfo</span></a></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">L.EraCrypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145795"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyEraTxCert"><span class="hs-identifier hs-type">L.ShelleyEraTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145795"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">L.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145795"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyTxCert"><span class="hs-identifier hs-type">L.ShelleyTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145795"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyTxCert"><span class="hs-identifier hs-type">L.ShelleyTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145795"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeCredential</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-592"></span><span id="getShelleyDeregistrationInfo"><span class="annot"><span class="annottext">getShelleyDeregistrationInfo :: forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 ShelleyEraTxCert (ShelleyLedgerEra era),
 TxCert (ShelleyLedgerEra era)
 ~ ShelleyTxCert (ShelleyLedgerEra era)) =&gt;
ShelleyTxCert (ShelleyLedgerEra era)
-&gt; Maybe (StakeCredential, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getShelleyDeregistrationInfo"><span class="hs-identifier hs-var hs-var">getShelleyDeregistrationInfo</span></a></span></span><span> </span><span id="local-6989586621682147084"><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147084"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-593"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147084"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-594"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-shelley-1.14.1.0-7287c77481a5f3d6c6cfb339099ac98cb93aa1d3233da335f56e111db99f7ee4/share/doc/html/src/Cardano.Ledger.Shelley.TxCert.html#UnRegTxCert"><span class="hs-identifier hs-type">L.UnRegTxCert</span></a></span><span> </span><span id="local-6989586621682147086"><span class="annot"><span class="annottext">StakeCredential (EraCrypto (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147086"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(StakeCredential, Lovelace) -&gt; Maybe (StakeCredential, Lovelace)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeCredential StandardCrypto -&gt; StakeCredential
</span><span class="hs-identifier hs-var">fromShelleyStakeCredential</span></span><span> </span><span class="annot"><span class="annottext">StakeCredential (EraCrypto (ShelleyLedgerEra era))
StakeCredential StandardCrypto
</span><a href="#local-6989586621682147086"><span class="hs-identifier hs-var">stakeCred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>    </span><span class="annot"><span class="annottext">ShelleyTxCert (ShelleyLedgerEra era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (StakeCredential, Lovelace)
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span id="local-6989586621682145796"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDeregistrationInfo"><span class="hs-identifier hs-type">getConwayDeregistrationInfo</span></a></span><span>
</span><span id="line-598"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">L.EraCrypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span>
</span><span id="line-599"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">L.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayTxCert"><span class="hs-identifier hs-type">L.ConwayTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">L.ConwayEraTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#ConwayTxCert"><span class="hs-identifier hs-type">L.ConwayTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeCredential</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-603"></span><span id="getConwayDeregistrationInfo"><span class="annot"><span class="annottext">getConwayDeregistrationInfo :: forall era.
(EraCrypto (ShelleyLedgerEra era) ~ StandardCrypto,
 TxCert (ShelleyLedgerEra era)
 ~ ConwayTxCert (ShelleyLedgerEra era),
 ConwayEraTxCert (ShelleyLedgerEra era)) =&gt;
ConwayTxCert (ShelleyLedgerEra era)
-&gt; Maybe (StakeCredential, Lovelace)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getConwayDeregistrationInfo"><span class="hs-identifier hs-var hs-var">getConwayDeregistrationInfo</span></a></span></span><span> </span><span id="local-6989586621682147094"><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147094"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147094"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-605"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-conway-1.17.3.0-9d6aaa0fd8d7b87066823aab72c7a3df3007a7c343312ec1d2521fdf08bb139f/share/doc/html/src/Cardano.Ledger.Conway.TxCert.html#UnRegDepositTxCert"><span class="hs-identifier hs-type">L.UnRegDepositTxCert</span></a></span><span> </span><span id="local-6989586621682147096"><span class="annot"><span class="annottext">StakeCredential (EraCrypto (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147096"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span> </span><span id="local-6989586621682147097"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147097"><span class="hs-identifier hs-var">depositRefund</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(StakeCredential, Lovelace) -&gt; Maybe (StakeCredential, Lovelace)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeCredential StandardCrypto -&gt; StakeCredential
</span><span class="hs-identifier hs-var">fromShelleyStakeCredential</span></span><span> </span><span class="annot"><span class="annottext">StakeCredential (EraCrypto (ShelleyLedgerEra era))
StakeCredential StandardCrypto
</span><a href="#local-6989586621682147096"><span class="hs-identifier hs-var">stakeCred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147097"><span class="hs-identifier hs-var">depositRefund</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>    </span><span class="annot"><span class="annottext">ConwayTxCert (ShelleyLedgerEra era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (StakeCredential, Lovelace)
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span id="local-6989586621682145611"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getExecutionUnitPrices"><span class="hs-identifier hs-type">getExecutionUnitPrices</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145611"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerProtocolParameters</span></span><span> </span><span class="annot"><a href="#local-6989586621682145611"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Plutus.ExUnits.html#Prices"><span class="hs-identifier hs-type">L.Prices</span></a></span></span><span>
</span><span id="line-609"></span><span id="getExecutionUnitPrices"><span class="annot"><span class="annottext">getExecutionUnitPrices :: forall era.
CardanoEra era -&gt; LedgerProtocolParameters era -&gt; Maybe Prices
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getExecutionUnitPrices"><span class="hs-identifier hs-var hs-var">getExecutionUnitPrices</span></a></span></span><span> </span><span id="local-6989586621682147100"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147100"><span class="hs-identifier hs-var">cEra</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerProtocolParameters</span></span><span> </span><span id="local-6989586621682147102"><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147102"><span class="hs-identifier hs-var">pp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-610"></span><span>  </span><span class="annot"><span class="annottext">CardanoEra era -&gt; (AlonzoEraOnwards era -&gt; Prices) -&gt; Maybe Prices
forall (eon :: * -&gt; *) era a.
Eon eon =&gt;
CardanoEra era -&gt; (eon era -&gt; a) -&gt; Maybe a
</span><span class="hs-identifier hs-var">forEraInEonMaybe</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147100"><span class="hs-identifier hs-var">cEra</span></a></span><span> </span><span class="annot"><span class="annottext">((AlonzoEraOnwards era -&gt; Prices) -&gt; Maybe Prices)
-&gt; (AlonzoEraOnwards era -&gt; Prices) -&gt; Maybe Prices
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147104"><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147104"><span class="hs-identifier hs-var">aeo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-611"></span><span>    </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
-&gt; (AlonzoEraOnwardsConstraints era =&gt; Prices) -&gt; Prices
forall era a.
AlonzoEraOnwards era -&gt; (AlonzoEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">alonzoEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147104"><span class="hs-identifier hs-var">aeo</span></a></span><span> </span><span class="annot"><span class="annottext">((AlonzoEraOnwardsConstraints era =&gt; Prices) -&gt; Prices)
-&gt; (AlonzoEraOnwardsConstraints era =&gt; Prices) -&gt; Prices
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-612"></span><span>      </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682147102"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
-&gt; Getting Prices (PParams (ShelleyLedgerEra era)) Prices -&gt; Prices
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Prices (PParams (ShelleyLedgerEra era)) Prices
forall era. AlonzoEraPParams era =&gt; Lens' (PParams era) Prices
Lens' (PParams (ShelleyLedgerEra era)) Prices
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-alonzo-1.11.0.0-856ebe4642fa4fea14b2ca347fa207f82d7064a7915cce60185463588d40704f/share/doc/html/src/Cardano.Ledger.Alonzo.PParams.html#ppPricesL"><span class="hs-identifier hs-var">L.ppPricesL</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span id="local-6989586621682145304"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildRawCmd"><span class="hs-identifier hs-type">runTransactionBuildRawCmd</span></a></span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildRawCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionBuildRawCmdArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145304"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-618"></span><span id="runTransactionBuildRawCmd"><span class="annot"><span class="annottext">runTransactionBuildRawCmd :: forall era.
TransactionBuildRawCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionBuildRawCmd"><span class="hs-identifier hs-var hs-var">runTransactionBuildRawCmd</span></a></span></span><span>
</span><span id="line-619"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionBuildRawCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionBuildRawCmdArgs</span></a></span><span>
</span><span id="line-620"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682147178"><span class="annot"><span class="annottext">ShelleyBasedEra era
eon :: ShelleyBasedEra era
eon :: forall era. TransactionBuildRawCmdArgs era -&gt; ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var hs-var">eon</span></a></span></span><span>
</span><span id="line-621"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147180"><span class="annot"><span class="annottext">Maybe ScriptValidity
mScriptValidity :: Maybe ScriptValidity
mScriptValidity :: forall era. TransactionBuildRawCmdArgs era -&gt; Maybe ScriptValidity
</span><a href="#local-6989586621682147180"><span class="hs-identifier hs-var hs-var">mScriptValidity</span></a></span></span><span>
</span><span id="line-622"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147182"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
txIns :: [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
txIns :: forall era.
TransactionBuildRawCmdArgs era
-&gt; [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
</span><a href="#local-6989586621682147182"><span class="hs-identifier hs-var hs-var">txIns</span></a></span></span><span>
</span><span id="line-623"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147184"><span class="annot"><span class="annottext">[TxIn]
readOnlyRefIns :: [TxIn]
readOnlyRefIns :: forall era. TransactionBuildRawCmdArgs era -&gt; [TxIn]
</span><a href="#local-6989586621682147184"><span class="hs-identifier hs-var hs-var">readOnlyRefIns</span></a></span></span><span>
</span><span id="line-624"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147186"><span class="annot"><span class="annottext">[TxIn]
txInsCollateral :: [TxIn]
txInsCollateral :: forall era. TransactionBuildRawCmdArgs era -&gt; [TxIn]
</span><a href="#local-6989586621682147186"><span class="hs-identifier hs-var hs-var">txInsCollateral</span></a></span></span><span>
</span><span id="line-625"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mReturnCollateral :: forall era.
TransactionBuildRawCmdArgs era -&gt; Maybe TxOutShelleyBasedEra
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#mReturnCollateral"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682147189"><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
</span><a href="#local-6989586621682147189"><span class="hs-identifier hs-var">mReturnColl</span></a></span></span><span>
</span><span id="line-626"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147190"><span class="annot"><span class="annottext">Maybe Lovelace
mTotalCollateral :: Maybe Lovelace
mTotalCollateral :: forall era. TransactionBuildRawCmdArgs era -&gt; Maybe Lovelace
</span><a href="#local-6989586621682147190"><span class="hs-identifier hs-var hs-var">mTotalCollateral</span></a></span></span><span>
</span><span id="line-627"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">requiredSigners :: forall era. TransactionBuildRawCmdArgs era -&gt; [RequiredSigner]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#requiredSigners"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682147193"><span class="annot"><span class="annottext">[RequiredSigner]
</span><a href="#local-6989586621682147193"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span>
</span><span id="line-628"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147194"><span class="annot"><span class="annottext">[TxOutAnyEra]
txouts :: [TxOutAnyEra]
txouts :: forall era. TransactionBuildRawCmdArgs era -&gt; [TxOutAnyEra]
</span><a href="#local-6989586621682147194"><span class="hs-identifier hs-var hs-var">txouts</span></a></span></span><span>
</span><span id="line-629"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147196"><span class="annot"><span class="annottext">Maybe (Value, [CliMintScriptRequirements])
mValue :: Maybe (Value, [CliMintScriptRequirements])
mValue :: forall era.
TransactionBuildRawCmdArgs era
-&gt; Maybe (Value, [CliMintScriptRequirements])
</span><a href="#local-6989586621682147196"><span class="hs-identifier hs-var hs-var">mValue</span></a></span></span><span>
</span><span id="line-630"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147198"><span class="annot"><span class="annottext">Maybe SlotNo
mValidityLowerBound :: Maybe SlotNo
mValidityLowerBound :: forall era. TransactionBuildRawCmdArgs era -&gt; Maybe SlotNo
</span><a href="#local-6989586621682147198"><span class="hs-identifier hs-var hs-var">mValidityLowerBound</span></a></span></span><span>
</span><span id="line-631"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147200"><span class="annot"><span class="annottext">TxValidityUpperBound era
mValidityUpperBound :: TxValidityUpperBound era
mValidityUpperBound :: forall era.
TransactionBuildRawCmdArgs era -&gt; TxValidityUpperBound era
</span><a href="#local-6989586621682147200"><span class="hs-identifier hs-var hs-var">mValidityUpperBound</span></a></span></span><span>
</span><span id="line-632"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147202"><span class="annot"><span class="annottext">Lovelace
fee :: Lovelace
fee :: forall era. TransactionBuildRawCmdArgs era -&gt; Lovelace
</span><a href="#local-6989586621682147202"><span class="hs-identifier hs-var hs-var">fee</span></a></span></span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147204"><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
certificates :: [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
certificates :: forall era.
TransactionBuildRawCmdArgs era
-&gt; [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147204"><span class="hs-identifier hs-var hs-var">certificates</span></a></span></span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147206"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
withdrawals :: [(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
withdrawals :: forall era.
TransactionBuildRawCmdArgs era
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147206"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147208"><span class="annot"><span class="annottext">TxMetadataJsonSchema
metadataSchema :: TxMetadataJsonSchema
metadataSchema :: forall era. TransactionBuildRawCmdArgs era -&gt; TxMetadataJsonSchema
</span><a href="#local-6989586621682147208"><span class="hs-identifier hs-var hs-var">metadataSchema</span></a></span></span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147210"><span class="annot"><span class="annottext">[ScriptFile]
scriptFiles :: [ScriptFile]
scriptFiles :: forall era. TransactionBuildRawCmdArgs era -&gt; [ScriptFile]
</span><a href="#local-6989586621682147210"><span class="hs-identifier hs-var hs-var">scriptFiles</span></a></span></span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147212"><span class="annot"><span class="annottext">[MetadataFile]
metadataFiles :: [MetadataFile]
metadataFiles :: forall era. TransactionBuildRawCmdArgs era -&gt; [MetadataFile]
</span><a href="#local-6989586621682147212"><span class="hs-identifier hs-var hs-var">metadataFiles</span></a></span></span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147214"><span class="annot"><span class="annottext">Maybe ProtocolParamsFile
mProtocolParamsFile :: Maybe ProtocolParamsFile
mProtocolParamsFile :: forall era.
TransactionBuildRawCmdArgs era -&gt; Maybe ProtocolParamsFile
</span><a href="#local-6989586621682147214"><span class="hs-identifier hs-var hs-var">mProtocolParamsFile</span></a></span></span><span>
</span><span id="line-639"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147216"><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
mUpdateProprosalFile :: Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
mUpdateProprosalFile :: forall era.
TransactionBuildRawCmdArgs era
-&gt; Maybe
     (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><a href="#local-6989586621682147216"><span class="hs-identifier hs-var hs-var">mUpdateProprosalFile</span></a></span></span><span>
</span><span id="line-640"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147218"><span class="annot"><span class="annottext">[(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
voteFiles :: [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
voteFiles :: forall era.
TransactionBuildRawCmdArgs era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147218"><span class="hs-identifier hs-var hs-var">voteFiles</span></a></span></span><span>
</span><span id="line-641"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147220"><span class="annot"><span class="annottext">[(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
proposalFiles :: [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
proposalFiles :: forall era.
TransactionBuildRawCmdArgs era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147220"><span class="hs-identifier hs-var hs-var">proposalFiles</span></a></span></span><span>
</span><span id="line-642"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147222"><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
currentTreasuryValueAndDonation :: Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
currentTreasuryValueAndDonation :: forall era.
TransactionBuildRawCmdArgs era
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147222"><span class="hs-identifier hs-var hs-var">currentTreasuryValueAndDonation</span></a></span></span><span>
</span><span id="line-643"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147224"><span class="annot"><span class="annottext">TxBodyFile 'Out
txBodyOutFile :: TxBodyFile 'Out
txBodyOutFile :: forall era. TransactionBuildRawCmdArgs era -&gt; TxBodyFile 'Out
</span><a href="#local-6989586621682147224"><span class="hs-identifier hs-var hs-var">txBodyOutFile</span></a></span></span><span>
</span><span id="line-644"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-645"></span><span>    </span><span id="local-6989586621682147226"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147226"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-646"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; ExceptT
     TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
 -&gt; ExceptT
      TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; ExceptT
     TxCmdError IO [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-647"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
forall era a ctx.
ShelleyBasedEra era
-&gt; [(a, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFiles"><span class="hs-identifier hs-var">readScriptWitnessFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitnessFiles WitCtxTxIn))]
</span><a href="#local-6989586621682147182"><span class="hs-identifier hs-var">txIns</span></a></span><span>
</span><span id="line-648"></span><span>    </span><span id="local-6989586621682147227"><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147227"><span class="hs-identifier hs-var">certFilesAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-649"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-650"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
forall era a ctx.
ShelleyBasedEra era
-&gt; [(a, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFiles"><span class="hs-identifier hs-var">readScriptWitnessFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147204"><span class="hs-identifier hs-var">certificates</span></a></span><span>
</span><span id="line-651"></span><span>
</span><span id="line-652"></span><span>    </span><span id="local-6989586621682147228"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147228"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-653"></span><span>      </span><span class="annot"><span class="annottext">(ScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptWitnessError"><span class="hs-identifier hs-var">TxCmdScriptWitnessError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   ScriptWitnessError
   IO
   [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-654"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; ExceptT
     ScriptWitnessError
     IO
     [(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
forall era a b ctx.
ShelleyBasedEra era
-&gt; [(a, b, Maybe (ScriptWitnessFiles ctx))]
-&gt; ExceptT
     ScriptWitnessError IO [(a, b, Maybe (ScriptWitness ctx era))]
</span><a href="Cardano.CLI.Read.html#readScriptWitnessFilesTuple"><span class="hs-identifier hs-var">readScriptWitnessFilesTuple</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147206"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-655"></span><span>    </span><span id="local-6989586621682147229"><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147229"><span class="hs-identifier hs-var">txMetadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-656"></span><span>      </span><span class="annot"><span class="annottext">(MetadataError -&gt; TxCmdError)
-&gt; ExceptT MetadataError IO (TxMetadataInEra era)
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdMetadataError"><span class="hs-identifier hs-var">TxCmdMetadataError</span></a></span><span>
</span><span id="line-657"></span><span>        </span><span class="annot"><span class="annottext">(ExceptT MetadataError IO (TxMetadataInEra era)
 -&gt; ExceptT TxCmdError IO (TxMetadataInEra era))
-&gt; (IO (Either MetadataError (TxMetadataInEra era))
    -&gt; ExceptT MetadataError IO (TxMetadataInEra era))
-&gt; IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT MetadataError IO (TxMetadataInEra era)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span>
</span><span id="line-658"></span><span>        </span><span class="annot"><span class="annottext">(IO (Either MetadataError (TxMetadataInEra era))
 -&gt; ExceptT TxCmdError IO (TxMetadataInEra era))
-&gt; IO (Either MetadataError (TxMetadataInEra era))
-&gt; ExceptT TxCmdError IO (TxMetadataInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxMetadataJsonSchema
-&gt; [MetadataFile]
-&gt; IO (Either MetadataError (TxMetadataInEra era))
forall era.
ShelleyBasedEra era
-&gt; TxMetadataJsonSchema
-&gt; [MetadataFile]
-&gt; IO (Either MetadataError (TxMetadataInEra era))
</span><a href="Cardano.CLI.Read.html#readTxMetadata"><span class="hs-identifier hs-var">readTxMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">TxMetadataJsonSchema
</span><a href="#local-6989586621682147208"><span class="hs-identifier hs-var">metadataSchema</span></a></span><span> </span><span class="annot"><span class="annottext">[MetadataFile]
</span><a href="#local-6989586621682147212"><span class="hs-identifier hs-var">metadataFiles</span></a></span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147230"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147230"><span class="hs-identifier hs-var">mas</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147231"><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682147231"><span class="hs-identifier hs-var">sWitFiles</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Value, [CliMintScriptRequirements])
-&gt; Maybe (Value, [CliMintScriptRequirements])
-&gt; (Value, [CliMintScriptRequirements])
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Value, [CliMintScriptRequirements])
</span><a href="#local-6989586621682147196"><span class="hs-identifier hs-var">mValue</span></a></span><span>
</span><span id="line-661"></span><span>    </span><span id="local-6989586621682147232"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147232"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-662"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147230"><span class="hs-identifier hs-var">mas</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; (Value, [MintScriptWitnessWithPolicyId era]))
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT
     TxCmdError IO (Value, [MintScriptWitnessWithPolicyId era])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError CliScriptWitnessError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
-&gt; ExceptT TxCmdError IO [MintScriptWitnessWithPolicyId era]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError CliScriptWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdCliScriptWitnessError"><span class="hs-identifier hs-var">TxCmdCliScriptWitnessError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CliMintScriptRequirements
 -&gt; ExceptT
      (FileError CliScriptWitnessError)
      IO
      (MintScriptWitnessWithPolicyId era))
-&gt; [CliMintScriptRequirements]
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     [MintScriptWitnessWithPolicyId era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; ExceptT
     (FileError CliScriptWitnessError)
     IO
     (MintScriptWitnessWithPolicyId era)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) era.
MonadIOTransError (FileError CliScriptWitnessError) t m =&gt;
ShelleyBasedEra era
-&gt; CliMintScriptRequirements
-&gt; t m (MintScriptWitnessWithPolicyId era)
</span><a href="Cardano.CLI.EraBased.Script.Mint.Read.html#readMintScriptWitness"><span class="hs-identifier hs-var">readMintScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CliMintScriptRequirements]
</span><a href="#local-6989586621682147231"><span class="hs-identifier hs-var">sWitFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span>    </span><span id="local-6989586621682147233"><span class="annot"><span class="annottext">[ScriptInAnyLang]
</span><a href="#local-6989586621682147233"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><span class="annottext">(FileError ScriptDecodeError -&gt; TxCmdError)
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
-&gt; ExceptT TxCmdError IO [ScriptInAnyLang]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError ScriptDecodeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptFileError"><span class="hs-identifier hs-var">TxCmdScriptFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
 -&gt; ExceptT TxCmdError IO [ScriptInAnyLang])
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
-&gt; ExceptT TxCmdError IO [ScriptInAnyLang]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-666"></span><span>        </span><span class="annot"><span class="annottext">(ScriptFile
 -&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang)
-&gt; [ScriptFile]
-&gt; ExceptT (FileError ScriptDecodeError) IO [ScriptInAnyLang]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *).
MonadIOTransError (FileError ScriptDecodeError) t m =&gt;
FilePath -&gt; t m ScriptInAnyLang
</span><a href="Cardano.CLI.Read.html#readFileScriptInAnyLang"><span class="hs-identifier hs-var">readFileScriptInAnyLang</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath
 -&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang)
-&gt; (ScriptFile -&gt; FilePath)
-&gt; ScriptFile
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptFile -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><span class="hs-identifier hs-var">unFile</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ScriptFile]
</span><a href="#local-6989586621682147210"><span class="hs-identifier hs-var">scriptFiles</span></a></span><span>
</span><span id="line-667"></span><span>    </span><span id="local-6989586621682147234"><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147234"><span class="hs-identifier hs-var">txAuxScripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-668"></span><span>      </span><span class="annot"><span class="annottext">Either TxCmdError (TxAuxScripts era)
-&gt; ExceptT TxCmdError IO (TxAuxScripts era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxAuxScripts era)
 -&gt; ExceptT TxCmdError IO (TxAuxScripts era))
-&gt; Either TxCmdError (TxAuxScripts era)
-&gt; ExceptT TxCmdError IO (TxAuxScripts era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TxAuxScriptsValidationError -&gt; TxCmdError)
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
-&gt; Either TxCmdError (TxAuxScripts era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxScriptsValidationError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdAuxScriptsValidationError"><span class="hs-identifier hs-var">TxCmdAuxScriptsValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxAuxScriptsValidationError (TxAuxScripts era)
 -&gt; Either TxCmdError (TxAuxScripts era))
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
-&gt; Either TxCmdError (TxAuxScripts era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [ScriptInAnyLang]
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
forall era.
ShelleyBasedEra era
-&gt; [ScriptInAnyLang]
-&gt; Either TxAuxScriptsValidationError (TxAuxScripts era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxAuxScripts"><span class="hs-identifier hs-var">validateTxAuxScripts</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptInAnyLang]
</span><a href="#local-6989586621682147233"><span class="hs-identifier hs-var">scripts</span></a></span><span>
</span><span id="line-669"></span><span>
</span><span id="line-670"></span><span>    </span><span id="local-6989586621682147235"><span class="annot"><span class="annottext">Maybe (PParams (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147235"><span class="hs-identifier hs-var">pparams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe ProtocolParamsFile
-&gt; (ProtocolParamsFile
    -&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era)))
-&gt; ExceptT TxCmdError IO (Maybe (PParams (ShelleyLedgerEra era)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ProtocolParamsFile
</span><a href="#local-6989586621682147214"><span class="hs-identifier hs-var">mProtocolParamsFile</span></a></span><span> </span><span class="annot"><span class="annottext">((ProtocolParamsFile
  -&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era)))
 -&gt; ExceptT TxCmdError IO (Maybe (PParams (ShelleyLedgerEra era))))
-&gt; (ProtocolParamsFile
    -&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era)))
-&gt; ExceptT TxCmdError IO (Maybe (PParams (ShelleyLedgerEra era)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147236"><span class="annot"><span class="annottext">ProtocolParamsFile
</span><a href="#local-6989586621682147236"><span class="hs-identifier hs-var">ppf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-671"></span><span>      </span><span class="annot"><span class="annottext">(ProtocolParamsError -&gt; TxCmdError)
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
-&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era))
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProtocolParamsError"><span class="hs-identifier hs-var">TxCmdProtocolParamsError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
forall era.
ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
</span><a href="Cardano.CLI.EraBased.Run.Genesis.Common.html#readProtocolParameters"><span class="hs-identifier hs-var">readProtocolParameters</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsFile
</span><a href="#local-6989586621682147236"><span class="hs-identifier hs-var">ppf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147237"><span class="annot"><span class="annottext">mLedgerPParams :: Maybe (LedgerProtocolParameters era)
</span><a href="#local-6989586621682147237"><span class="hs-identifier hs-var hs-var">mLedgerPParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era) -&gt; LedgerProtocolParameters era
forall era.
PParams (ShelleyLedgerEra era) -&gt; LedgerProtocolParameters era
</span><span class="hs-identifier hs-var">LedgerProtocolParameters</span></span><span> </span><span class="annot"><span class="annottext">(PParams (ShelleyLedgerEra era) -&gt; LedgerProtocolParameters era)
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; Maybe (LedgerProtocolParameters era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (PParams (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147235"><span class="hs-identifier hs-var">pparams</span></a></span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span>    </span><span id="local-6989586621682147238"><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147238"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><a href="#local-6989586621682147216"><span class="hs-identifier hs-var">mUpdateProprosalFile</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-676"></span><span>      </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Featured</span></span><span> </span><span id="local-6989586621682147239"><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682147239"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147240"><span class="annot"><span class="annottext">UpdateProposalFile
</span><a href="#local-6989586621682147240"><span class="hs-identifier hs-var">updateProposalFile</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-677"></span><span>        </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
-&gt; UpdateProposalFile
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
forall era.
ShelleyToBabbageEra era
-&gt; UpdateProposalFile
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
</span><a href="Cardano.CLI.Read.html#readTxUpdateProposal"><span class="hs-identifier hs-var">readTxUpdateProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyToBabbageEra era
</span><a href="#local-6989586621682147239"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateProposalFile
</span><a href="#local-6989586621682147240"><span class="hs-identifier hs-var">updateProposalFile</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
-&gt; (ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
    -&gt; ExceptT TxCmdError IO (TxUpdateProposal era))
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeError -&gt; TxCmdError)
-&gt; ExceptT (FileError TextEnvelopeError) IO (TxUpdateProposal era)
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadTextViewFileError"><span class="hs-identifier hs-var">TxCmdReadTextViewFileError</span></a></span><span>
</span><span id="line-678"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Featured ShelleyToBabbageEra era (Maybe UpdateProposalFile))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
-&gt; ExceptT TxCmdError IO (TxUpdateProposal era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
forall era. TxUpdateProposal era
</span><span class="hs-identifier hs-var">TxUpdateProposalNone</span></span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span>    </span><span id="local-6989586621682147241"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147241"><span class="hs-identifier hs-var">requiredSigners</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-681"></span><span>      </span><span class="annot"><span class="annottext">(RequiredSigner -&gt; ExceptT TxCmdError IO (Hash PaymentKey))
-&gt; [RequiredSigner] -&gt; ExceptT TxCmdError IO [Hash PaymentKey]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RequiredSignerError -&gt; TxCmdError)
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
-&gt; ExceptT TxCmdError IO (Hash PaymentKey)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">RequiredSignerError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdRequiredSignerError"><span class="hs-identifier hs-var">TxCmdRequiredSignerError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT RequiredSignerError IO (Hash PaymentKey)
 -&gt; ExceptT TxCmdError IO (Hash PaymentKey))
-&gt; (RequiredSigner
    -&gt; ExceptT RequiredSignerError IO (Hash PaymentKey))
-&gt; RequiredSigner
-&gt; ExceptT TxCmdError IO (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either RequiredSignerError (Hash PaymentKey))
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either RequiredSignerError (Hash PaymentKey))
 -&gt; ExceptT RequiredSignerError IO (Hash PaymentKey))
-&gt; (RequiredSigner
    -&gt; IO (Either RequiredSignerError (Hash PaymentKey)))
-&gt; RequiredSigner
-&gt; ExceptT RequiredSignerError IO (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RequiredSigner -&gt; IO (Either RequiredSignerError (Hash PaymentKey))
</span><a href="Cardano.CLI.Read.html#readRequiredSigner"><span class="hs-identifier hs-var">readRequiredSigner</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RequiredSigner]
</span><a href="#local-6989586621682147193"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span>    </span><span id="local-6989586621682147242"><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147242"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; Maybe TxOutShelleyBasedEra
-&gt; ExceptT TxCmdError IO (Maybe (TxOut CtxTx era))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Maybe a -&gt; m (Maybe b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInShelleyBasedEra"><span class="hs-identifier hs-var">toTxOutInShelleyBasedEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe TxOutShelleyBasedEra
</span><a href="#local-6989586621682147189"><span class="hs-identifier hs-var">mReturnColl</span></a></span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span>    </span><span id="local-6989586621682147243"><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147243"><span class="hs-identifier hs-var">txOuts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; [TxOutAnyEra] -&gt; ExceptT TxCmdError IO [TxOut CtxTx era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInAnyEra"><span class="hs-identifier hs-var">toTxOutInAnyEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOutAnyEra]
</span><a href="#local-6989586621682147194"><span class="hs-identifier hs-var">txouts</span></a></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span>    </span><span class="hs-comment">-- the same collateral input can be used for several plutus scripts</span><span>
</span><span id="line-688"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147244"><span class="annot"><span class="annottext">filteredTxinsc :: [Item (Set TxIn)]
</span><a href="#local-6989586621682147244"><span class="hs-identifier hs-var hs-var">filteredTxinsc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l. IsList l =&gt; l -&gt; [Item l]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; [Item (Set TxIn)]) -&gt; Set TxIn -&gt; [Item (Set TxIn)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Item (Set TxIn)] -&gt; Set TxIn
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[Item (Set TxIn)]
[TxIn]
</span><a href="#local-6989586621682147186"><span class="hs-identifier hs-var">txInsCollateral</span></a></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span>    </span><span class="hs-comment">-- Conway related</span><span>
</span><span id="line-691"></span><span>    </span><span id="local-6989586621682147245"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147245"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-692"></span><span>      </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; (ConwayEraOnwards era
    -&gt; ExceptT
         TxCmdError
         IO
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ShelleyBasedEra era
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall (eon :: * -&gt; *) a era.
Eon eon =&gt;
a -&gt; (eon era -&gt; a) -&gt; ShelleyBasedEra era -&gt; a
</span><span class="hs-identifier hs-var">inEonForShelleyBasedEra</span></span><span>
</span><span id="line-693"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147246"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147246"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-695"></span><span>            </span><span class="annot"><span class="annottext">(VoteError -&gt; TxCmdError)
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">VoteError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdVoteError"><span class="hs-identifier hs-var">TxCmdVoteError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   VoteError
   IO
   [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
 -&gt; ExceptT
      TxCmdError
      IO
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
    -&gt; ExceptT
         VoteError
         IO
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO
  (Either
     VoteError
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     VoteError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-var">ExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO
   (Either
      VoteError
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
 -&gt; ExceptT
      TxCmdError
      IO
      [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-696"></span><span>              </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall era a.
ConwayEraOnwards era -&gt; (ConwayEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">conwayEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147246"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwardsConstraints era =&gt;
  IO
    (Either
       VoteError
       [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
 -&gt; IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    IO
      (Either
         VoteError
         [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]))
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-697"></span><span>                </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
forall era.
ConwayEraOnwards era
-&gt; [(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        VoteError
        [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))])
</span><a href="Cardano.CLI.Read.html#readVotingProceduresFiles"><span class="hs-identifier hs-var">readVotingProceduresFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147246"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">[(VoteFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147218"><span class="hs-identifier hs-var">voteFiles</span></a></span><span>
</span><span id="line-698"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span>    </span><span id="local-6989586621682147248"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147248"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-702"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     ProposalError
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
forall era.
ShelleyBasedEra era
-&gt; [(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
-&gt; IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
</span><a href="Cardano.CLI.Read.html#readTxGovernanceActions"><span class="hs-identifier hs-var">readTxGovernanceActions</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">[(ProposalFile 'In, Maybe (ScriptWitnessFiles WitCtxStake))]
</span><a href="#local-6989586621682147220"><span class="hs-identifier hs-var">proposalFiles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     ProposalError
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         ProposalError
         [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
    -&gt; ExceptT
         TxCmdError
         IO
         [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposalError
 -&gt; ExceptT
      TxCmdError
      IO
      [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        ProposalError
        [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      [(Proposal era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (ProposalError -&gt; TxCmdError)
-&gt; ProposalError
-&gt; ExceptT
     TxCmdError
     IO
     [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProposalError"><span class="hs-identifier hs-var">TxCmdProposalError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span>    </span><span id="local-6989586621682147249"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147249"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-706"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ShelleyBasedEraConstraints era =&gt;
    ExceptT
      TxCmdError
      IO
      [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall era a.
ShelleyBasedEra era -&gt; (ShelleyBasedEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyBasedEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyBasedEraConstraints era =&gt;
  ExceptT
    TxCmdError
    IO
    [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
 -&gt; ExceptT
      TxCmdError
      IO
      [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; (ShelleyBasedEraConstraints era =&gt;
    ExceptT
      TxCmdError
      IO
      [(Certificate era, Maybe (ScriptWitness WitCtxStake era))])
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-707"></span><span>        </span><span class="annot"><span class="annottext">[ExceptT
   TxCmdError
   IO
   (Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; ExceptT
     TxCmdError
     IO
     [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a></span><span>
</span><span id="line-708"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(Certificate era
 -&gt; (Certificate era, Maybe (ScriptWitness WitCtxStake era)))
-&gt; ExceptT TxCmdError IO (Certificate era)
-&gt; ExceptT
     TxCmdError
     IO
     (Certificate era, Maybe (ScriptWitness WitCtxStake era))
forall a b.
(a -&gt; b) -&gt; ExceptT TxCmdError IO a -&gt; ExceptT TxCmdError IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span>
</span><span id="line-709"></span><span>              </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682147257"><span class="hs-identifier hs-var">mSwit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeError -&gt; TxCmdError)
-&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era)
-&gt; ExceptT TxCmdError IO (Certificate era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadTextViewFileError"><span class="hs-identifier hs-var">TxCmdReadTextViewFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeError) IO (Certificate era)
 -&gt; ExceptT TxCmdError IO (Certificate era))
-&gt; (IO (Either (FileError TextEnvelopeError) (Certificate era))
    -&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT TxCmdError IO (Certificate era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT (FileError TextEnvelopeError) IO (Certificate era)
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeError) (Certificate era))
 -&gt; ExceptT TxCmdError IO (Certificate era))
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
-&gt; ExceptT TxCmdError IO (Certificate era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-711"></span><span>                  </span><span class="annot"><span class="annottext">AsType (Certificate era)
-&gt; File Any 'In
-&gt; IO (Either (FileError TextEnvelopeError) (Certificate era))
forall a content.
HasTextEnvelope a =&gt;
AsType a
-&gt; File content 'In -&gt; IO (Either (FileError TextEnvelopeError) a)
</span><span class="hs-identifier hs-var">readFileTextEnvelope</span></span><span> </span><span class="annot"><span class="annottext">AsType (Certificate era)
forall era. AsType (Certificate era)
</span><span class="hs-identifier hs-var">AsCertificate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; File Any 'In
forall content (direction :: FileDirection).
FilePath -&gt; File content direction
</span><span class="hs-identifier hs-var">File</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147258"><span class="hs-identifier hs-var">certFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#CertificateFile"><span class="hs-identifier hs-type">CertificateFile</span></a></span><span> </span><span id="local-6989586621682147258"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147258"><span class="hs-identifier hs-var">certFile</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147257"><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682147257"><span class="hs-identifier hs-var">mSwit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CertificateFile, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147227"><span class="hs-identifier hs-var">certFilesAndMaybeScriptWits</span></a></span><span>
</span><span id="line-714"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-715"></span><span>    </span><span id="local-6989586621682147259"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147259"><span class="hs-identifier hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-716"></span><span>      </span><span class="annot"><span class="annottext">Either TxCmdError (TxBody era)
-&gt; ExceptT TxCmdError IO (TxBody era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxBody era)
 -&gt; ExceptT TxCmdError IO (TxBody era))
-&gt; Either TxCmdError (TxBody era)
-&gt; ExceptT TxCmdError IO (TxBody era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-717"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; Lovelace
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; Maybe (LedgerProtocolParameters era)
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBody era)
forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; Lovelace
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; Maybe (LedgerProtocolParameters era)
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBody era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTxBuildRaw"><span class="hs-identifier hs-var">runTxBuildRaw</span></a></span><span>
</span><span id="line-718"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span>
</span><span id="line-719"></span><span>          </span><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147180"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span>
</span><span id="line-720"></span><span>          </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147226"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-721"></span><span>          </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147184"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-722"></span><span>          </span><span class="annot"><span class="annottext">[Item (Set TxIn)]
[TxIn]
</span><a href="#local-6989586621682147244"><span class="hs-identifier hs-var">filteredTxinsc</span></a></span><span>
</span><span id="line-723"></span><span>          </span><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147242"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span>
</span><span id="line-724"></span><span>          </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147190"><span class="hs-identifier hs-var">mTotalCollateral</span></a></span><span>
</span><span id="line-725"></span><span>          </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147243"><span class="hs-identifier hs-var">txOuts</span></a></span><span>
</span><span id="line-726"></span><span>          </span><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147198"><span class="hs-identifier hs-var">mValidityLowerBound</span></a></span><span>
</span><span id="line-727"></span><span>          </span><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147200"><span class="hs-identifier hs-var">mValidityUpperBound</span></a></span><span>
</span><span id="line-728"></span><span>          </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147202"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-729"></span><span>          </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147232"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span>
</span><span id="line-730"></span><span>          </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147249"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-731"></span><span>          </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147228"><span class="hs-identifier hs-var">withdrawalsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-732"></span><span>          </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147241"><span class="hs-identifier hs-var">requiredSigners</span></a></span><span>
</span><span id="line-733"></span><span>          </span><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147234"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span>
</span><span id="line-734"></span><span>          </span><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147229"><span class="hs-identifier hs-var">txMetadata</span></a></span><span>
</span><span id="line-735"></span><span>          </span><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
</span><a href="#local-6989586621682147237"><span class="hs-identifier hs-var">mLedgerPParams</span></a></span><span>
</span><span id="line-736"></span><span>          </span><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147238"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span><span>
</span><span id="line-737"></span><span>          </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147245"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span><span>
</span><span id="line-738"></span><span>          </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147248"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-739"></span><span>          </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147222"><span class="hs-identifier hs-var">currentTreasuryValueAndDonation</span></a></span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147261"><span class="annot"><span class="annottext">noWitTx :: Tx era
</span><a href="#local-6989586621682147261"><span class="hs-identifier hs-var hs-var">noWitTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; TxBody era -&gt; Tx era
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><span class="hs-identifier hs-var">makeSignedTransaction</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147259"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-742"></span><span>    </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBodyFile 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
forall era content.
ShelleyBasedEra era
-&gt; File content 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147178"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyFile 'Out
</span><a href="#local-6989586621682147224"><span class="hs-identifier hs-var">txBodyOutFile</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147261"><span class="hs-identifier hs-var">noWitTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>      </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; (ExceptT TxCmdError IO (Either (FileError ()) ())
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FileError () -&gt; TxCmdError)
-&gt; FileError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span id="local-6989586621682145841"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTxBuildRaw"><span class="hs-identifier hs-type">runTxBuildRaw</span></a></span><span>
</span><span id="line-746"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-747"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-748"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptValidity</span></span><span>
</span><span id="line-749"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Mark script as expected to pass or fail validation</span></span><span>
</span><span id="line-750"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-751"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TxIn with potential script witness</span></span><span>
</span><span id="line-752"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-753"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Read only reference inputs</span></span><span>
</span><span id="line-754"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-755"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TxIn for collateral</span></span><span>
</span><span id="line-756"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Return collateral</span></span><span>
</span><span id="line-758"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-759"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Total collateral</span></span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-761"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-slotting-0.2.0.0-2c17b2a5f93d7d7597a8aa45cfb67bac7c08d58b89e65471c3ace1c6305ace2e/share/doc/html/src/Cardano.Slotting.Slot.html#SlotNo"><span class="hs-identifier hs-type">SlotNo</span></a></span><span>
</span><span id="line-762"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx lower bound</span></span><span>
</span><span id="line-763"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxValidityUpperBound</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-764"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx upper bound</span></span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-766"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx fee</span></span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#MintScriptWitnessWithPolicyId"><span class="hs-identifier hs-type">MintScriptWitnessWithPolicyId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Multi-Asset value(s)</span></span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Certificate with potential script witness</span></span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-772"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Hash</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKey</span></span><span class="hs-special">]</span><span>
</span><span id="line-773"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Required signers</span></span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxAuxScripts</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxMetadataInEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-776"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerProtocolParameters</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxUpdateProposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-778"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VotingProcedures</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-779"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Proposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-780"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxCurrentTreasuryValue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxTreasuryDonation"><span class="hs-identifier hs-type">TxTreasuryDonation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxBody</span></span><span> </span><span class="annot"><a href="#local-6989586621682145841"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-782"></span><span id="runTxBuildRaw"><span class="annot"><span class="annottext">runTxBuildRaw :: forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; Lovelace
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; Maybe (LedgerProtocolParameters era)
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBody era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTxBuildRaw"><span class="hs-identifier hs-var hs-var">runTxBuildRaw</span></a></span></span><span>
</span><span id="line-783"></span><span>  </span><span id="local-6989586621682147266"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147266"><span class="hs-identifier hs-var">sbe</span></a></span></span><span>
</span><span id="line-784"></span><span>  </span><span id="local-6989586621682147267"><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147267"><span class="hs-identifier hs-var">mScriptValidity</span></a></span></span><span>
</span><span id="line-785"></span><span>  </span><span id="local-6989586621682147268"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147268"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span></span><span>
</span><span id="line-786"></span><span>  </span><span id="local-6989586621682147269"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147269"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span></span><span>
</span><span id="line-787"></span><span>  </span><span id="local-6989586621682147270"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147270"><span class="hs-identifier hs-var">txinsc</span></a></span></span><span>
</span><span id="line-788"></span><span>  </span><span id="local-6989586621682147271"><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147271"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span></span><span>
</span><span id="line-789"></span><span>  </span><span id="local-6989586621682147272"><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147272"><span class="hs-identifier hs-var">mTotCollateral</span></a></span></span><span>
</span><span id="line-790"></span><span>  </span><span id="local-6989586621682147273"><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147273"><span class="hs-identifier hs-var">txouts</span></a></span></span><span>
</span><span id="line-791"></span><span>  </span><span id="local-6989586621682147274"><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147274"><span class="hs-identifier hs-var">mLowerBound</span></a></span></span><span>
</span><span id="line-792"></span><span>  </span><span id="local-6989586621682147275"><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147275"><span class="hs-identifier hs-var">mUpperBound</span></a></span></span><span>
</span><span id="line-793"></span><span>  </span><span id="local-6989586621682147276"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147276"><span class="hs-identifier hs-var">fee</span></a></span></span><span>
</span><span id="line-794"></span><span>  </span><span id="local-6989586621682147277"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147277"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span></span><span>
</span><span id="line-795"></span><span>  </span><span id="local-6989586621682147278"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147278"><span class="hs-identifier hs-var">certsAndMaybeSriptWits</span></a></span></span><span>
</span><span id="line-796"></span><span>  </span><span id="local-6989586621682147279"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147279"><span class="hs-identifier hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-797"></span><span>  </span><span id="local-6989586621682147280"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147280"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span>
</span><span id="line-798"></span><span>  </span><span id="local-6989586621682147281"><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147281"><span class="hs-identifier hs-var">txAuxScripts</span></a></span></span><span>
</span><span id="line-799"></span><span>  </span><span id="local-6989586621682147282"><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147282"><span class="hs-identifier hs-var">txMetadata</span></a></span></span><span>
</span><span id="line-800"></span><span>  </span><span id="local-6989586621682147283"><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
</span><a href="#local-6989586621682147283"><span class="hs-identifier hs-var">mpparams</span></a></span></span><span>
</span><span id="line-801"></span><span>  </span><span id="local-6989586621682147284"><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147284"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span></span><span>
</span><span id="line-802"></span><span>  </span><span id="local-6989586621682147285"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147285"><span class="hs-identifier hs-var">votingProcedures</span></a></span></span><span>
</span><span id="line-803"></span><span>  </span><span id="local-6989586621682147286"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147286"><span class="hs-identifier hs-var">proposals</span></a></span></span><span>
</span><span id="line-804"></span><span>  </span><span id="local-6989586621682147287"><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147287"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-805"></span><span>    </span><span id="local-6989586621682147288"><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682147288"><span class="hs-identifier hs-var">txBodyContent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-806"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#constructTxBodyContent"><span class="hs-identifier hs-var">constructTxBodyContent</span></a></span><span>
</span><span id="line-807"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147266"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-808"></span><span>        </span><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147267"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span>
</span><span id="line-809"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerProtocolParameters era -&gt; PParams (ShelleyLedgerEra era)
forall era.
LedgerProtocolParameters era -&gt; PParams (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">unLedgerProtocolParameters</span></span><span> </span><span class="annot"><span class="annottext">(LedgerProtocolParameters era -&gt; PParams (ShelleyLedgerEra era))
-&gt; Maybe (LedgerProtocolParameters era)
-&gt; Maybe (PParams (ShelleyLedgerEra era))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
</span><a href="#local-6989586621682147283"><span class="hs-identifier hs-var">mpparams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>        </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147268"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-811"></span><span>        </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147269"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-812"></span><span>        </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147270"><span class="hs-identifier hs-var">txinsc</span></a></span><span>
</span><span id="line-813"></span><span>        </span><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147271"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span>
</span><span id="line-814"></span><span>        </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147272"><span class="hs-identifier hs-var">mTotCollateral</span></a></span><span>
</span><span id="line-815"></span><span>        </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147273"><span class="hs-identifier hs-var">txouts</span></a></span><span>
</span><span id="line-816"></span><span>        </span><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147274"><span class="hs-identifier hs-var">mLowerBound</span></a></span><span>
</span><span id="line-817"></span><span>        </span><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147275"><span class="hs-identifier hs-var">mUpperBound</span></a></span><span>
</span><span id="line-818"></span><span>        </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147277"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span>
</span><span id="line-819"></span><span>        </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147278"><span class="hs-identifier hs-var">certsAndMaybeSriptWits</span></a></span><span>
</span><span id="line-820"></span><span>        </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147279"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-821"></span><span>        </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147280"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-822"></span><span>        </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147276"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-823"></span><span>        </span><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147281"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span>
</span><span id="line-824"></span><span>        </span><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147282"><span class="hs-identifier hs-var">txMetadata</span></a></span><span>
</span><span id="line-825"></span><span>        </span><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147284"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span><span>
</span><span id="line-826"></span><span>        </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147285"><span class="hs-identifier hs-var">votingProcedures</span></a></span><span>
</span><span id="line-827"></span><span>        </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147286"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-828"></span><span>        </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147287"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span><span>
</span><span id="line-829"></span><span>
</span><span id="line-830"></span><span>    </span><span class="annot"><span class="annottext">(TxBodyError -&gt; TxCmdError)
-&gt; Either TxBodyError (TxBody era)
-&gt; Either TxCmdError (TxBody era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxBodyError"><span class="hs-identifier hs-var">TxCmdTxBodyError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxBodyError (TxBody era) -&gt; Either TxCmdError (TxBody era))
-&gt; Either TxBodyError (TxBody era)
-&gt; Either TxCmdError (TxBody era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBodyContent BuildTx era -&gt; Either TxBodyError (TxBody era)
forall era.
ShelleyBasedEra era
-&gt; TxBodyContent BuildTx era -&gt; Either TxBodyError (TxBody era)
</span><span class="hs-identifier hs-var">createTransactionBody</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147266"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682147288"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span>
</span><span id="line-831"></span><span>
</span><span id="line-832"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#constructTxBodyContent"><span class="hs-identifier hs-type">constructTxBodyContent</span></a></span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682145703"><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-834"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-835"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptValidity</span></span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">L.PParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-837"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-838"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TxIn with potential script witness</span></span><span>
</span><span id="line-839"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-840"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Read only reference inputs</span></span><span>
</span><span id="line-841"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-842"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TxIn for collateral</span></span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Return collateral</span></span><span>
</span><span id="line-845"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-846"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Total collateral</span></span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-848"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Normal outputs</span></span><span>
</span><span id="line-849"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-slotting-0.2.0.0-2c17b2a5f93d7d7597a8aa45cfb67bac7c08d58b89e65471c3ace1c6305ace2e/share/doc/html/src/Cardano.Slotting.Slot.html#SlotNo"><span class="hs-identifier hs-type">SlotNo</span></a></span><span>
</span><span id="line-850"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx lower bound</span></span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxValidityUpperBound</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-852"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx upper bound</span></span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#MintScriptWitnessWithPolicyId"><span class="hs-identifier hs-type">MintScriptWitnessWithPolicyId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Multi-Asset value(s)</span></span><span>
</span><span id="line-855"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-856"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Certificate with potential script witness</span></span><span>
</span><span id="line-857"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-858"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Withdrawals</span></span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Hash</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKey</span></span><span class="hs-special">]</span><span>
</span><span id="line-860"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Required signers</span></span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-862"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx fee</span></span><span>
</span><span id="line-863"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxAuxScripts</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-864"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxMetadataInEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-865"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxUpdateProposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-866"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VotingProcedures</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Proposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxCurrentTreasuryValue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxTreasuryDonation"><span class="hs-identifier hs-type">TxTreasuryDonation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>  </span><span class="hs-comment">-- ^ The current treasury value and the donation. This is a stop gap as the</span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-comment">-- semantics of the donation and treasury value depend on the script languages</span><span>
</span><span id="line-871"></span><span>  </span><span class="hs-comment">-- being used.</span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxBodyContent</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-873"></span><span id="constructTxBodyContent"><span class="annot"><span class="annottext">constructTxBodyContent :: forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#constructTxBodyContent"><span class="hs-identifier hs-var hs-var">constructTxBodyContent</span></a></span></span><span>
</span><span id="line-874"></span><span>  </span><span id="local-6989586621682147319"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span></span><span>
</span><span id="line-875"></span><span>  </span><span id="local-6989586621682147320"><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147320"><span class="hs-identifier hs-var">mScriptValidity</span></a></span></span><span>
</span><span id="line-876"></span><span>  </span><span id="local-6989586621682147321"><span class="annot"><span class="annottext">Maybe (PParams (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147321"><span class="hs-identifier hs-var">mPparams</span></a></span></span><span>
</span><span id="line-877"></span><span>  </span><span id="local-6989586621682147322"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147322"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span></span><span>
</span><span id="line-878"></span><span>  </span><span id="local-6989586621682147323"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147323"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span></span><span>
</span><span id="line-879"></span><span>  </span><span id="local-6989586621682147324"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147324"><span class="hs-identifier hs-var">txinsc</span></a></span></span><span>
</span><span id="line-880"></span><span>  </span><span id="local-6989586621682147325"><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147325"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span></span><span>
</span><span id="line-881"></span><span>  </span><span id="local-6989586621682147326"><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147326"><span class="hs-identifier hs-var">mTotCollateral</span></a></span></span><span>
</span><span id="line-882"></span><span>  </span><span id="local-6989586621682147327"><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147327"><span class="hs-identifier hs-var">txouts</span></a></span></span><span>
</span><span id="line-883"></span><span>  </span><span id="local-6989586621682147328"><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147328"><span class="hs-identifier hs-var">mLowerBound</span></a></span></span><span>
</span><span id="line-884"></span><span>  </span><span id="local-6989586621682147329"><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147329"><span class="hs-identifier hs-var">mUpperBound</span></a></span></span><span>
</span><span id="line-885"></span><span>  </span><span id="local-6989586621682147330"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147330"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span></span><span>
</span><span id="line-886"></span><span>  </span><span id="local-6989586621682147331"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147331"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span></span><span>
</span><span id="line-887"></span><span>  </span><span id="local-6989586621682147332"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147332"><span class="hs-identifier hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-888"></span><span>  </span><span id="local-6989586621682147333"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147333"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span>
</span><span id="line-889"></span><span>  </span><span id="local-6989586621682147334"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147334"><span class="hs-identifier hs-var">fee</span></a></span></span><span>
</span><span id="line-890"></span><span>  </span><span id="local-6989586621682147335"><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147335"><span class="hs-identifier hs-var">txAuxScripts</span></a></span></span><span>
</span><span id="line-891"></span><span>  </span><span id="local-6989586621682147336"><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147336"><span class="hs-identifier hs-var">txMetadata</span></a></span></span><span>
</span><span id="line-892"></span><span>  </span><span id="local-6989586621682147337"><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147337"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span></span><span>
</span><span id="line-893"></span><span>  </span><span id="local-6989586621682147338"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147338"><span class="hs-identifier hs-var">votingProcedures</span></a></span></span><span>
</span><span id="line-894"></span><span>  </span><span id="local-6989586621682147339"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147339"><span class="hs-identifier hs-var">proposals</span></a></span></span><span>
</span><span id="line-895"></span><span>  </span><span id="local-6989586621682147340"><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147340"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-896"></span><span>    </span><span class="hs-keyword">do</span><span>
</span><span id="line-897"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147341"><span class="annot"><span class="annottext">allReferenceInputs :: [TxIn]
</span><a href="#local-6989586621682147341"><span class="hs-identifier hs-var hs-var">allReferenceInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-898"></span><span>            </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
forall era.
[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getAllReferenceInputs"><span class="hs-identifier hs-var">getAllReferenceInputs</span></a></span><span>
</span><span id="line-899"></span><span>              </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147322"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-900"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era)
-&gt; [MintScriptWitnessWithPolicyId era]
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era
forall era.
MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era
</span><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#mswScriptWitness"><span class="hs-identifier hs-var">mswScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; [ScriptWitness WitCtxMint era])
-&gt; [MintScriptWitnessWithPolicyId era]
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
-&gt; [MintScriptWitnessWithPolicyId era]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147330"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span>              </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147331"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-902"></span><span>              </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147332"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-903"></span><span>              </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147338"><span class="hs-identifier hs-var">votingProcedures</span></a></span><span>
</span><span id="line-904"></span><span>              </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147339"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-905"></span><span>              </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147323"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span>      </span><span id="local-6989586621682147342"><span class="annot"><span class="annottext">TxInsCollateral era
</span><a href="#local-6989586621682147342"><span class="hs-identifier hs-var">validatedCollateralTxIns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [TxIn] -&gt; Either TxCmdError (TxInsCollateral era)
forall era.
ShelleyBasedEra era
-&gt; [TxIn] -&gt; Either TxCmdError (TxInsCollateral era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsCollateral"><span class="hs-identifier hs-var">validateTxInsCollateral</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147324"><span class="hs-identifier hs-var">txinsc</span></a></span><span>
</span><span id="line-908"></span><span>      </span><span id="local-6989586621682147344"><span class="annot"><span class="annottext">TxInsReference era
</span><a href="#local-6989586621682147344"><span class="hs-identifier hs-var">validatedRefInputs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [TxIn] -&gt; Either TxCmdError (TxInsReference era)
forall era.
ShelleyBasedEra era
-&gt; [TxIn] -&gt; Either TxCmdError (TxInsReference era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsReference"><span class="hs-identifier hs-var">validateTxInsReference</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147341"><span class="hs-identifier hs-var">allReferenceInputs</span></a></span><span>
</span><span id="line-909"></span><span>      </span><span id="local-6989586621682147346"><span class="annot"><span class="annottext">TxTotalCollateral era
</span><a href="#local-6989586621682147346"><span class="hs-identifier hs-var">validatedTotCollateral</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-910"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxTotalCollateral era)
-&gt; Either TxCmdError (TxTotalCollateral era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (TxNotSupportedInEraValidationError era) (TxTotalCollateral era)
 -&gt; Either TxCmdError (TxTotalCollateral era))
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxTotalCollateral era)
-&gt; Either TxCmdError (TxTotalCollateral era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe Lovelace
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxTotalCollateral era)
forall era.
ShelleyBasedEra era
-&gt; Maybe Lovelace
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxTotalCollateral era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxTotalCollateral"><span class="hs-identifier hs-var">validateTxTotalCollateral</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147326"><span class="hs-identifier hs-var">mTotCollateral</span></a></span><span>
</span><span id="line-911"></span><span>      </span><span id="local-6989586621682147349"><span class="annot"><span class="annottext">TxReturnCollateral CtxTx era
</span><a href="#local-6989586621682147349"><span class="hs-identifier hs-var">validatedRetCol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-912"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (TxReturnCollateral CtxTx era)
-&gt; Either TxCmdError (TxReturnCollateral CtxTx era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (TxNotSupportedInEraValidationError era)
   (TxReturnCollateral CtxTx era)
 -&gt; Either TxCmdError (TxReturnCollateral CtxTx era))
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (TxReturnCollateral CtxTx era)
-&gt; Either TxCmdError (TxReturnCollateral CtxTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe (TxOut CtxTx era)
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (TxReturnCollateral CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; Maybe (TxOut CtxTx era)
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (TxReturnCollateral CtxTx era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxReturnCollateral"><span class="hs-identifier hs-var">validateTxReturnCollateral</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147325"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span>
</span><span id="line-913"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147351"><span class="annot"><span class="annottext">txFee :: TxFee era
</span><a href="#local-6989586621682147351"><span class="hs-identifier hs-var hs-var">txFee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; Lovelace -&gt; TxFee era
forall era. ShelleyBasedEra era -&gt; Lovelace -&gt; TxFee era
</span><span class="hs-identifier hs-var">TxFeeExplicit</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147334"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-914"></span><span>      </span><span id="local-6989586621682147353"><span class="annot"><span class="annottext">TxValidityLowerBound era
</span><a href="#local-6989586621682147353"><span class="hs-identifier hs-var">validatedLowerBound</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-915"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxValidityLowerBound era)
-&gt; Either TxCmdError (TxValidityLowerBound era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (TxNotSupportedInEraValidationError era) (TxValidityLowerBound era)
 -&gt; Either TxCmdError (TxValidityLowerBound era))
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxValidityLowerBound era)
-&gt; Either TxCmdError (TxValidityLowerBound era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe SlotNo
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxValidityLowerBound era)
forall era.
ShelleyBasedEra era
-&gt; Maybe SlotNo
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxValidityLowerBound era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxValidityLowerBound"><span class="hs-identifier hs-var">validateTxValidityLowerBound</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147328"><span class="hs-identifier hs-var">mLowerBound</span></a></span><span>
</span><span id="line-916"></span><span>      </span><span id="local-6989586621682147355"><span class="annot"><span class="annottext">TxExtraKeyWitnesses era
</span><a href="#local-6989586621682147355"><span class="hs-identifier hs-var">validatedReqSigners</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-917"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxExtraKeyWitnesses era)
-&gt; Either TxCmdError (TxExtraKeyWitnesses era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (TxNotSupportedInEraValidationError era) (TxExtraKeyWitnesses era)
 -&gt; Either TxCmdError (TxExtraKeyWitnesses era))
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxExtraKeyWitnesses era)
-&gt; Either TxCmdError (TxExtraKeyWitnesses era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [Hash PaymentKey]
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxExtraKeyWitnesses era)
forall era.
ShelleyBasedEra era
-&gt; [Hash PaymentKey]
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxExtraKeyWitnesses era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateRequiredSigners"><span class="hs-identifier hs-var">validateRequiredSigners</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147333"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-918"></span><span>      </span><span id="local-6989586621682147357"><span class="annot"><span class="annottext">TxMintValue BuildTx era
</span><a href="#local-6989586621682147357"><span class="hs-identifier hs-var">validatedMintValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; Either TxCmdError (TxMintValue BuildTx era)
forall era.
ShelleyBasedEra era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; Either TxCmdError (TxMintValue BuildTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#createTxMintValue"><span class="hs-identifier hs-var">createTxMintValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147330"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span>
</span><span id="line-919"></span><span>      </span><span id="local-6989586621682147359"><span class="annot"><span class="annottext">TxScriptValidity era
</span><a href="#local-6989586621682147359"><span class="hs-identifier hs-var">validatedTxScriptValidity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-920"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxScriptValidity era)
-&gt; Either TxCmdError (TxScriptValidity era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (TxNotSupportedInEraValidationError era) (TxScriptValidity era)
 -&gt; Either TxCmdError (TxScriptValidity era))
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxScriptValidity era)
-&gt; Either TxCmdError (TxScriptValidity era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxScriptValidity era)
forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Either
     (TxNotSupportedInEraValidationError era) (TxScriptValidity era)
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxScriptValidity"><span class="hs-identifier hs-var">validateTxScriptValidity</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147320"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span>
</span><span id="line-921"></span><span>      </span><span id="local-6989586621682147361"><span class="annot"><span class="annottext">TxVotingProcedures BuildTx era
</span><a href="#local-6989586621682147361"><span class="hs-identifier hs-var">validatedVotingProcedures</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-922"></span><span>        </span><span class="annot"><span class="annottext">(VotesMergingConflict era -&gt; TxCmdError)
-&gt; Either
     (VotesMergingConflict era) (TxVotingProcedures BuildTx era)
-&gt; Either TxCmdError (TxVotingProcedures BuildTx era)
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxGovDuplicateVotes era -&gt; TxCmdError
forall era. TxGovDuplicateVotes era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxGovDuplicateVotes"><span class="hs-identifier hs-var">TxCmdTxGovDuplicateVotes</span></a></span><span> </span><span class="annot"><span class="annottext">(TxGovDuplicateVotes era -&gt; TxCmdError)
-&gt; (VotesMergingConflict era -&gt; TxGovDuplicateVotes era)
-&gt; VotesMergingConflict era
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">VotesMergingConflict era -&gt; TxGovDuplicateVotes era
forall era. VotesMergingConflict era -&gt; TxGovDuplicateVotes era
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#TxGovDuplicateVotes"><span class="hs-identifier hs-var">TxGovDuplicateVotes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (VotesMergingConflict era) (TxVotingProcedures BuildTx era)
 -&gt; Either TxCmdError (TxVotingProcedures BuildTx era))
-&gt; Either
     (VotesMergingConflict era) (TxVotingProcedures BuildTx era)
-&gt; Either TxCmdError (TxVotingProcedures BuildTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-923"></span><span>          </span><span class="annot"><span class="annottext">forall build era.
Applicative (BuildTxWith build) =&gt;
[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Either (VotesMergingConflict era) (TxVotingProcedures build era)
</span><span class="hs-identifier hs-var">mkTxVotingProcedures</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Item
   [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
[Item
   [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]]
</span><a href="#local-6989586621682147338"><span class="hs-identifier hs-var">votingProcedures</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-924"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147365"><span class="annot"><span class="annottext">txProposals :: Maybe
  (Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era))
</span><a href="#local-6989586621682147365"><span class="hs-identifier hs-var hs-var">txProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ConwayEraOnwards era
    -&gt; Featured
         ConwayEraOnwards era (TxProposalProcedures BuildTx era))
-&gt; Maybe
     (Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era))
forall (eon :: * -&gt; *) era a.
Eon eon =&gt;
ShelleyBasedEra era -&gt; (eon era -&gt; a) -&gt; Maybe a
</span><span class="hs-identifier hs-var">forShelleyBasedEraInEonMaybe</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwards era
  -&gt; Featured
       ConwayEraOnwards era (TxProposalProcedures BuildTx era))
 -&gt; Maybe
      (Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era)))
-&gt; (ConwayEraOnwards era
    -&gt; Featured
         ConwayEraOnwards era (TxProposalProcedures BuildTx era))
-&gt; Maybe
     (Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147367"><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147367"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-925"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682147368"><span class="hs-identifier hs-type">txp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxProposalProcedures</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-926"></span><span>                </span><span id="local-6989586621682147368"><span class="annot"><span class="annottext">txp :: TxProposalProcedures BuildTx era
</span><a href="#local-6989586621682147368"><span class="hs-identifier hs-var hs-var">txp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    TxProposalProcedures BuildTx era)
-&gt; TxProposalProcedures BuildTx era
forall era a.
ConwayEraOnwards era -&gt; (ConwayEraOnwardsConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">conwayEraOnwardsConstraints</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147367"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayEraOnwardsConstraints era =&gt;
  TxProposalProcedures BuildTx era)
 -&gt; TxProposalProcedures BuildTx era)
-&gt; (ConwayEraOnwardsConstraints era =&gt;
    TxProposalProcedures BuildTx era)
-&gt; TxProposalProcedures BuildTx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(ProposalProcedure (ShelleyLedgerEra era),
  Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxProposalProcedures BuildTx era
forall era build.
(Applicative (BuildTxWith build), IsShelleyBasedEra era) =&gt;
[(ProposalProcedure (ShelleyLedgerEra era),
  Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxProposalProcedures build era
</span><span class="hs-identifier hs-var">mkTxProposalProcedures</span></span><span> </span><span class="annot"><span class="annottext">([(ProposalProcedure (ShelleyLedgerEra era),
   Maybe (ScriptWitness WitCtxStake era))]
 -&gt; TxProposalProcedures BuildTx era)
-&gt; [(ProposalProcedure (ShelleyLedgerEra era),
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxProposalProcedures BuildTx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Proposal era, Maybe (ScriptWitness WitCtxStake era))
 -&gt; (ProposalProcedure (ShelleyLedgerEra era),
     Maybe (ScriptWitness WitCtxStake era)))
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(ProposalProcedure (ShelleyLedgerEra era),
     Maybe (ScriptWitness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Proposal era -&gt; ProposalProcedure (ShelleyLedgerEra era))
-&gt; (Proposal era, Maybe (ScriptWitness WitCtxStake era))
-&gt; (ProposalProcedure (ShelleyLedgerEra era),
    Maybe (ScriptWitness WitCtxStake era))
forall a b c. (a -&gt; b) -&gt; (a, c) -&gt; (b, c)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">Proposal era -&gt; ProposalProcedure (ShelleyLedgerEra era)
forall era.
Proposal era -&gt; ProposalProcedure (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">unProposal</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147339"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-927"></span><span>            </span><span class="annot"><span class="annottext">ConwayEraOnwards era
-&gt; TxProposalProcedures BuildTx era
-&gt; Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era)
forall (eon :: * -&gt; *) era a. eon era -&gt; a -&gt; Featured eon era a
</span><span class="hs-identifier hs-var">Featured</span></span><span> </span><span class="annot"><span class="annottext">ConwayEraOnwards era
</span><a href="#local-6989586621682147367"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">TxProposalProcedures BuildTx era
</span><a href="#local-6989586621682147368"><span class="hs-identifier hs-var">txp</span></a></span><span>
</span><span id="line-928"></span><span>      </span><span id="local-6989586621682147377"><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era (Maybe Lovelace))
</span><a href="#local-6989586621682147377"><span class="hs-identifier hs-var">validatedCurrentTreasuryValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-929"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (Maybe (Featured ConwayEraOnwards era (Maybe Lovelace)))
-&gt; Either
     TxCmdError (Maybe (Featured ConwayEraOnwards era (Maybe Lovelace)))
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span>
</span><span id="line-930"></span><span>          </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span>
</span><span id="line-931"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe TxCurrentTreasuryValue
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (Maybe (Featured ConwayEraOnwards era (Maybe Lovelace)))
forall era.
ShelleyBasedEra era
-&gt; Maybe TxCurrentTreasuryValue
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (Maybe (Featured ConwayEraOnwards era (Maybe Lovelace)))
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxCurrentTreasuryValue"><span class="hs-identifier hs-var">validateTxCurrentTreasuryValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; TxCurrentTreasuryValue
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((TxCurrentTreasuryValue, TxTreasuryDonation)
 -&gt; TxCurrentTreasuryValue)
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Maybe TxCurrentTreasuryValue
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147340"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-932"></span><span>      </span><span id="local-6989586621682147379"><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era Lovelace)
</span><a href="#local-6989586621682147379"><span class="hs-identifier hs-var">validatedTreasuryDonation</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-933"></span><span>        </span><span class="annot"><span class="annottext">(TxNotSupportedInEraValidationError era -&gt; TxCmdError)
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (Maybe (Featured ConwayEraOnwards era Lovelace))
-&gt; Either
     TxCmdError (Maybe (Featured ConwayEraOnwards era Lovelace))
forall a b c. (a -&gt; b) -&gt; Either a c -&gt; Either b c
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span>
</span><span id="line-934"></span><span>          </span><span class="annot"><span class="annottext">TxNotSupportedInEraValidationError era -&gt; TxCmdError
forall era. TxNotSupportedInEraValidationError era -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdNotSupportedInEraValidationError"><span class="hs-identifier hs-var">TxCmdNotSupportedInEraValidationError</span></a></span><span>
</span><span id="line-935"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe TxTreasuryDonation
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (Maybe (Featured ConwayEraOnwards era Lovelace))
forall era.
ShelleyBasedEra era
-&gt; Maybe TxTreasuryDonation
-&gt; Either
     (TxNotSupportedInEraValidationError era)
     (Maybe (Featured ConwayEraOnwards era Lovelace))
</span><a href="Cardano.CLI.Types.Errors.TxValidationError.html#validateTxTreasuryDonation"><span class="hs-identifier hs-var">validateTxTreasuryDonation</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxCurrentTreasuryValue, TxTreasuryDonation) -&gt; TxTreasuryDonation
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((TxCurrentTreasuryValue, TxTreasuryDonation)
 -&gt; TxTreasuryDonation)
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Maybe TxTreasuryDonation
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147340"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-936"></span><span>      </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBodyContent BuildTx era
 -&gt; Either TxCmdError (TxBodyContent BuildTx era))
-&gt; TxBodyContent BuildTx era
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-937"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ShelleyBasedEraConstraints era =&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall era a.
ShelleyBasedEra era -&gt; (ShelleyBasedEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyBasedEraConstraints</span></span><span>
</span><span id="line-938"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-939"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; TxBodyContent BuildTx era
forall era. ShelleyBasedEra era -&gt; TxBodyContent BuildTx era
</span><span class="hs-identifier hs-var">defaultTxBodyContent</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-940"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxIns BuildTx era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall build era.
TxIns build era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxIns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))] -&gt; TxIns BuildTx era
forall era.
[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era))]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxIns"><span class="hs-identifier hs-var">validateTxIns</span></a></span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147322"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxInsCollateral era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxInsCollateral era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxInsCollateral</span></span><span> </span><span class="annot"><span class="annottext">TxInsCollateral era
</span><a href="#local-6989586621682147342"><span class="hs-identifier hs-var">validatedCollateralTxIns</span></a></span><span>
</span><span id="line-942"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxInsReference era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxInsReference era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxInsReference</span></span><span> </span><span class="annot"><span class="annottext">TxInsReference era
</span><a href="#local-6989586621682147344"><span class="hs-identifier hs-var">validatedRefInputs</span></a></span><span>
</span><span id="line-943"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
[TxOut CtxTx era]
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxOuts</span></span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147327"><span class="hs-identifier hs-var">txouts</span></a></span><span>
</span><span id="line-944"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxTotalCollateral era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxTotalCollateral era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxTotalCollateral</span></span><span> </span><span class="annot"><span class="annottext">TxTotalCollateral era
</span><a href="#local-6989586621682147346"><span class="hs-identifier hs-var">validatedTotCollateral</span></a></span><span>
</span><span id="line-945"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxReturnCollateral CtxTx era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxReturnCollateral CtxTx era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxReturnCollateral</span></span><span> </span><span class="annot"><span class="annottext">TxReturnCollateral CtxTx era
</span><a href="#local-6989586621682147349"><span class="hs-identifier hs-var">validatedRetCol</span></a></span><span>
</span><span id="line-946"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxFee era -&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxFee era -&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxFee</span></span><span> </span><span class="annot"><span class="annottext">TxFee era
</span><a href="#local-6989586621682147351"><span class="hs-identifier hs-var">txFee</span></a></span><span>
</span><span id="line-947"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityLowerBound era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxValidityLowerBound era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxValidityLowerBound</span></span><span> </span><span class="annot"><span class="annottext">TxValidityLowerBound era
</span><a href="#local-6989586621682147353"><span class="hs-identifier hs-var">validatedLowerBound</span></a></span><span>
</span><span id="line-948"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxValidityUpperBound era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxValidityUpperBound</span></span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147329"><span class="hs-identifier hs-var">mUpperBound</span></a></span><span>
</span><span id="line-949"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxMetadataInEra era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxMetadataInEra era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxMetadata</span></span><span> </span><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147336"><span class="hs-identifier hs-var">txMetadata</span></a></span><span>
</span><span id="line-950"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxScripts era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxAuxScripts era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxAuxScripts</span></span><span> </span><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147335"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span>
</span><span id="line-951"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxExtraKeyWitnesses era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxExtraKeyWitnesses era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxExtraKeyWits</span></span><span> </span><span class="annot"><span class="annottext">TxExtraKeyWitnesses era
</span><a href="#local-6989586621682147355"><span class="hs-identifier hs-var">validatedReqSigners</span></a></span><span>
</span><span id="line-952"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">BuildTxWith BuildTx (Maybe (LedgerProtocolParameters era))
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall build era.
BuildTxWith build (Maybe (LedgerProtocolParameters era))
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxProtocolParams</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (LedgerProtocolParameters era)
-&gt; BuildTxWith BuildTx (Maybe (LedgerProtocolParameters era))
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (LedgerProtocolParameters era)
 -&gt; BuildTxWith BuildTx (Maybe (LedgerProtocolParameters era)))
-&gt; Maybe (LedgerProtocolParameters era)
-&gt; BuildTxWith BuildTx (Maybe (LedgerProtocolParameters era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era) -&gt; LedgerProtocolParameters era
forall era.
PParams (ShelleyLedgerEra era) -&gt; LedgerProtocolParameters era
</span><span class="hs-identifier hs-var">LedgerProtocolParameters</span></span><span> </span><span class="annot"><span class="annottext">(PParams (ShelleyLedgerEra era) -&gt; LedgerProtocolParameters era)
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; Maybe (LedgerProtocolParameters era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (PParams (ShelleyLedgerEra era))
</span><a href="#local-6989586621682147321"><span class="hs-identifier hs-var">mPparams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-953"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxWithdrawals BuildTx era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall build era.
TxWithdrawals build era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxWithdrawals</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(StakeAddress, Lovelace,
     BuildTxWith BuildTx (Witness WitCtxStake era))]
-&gt; TxWithdrawals BuildTx era
forall era build.
ShelleyBasedEra era
-&gt; [(StakeAddress, Lovelace,
     BuildTxWith build (Witness WitCtxStake era))]
-&gt; TxWithdrawals build era
</span><span class="hs-identifier hs-var">TxWithdrawals</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">([(StakeAddress, Lovelace,
   BuildTxWith BuildTx (Witness WitCtxStake era))]
 -&gt; TxWithdrawals BuildTx era)
-&gt; [(StakeAddress, Lovelace,
     BuildTxWith BuildTx (Witness WitCtxStake era))]
-&gt; TxWithdrawals BuildTx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))
 -&gt; (StakeAddress, Lovelace,
     BuildTxWith BuildTx (Witness WitCtxStake era)))
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     BuildTxWith BuildTx (Witness WitCtxStake era))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))
-&gt; (StakeAddress, Lovelace,
    BuildTxWith BuildTx (Witness WitCtxStake era))
</span><a href="#local-6989586621682147403"><span class="hs-identifier hs-var">convertWithdrawals</span></a></span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147332"><span class="hs-identifier hs-var">withdrawals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxCertificates BuildTx era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall build era.
TxCertificates build era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxCertificates</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxCertificates BuildTx era
forall era.
ShelleyBasedEra era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxCertificates BuildTx era
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#convertCertificates"><span class="hs-identifier hs-var">convertCertificates</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147319"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147331"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxUpdateProposal era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxUpdateProposal</span></span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147337"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span><span>
</span><span id="line-956"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall build era.
TxMintValue build era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxMintValue</span></span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx era
</span><a href="#local-6989586621682147357"><span class="hs-identifier hs-var">validatedMintValue</span></a></span><span>
</span><span id="line-957"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity era
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
TxScriptValidity era
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxScriptValidity</span></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity era
</span><a href="#local-6989586621682147359"><span class="hs-identifier hs-var">validatedTxScriptValidity</span></a></span><span>
</span><span id="line-958"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Featured ConwayEraOnwards era (TxVotingProcedures BuildTx era))
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
Maybe
  (Featured ConwayEraOnwards era (TxVotingProcedures build era))
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxVotingProcedures</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxVotingProcedures BuildTx era
-&gt; Maybe
     (Featured ConwayEraOnwards era (TxVotingProcedures BuildTx era))
forall (eon :: * -&gt; *) era a.
(IsCardanoEra era, Eon eon) =&gt;
a -&gt; Maybe (Featured eon era a)
</span><span class="hs-identifier hs-var">mkFeatured</span></span><span> </span><span class="annot"><span class="annottext">TxVotingProcedures BuildTx era
</span><a href="#local-6989586621682147361"><span class="hs-identifier hs-var">validatedVotingProcedures</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-959"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era))
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
Maybe
  (Featured ConwayEraOnwards era (TxProposalProcedures build era))
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxProposalProcedures</span></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Featured ConwayEraOnwards era (TxProposalProcedures BuildTx era))
</span><a href="#local-6989586621682147365"><span class="hs-identifier hs-var">txProposals</span></a></span><span>
</span><span id="line-960"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era (Maybe Lovelace))
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
Maybe (Featured ConwayEraOnwards era (Maybe Lovelace))
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxCurrentTreasuryValue</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era (Maybe Lovelace))
</span><a href="#local-6989586621682147377"><span class="hs-identifier hs-var">validatedCurrentTreasuryValue</span></a></span><span>
</span><span id="line-961"></span><span>              </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
-&gt; (TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era)
-&gt; TxBodyContent BuildTx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era Lovelace)
-&gt; TxBodyContent BuildTx era -&gt; TxBodyContent BuildTx era
forall era build.
Maybe (Featured ConwayEraOnwards era Lovelace)
-&gt; TxBodyContent build era -&gt; TxBodyContent build era
</span><span class="hs-identifier hs-var">setTxTreasuryDonation</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era Lovelace)
</span><a href="#local-6989586621682147379"><span class="hs-identifier hs-var">validatedTreasuryDonation</span></a></span><span>
</span><span id="line-962"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-963"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-964"></span><span>    </span><span class="annot"><a href="#local-6989586621682147403"><span class="hs-identifier hs-type">convertWithdrawals</span></a></span><span>
</span><span id="line-965"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-966"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTxWith</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Witness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>    </span><span id="local-6989586621682147403"><span class="annot"><span class="annottext">convertWithdrawals :: (StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))
-&gt; (StakeAddress, Lovelace,
    BuildTxWith BuildTx (Witness WitCtxStake era))
</span><a href="#local-6989586621682147403"><span class="hs-identifier hs-var hs-var">convertWithdrawals</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147414"><span class="annot"><span class="annottext">StakeAddress
</span><a href="#local-6989586621682147414"><span class="hs-identifier hs-var">sAddr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147415"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147415"><span class="hs-identifier hs-var">ll</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147416"><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682147416"><span class="hs-identifier hs-var">mScriptWitnessFiles</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-968"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682147416"><span class="hs-identifier hs-var">mScriptWitnessFiles</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-969"></span><span>        </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147417"><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147417"><span class="hs-identifier hs-var">sWit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeAddress
</span><a href="#local-6989586621682147414"><span class="hs-identifier hs-var">sAddr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147415"><span class="hs-identifier hs-var">ll</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Witness WitCtxStake era
-&gt; BuildTxWith BuildTx (Witness WitCtxStake era)
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxStake era
 -&gt; BuildTxWith BuildTx (Witness WitCtxStake era))
-&gt; Witness WitCtxStake era
-&gt; BuildTxWith BuildTx (Witness WitCtxStake era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxStake
-&gt; ScriptWitness WitCtxStake era -&gt; Witness WitCtxStake era
forall witctx era.
ScriptWitnessInCtx witctx
-&gt; ScriptWitness witctx era -&gt; Witness witctx era
</span><span class="hs-identifier hs-var">ScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxStake
</span><span class="hs-identifier hs-var">ScriptWitnessForStakeAddr</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147417"><span class="hs-identifier hs-var">sWit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-970"></span><span>        </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeAddress
</span><a href="#local-6989586621682147414"><span class="hs-identifier hs-var">sAddr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147415"><span class="hs-identifier hs-var">ll</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Witness WitCtxStake era
-&gt; BuildTxWith BuildTx (Witness WitCtxStake era)
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxStake era
 -&gt; BuildTxWith BuildTx (Witness WitCtxStake era))
-&gt; Witness WitCtxStake era
-&gt; BuildTxWith BuildTx (Witness WitCtxStake era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxStake -&gt; Witness WitCtxStake era
forall witctx era. KeyWitnessInCtx witctx -&gt; Witness witctx era
</span><span class="hs-identifier hs-var">KeyWitness</span></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxStake
</span><span class="hs-identifier hs-var">KeyWitnessForStakeAddr</span></span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span id="local-6989586621682145602"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTxBuild"><span class="hs-identifier hs-type">runTxBuild</span></a></span><span>
</span><span id="line-973"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-974"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SocketPath</span></span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span>
</span><span id="line-977"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptValidity</span></span><span>
</span><span id="line-978"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Mark script as expected to pass or fail validation</span></span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-980"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Read only reference inputs</span></span><span>
</span><span id="line-981"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-982"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TxIn with potential script witness</span></span><span>
</span><span id="line-983"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-984"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TxIn for collateral</span></span><span>
</span><span id="line-985"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-986"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Return collateral</span></span><span>
</span><span id="line-987"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-988"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Total collateral</span></span><span>
</span><span id="line-989"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-990"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Normal outputs</span></span><span>
</span><span id="line-991"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutChangeAddress"><span class="hs-identifier hs-type">TxOutChangeAddress</span></a></span><span>
</span><span id="line-992"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ A change output</span></span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#MintScriptWitnessWithPolicyId"><span class="hs-identifier hs-type">MintScriptWitnessWithPolicyId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-994"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Multi-Asset value(s)</span></span><span>
</span><span id="line-995"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-slotting-0.2.0.0-2c17b2a5f93d7d7597a8aa45cfb67bac7c08d58b89e65471c3ace1c6305ace2e/share/doc/html/src/Cardano.Slotting.Slot.html#SlotNo"><span class="hs-identifier hs-type">SlotNo</span></a></span><span>
</span><span id="line-996"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx lower bound</span></span><span>
</span><span id="line-997"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxValidityUpperBound</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-998"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Tx upper bound</span></span><span>
</span><span id="line-999"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1000"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Certificate with potential script witness</span></span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Hash</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKey</span></span><span class="hs-special">]</span><span>
</span><span id="line-1003"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Required signers</span></span><span>
</span><span id="line-1004"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxAuxScripts</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1005"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxMetadataInEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1006"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxUpdateProposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1007"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span>
</span><span id="line-1008"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VotingProcedures</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Proposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1010"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxCurrentTreasuryValue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxTreasuryDonation"><span class="hs-identifier hs-type">TxTreasuryDonation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The current treasury value and the donation.</span></span><span>
</span><span id="line-1012"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BalancedTxBody</span></span><span> </span><span class="annot"><a href="#local-6989586621682145602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1013"></span><span id="runTxBuild"><span class="annot"><span class="annottext">runTxBuild :: forall era.
ShelleyBasedEra era
-&gt; SocketPath
-&gt; NetworkId
-&gt; Maybe ScriptValidity
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; TxOutChangeAddress
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; Maybe Word
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTxBuild"><span class="hs-identifier hs-var hs-var">runTxBuild</span></a></span></span><span>
</span><span id="line-1014"></span><span>  </span><span id="local-6989586621682147422"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147422"><span class="hs-identifier hs-var">sbe</span></a></span></span><span>
</span><span id="line-1015"></span><span>  </span><span id="local-6989586621682147423"><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621682147423"><span class="hs-identifier hs-var">socketPath</span></a></span></span><span>
</span><span id="line-1016"></span><span>  </span><span id="local-6989586621682147424"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682147424"><span class="hs-identifier hs-var">networkId</span></a></span></span><span>
</span><span id="line-1017"></span><span>  </span><span id="local-6989586621682147425"><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147425"><span class="hs-identifier hs-var">mScriptValidity</span></a></span></span><span>
</span><span id="line-1018"></span><span>  </span><span id="local-6989586621682147426"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147426"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span></span><span>
</span><span id="line-1019"></span><span>  </span><span id="local-6989586621682147427"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147427"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span></span><span>
</span><span id="line-1020"></span><span>  </span><span id="local-6989586621682147428"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147428"><span class="hs-identifier hs-var">txinsc</span></a></span></span><span>
</span><span id="line-1021"></span><span>  </span><span id="local-6989586621682147429"><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147429"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span></span><span>
</span><span id="line-1022"></span><span>  </span><span id="local-6989586621682147430"><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147430"><span class="hs-identifier hs-var">mTotCollateral</span></a></span></span><span>
</span><span id="line-1023"></span><span>  </span><span id="local-6989586621682147431"><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147431"><span class="hs-identifier hs-var">txouts</span></a></span></span><span>
</span><span id="line-1024"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutChangeAddress"><span class="hs-identifier hs-type">TxOutChangeAddress</span></a></span><span> </span><span id="local-6989586621682147432"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147432"><span class="hs-identifier hs-var">changeAddr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1025"></span><span>  </span><span id="local-6989586621682147433"><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147433"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span></span><span>
</span><span id="line-1026"></span><span>  </span><span id="local-6989586621682147434"><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147434"><span class="hs-identifier hs-var">mLowerBound</span></a></span></span><span>
</span><span id="line-1027"></span><span>  </span><span id="local-6989586621682147435"><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147435"><span class="hs-identifier hs-var">mUpperBound</span></a></span></span><span>
</span><span id="line-1028"></span><span>  </span><span id="local-6989586621682147436"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147436"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span></span><span>
</span><span id="line-1029"></span><span>  </span><span id="local-6989586621682147437"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147437"><span class="hs-identifier hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-1030"></span><span>  </span><span id="local-6989586621682147438"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147438"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span>
</span><span id="line-1031"></span><span>  </span><span id="local-6989586621682147439"><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147439"><span class="hs-identifier hs-var">txAuxScripts</span></a></span></span><span>
</span><span id="line-1032"></span><span>  </span><span id="local-6989586621682147440"><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147440"><span class="hs-identifier hs-var">txMetadata</span></a></span></span><span>
</span><span id="line-1033"></span><span>  </span><span id="local-6989586621682147441"><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147441"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span></span><span>
</span><span id="line-1034"></span><span>  </span><span id="local-6989586621682147442"><span class="annot"><span class="annottext">Maybe Word
</span><a href="#local-6989586621682147442"><span class="hs-identifier hs-var">mOverrideWits</span></a></span></span><span>
</span><span id="line-1035"></span><span>  </span><span id="local-6989586621682147443"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147443"><span class="hs-identifier hs-var">votingProcedures</span></a></span></span><span>
</span><span id="line-1036"></span><span>  </span><span id="local-6989586621682147444"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147444"><span class="hs-identifier hs-var">proposals</span></a></span></span><span>
</span><span id="line-1037"></span><span>  </span><span id="local-6989586621682147445"><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147445"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1038"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ShelleyBasedEraConstraints era =&gt;
    ExceptT TxCmdError IO (BalancedTxBody era))
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall era a.
ShelleyBasedEra era -&gt; (ShelleyBasedEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyBasedEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147422"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyBasedEraConstraints era =&gt;
  ExceptT TxCmdError IO (BalancedTxBody era))
 -&gt; ExceptT TxCmdError IO (BalancedTxBody era))
-&gt; (ShelleyBasedEraConstraints era =&gt;
    ExceptT TxCmdError IO (BalancedTxBody era))
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1039"></span><span>      </span><span class="hs-comment">-- TODO: All functions should be parameterized by ShelleyBasedEra</span><span>
</span><span id="line-1040"></span><span>      </span><span class="hs-comment">-- as it's not possible to call this function with ByronEra</span><span>
</span><span id="line-1041"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147457"><span class="annot"><span class="annottext">era :: CardanoEra era
</span><a href="#local-6989586621682147457"><span class="hs-identifier hs-var hs-var">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147422"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-1042"></span><span>          </span><span id="local-6989586621682147458"><span class="annot"><span class="annottext">inputsThatRequireWitnessing :: [TxIn]
</span><a href="#local-6989586621682147458"><span class="hs-identifier hs-var hs-var">inputsThatRequireWitnessing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147459"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147459"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147459"><span class="hs-identifier hs-var">input</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxTxIn era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147426"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147460"><span class="annot"><span class="annottext">allReferenceInputs :: [TxIn]
</span><a href="#local-6989586621682147460"><span class="hs-identifier hs-var hs-var">allReferenceInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1045"></span><span>            </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
forall era.
[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getAllReferenceInputs"><span class="hs-identifier hs-var">getAllReferenceInputs</span></a></span><span>
</span><span id="line-1046"></span><span>              </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147426"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-1047"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era)
-&gt; [MintScriptWitnessWithPolicyId era]
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era
forall era.
MintScriptWitnessWithPolicyId era -&gt; ScriptWitness WitCtxMint era
</span><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#mswScriptWitness"><span class="hs-identifier hs-var">mswScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">([MintScriptWitnessWithPolicyId era]
 -&gt; [ScriptWitness WitCtxMint era])
-&gt; [MintScriptWitnessWithPolicyId era]
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
-&gt; [MintScriptWitnessWithPolicyId era]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147433"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>              </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147436"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-1049"></span><span>              </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147437"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-1050"></span><span>              </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147443"><span class="hs-identifier hs-var">votingProcedures</span></a></span><span>
</span><span id="line-1051"></span><span>              </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147444"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-1052"></span><span>              </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147427"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-1053"></span><span>
</span><span id="line-1054"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147461"><span class="annot"><span class="annottext">allTxInputs :: [TxIn]
</span><a href="#local-6989586621682147461"><span class="hs-identifier hs-var hs-var">allTxInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147458"><span class="hs-identifier hs-var">inputsThatRequireWitnessing</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; [TxIn] -&gt; [TxIn]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147460"><span class="hs-identifier hs-var">allReferenceInputs</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; [TxIn] -&gt; [TxIn]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147428"><span class="hs-identifier hs-var">txinsc</span></a></span><span>
</span><span id="line-1055"></span><span>          </span><span id="local-6989586621682147462"><span class="annot"><span class="annottext">localNodeConnInfo :: LocalNodeConnectInfo
</span><a href="#local-6989586621682147462"><span class="hs-identifier hs-var hs-var">localNodeConnInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1056"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span>
</span><span id="line-1057"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">localConsensusModeParams :: ConsensusModeParams
</span><span class="hs-identifier hs-var">localConsensusModeParams</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochSlots -&gt; ConsensusModeParams
</span><span class="hs-identifier hs-var">CardanoModeParams</span></span><span> </span><span class="annot"><span class="annottext">(EpochSlots -&gt; ConsensusModeParams)
-&gt; EpochSlots -&gt; ConsensusModeParams
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; EpochSlots
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-byron-1.0.1.0-98754e61db8dbb991255b2504fc0babd4c3935ee177c95b582b9fd674e717bbb/share/doc/html/src/Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier hs-var">EpochSlots</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">21600</span></span><span>
</span><span id="line-1058"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localNodeNetworkId :: NetworkId
</span><span class="hs-identifier hs-var">localNodeNetworkId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682147424"><span class="hs-identifier hs-var">networkId</span></a></span><span>
</span><span id="line-1059"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localNodeSocketPath :: SocketPath
</span><span class="hs-identifier hs-var">localNodeSocketPath</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621682147423"><span class="hs-identifier hs-var">socketPath</span></a></span><span>
</span><span id="line-1060"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-1061"></span><span>
</span><span id="line-1062"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">AnyCardanoEra</span></span><span> </span><span id="local-6989586621682147469"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147469"><span class="hs-identifier hs-var">nodeEra</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1063"></span><span>        </span><span class="annot"><span class="annottext">IO
  (Either
     AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; IO
     (Either
        AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621682147462"><span class="hs-identifier hs-var">localNodeConnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalStateQuery.Type.html#VolatileTip"><span class="hs-identifier hs-var">Consensus.VolatileTip</span></a></span><span> </span><span class="annot"><span class="annottext">LocalStateQueryExpr
  BlockInMode
  ChainPoint
  QueryInMode
  ()
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
forall block point r.
LocalStateQueryExpr
  block
  point
  QueryInMode
  r
  IO
  (Either UnsupportedNtcVersionError AnyCardanoEra)
</span><span class="hs-identifier hs-var">queryCurrentEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-1064"></span><span>          </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
    -&gt; ExceptT
         TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(AcquiringFailure
 -&gt; ExceptT
      TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra))
-&gt; (AcquiringFailure -&gt; TxCmdError)
-&gt; AcquiringFailure
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (AcquiringFailure -&gt; QueryConvenienceError)
-&gt; AcquiringFailure
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">AcqFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span>          </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; (ExceptT
      TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
    -&gt; ExceptT TxCmdError IO AnyCardanoEra)
-&gt; ExceptT TxCmdError IO AnyCardanoEra
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnsupportedNtcVersionError -&gt; ExceptT TxCmdError IO AnyCardanoEra)
-&gt; ExceptT
     TxCmdError IO (Either UnsupportedNtcVersionError AnyCardanoEra)
-&gt; ExceptT TxCmdError IO AnyCardanoEra
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO AnyCardanoEra
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO AnyCardanoEra)
-&gt; (UnsupportedNtcVersionError -&gt; TxCmdError)
-&gt; UnsupportedNtcVersionError
-&gt; ExceptT TxCmdError IO AnyCardanoEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (UnsupportedNtcVersionError -&gt; QueryConvenienceError)
-&gt; UnsupportedNtcVersionError
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UnsupportedNtcVersionError -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">QceUnsupportedNtcVersion</span></span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>
</span><span id="line-1067"></span><span>      </span><span class="annot"><span class="annottext">era :~: era
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1068"></span><span>        </span><span class="annot"><span class="annottext">CardanoEra era -&gt; CardanoEra era -&gt; Maybe (era :~: era)
forall a b. CardanoEra a -&gt; CardanoEra b -&gt; Maybe (a :~: b)
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#testEquality"><span class="hs-identifier hs-var">testEquality</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147457"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147469"><span class="hs-identifier hs-var">nodeEra</span></a></span><span>
</span><span id="line-1069"></span><span>          </span><span class="annot"><span class="annottext">Maybe (era :~: era)
-&gt; (Maybe (era :~: era) -&gt; ExceptT TxCmdError IO (era :~: era))
-&gt; ExceptT TxCmdError IO (era :~: era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">TxCmdError
-&gt; Maybe (era :~: era) -&gt; ExceptT TxCmdError IO (era :~: era)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; Maybe a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeEraMismatchError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxNodeEraMismatchError"><span class="hs-identifier hs-var">TxCmdTxNodeEraMismatchError</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeEraMismatchError -&gt; TxCmdError)
-&gt; NodeEraMismatchError -&gt; TxCmdError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era -&gt; CardanoEra era -&gt; NodeEraMismatchError
forall era nodeEra.
CardanoEra era -&gt; CardanoEra nodeEra -&gt; NodeEraMismatchError
</span><a href="Cardano.CLI.Types.Errors.NodeEraMismatchError.html#NodeEraMismatchError"><span class="hs-identifier hs-var">NodeEraMismatchError</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147457"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147469"><span class="hs-identifier hs-var">nodeEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1070"></span><span>
</span><span id="line-1071"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147509"><span class="annot"><span class="annottext">certs :: [Certificate era]
</span><a href="#local-6989586621682147509"><span class="hs-identifier hs-var hs-var">certs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1072"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxCertificates BuildTx era
forall era.
ShelleyBasedEra era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxCertificates BuildTx era
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#convertCertificates"><span class="hs-identifier hs-var">convertCertificates</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147422"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147436"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1073"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">TxCertificates</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682147511"><span class="annot"><span class="annottext">[Certificate era]
</span><a href="#local-6989586621682147511"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="annot"><span class="annottext">BuildTxWith BuildTx [(StakeCredential, Witness WitCtxStake era)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Certificate era]
</span><a href="#local-6989586621682147511"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-1074"></span><span>              </span><span class="annot"><span class="annottext">TxCertificates BuildTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1075"></span><span>
</span><span id="line-1076"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682147512"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621682147512"><span class="hs-identifier hs-var">txEraUtxo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147513"><span class="annot"><span class="annottext">LedgerProtocolParameters era
</span><a href="#local-6989586621682147513"><span class="hs-identifier hs-var">pparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147514"><span class="annot"><span class="annottext">EraHistory
</span><a href="#local-6989586621682147514"><span class="hs-identifier hs-var">eraHistory</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147515"><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621682147515"><span class="hs-identifier hs-var">systemStart</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147516"><span class="annot"><span class="annottext">Set PoolId
</span><a href="#local-6989586621682147516"><span class="hs-identifier hs-var">stakePools</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147517"><span class="annot"><span class="annottext">Map StakeCredential Lovelace
</span><a href="#local-6989586621682147517"><span class="hs-identifier hs-var">stakeDelegDeposits</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147518"><span class="annot"><span class="annottext">Map (Credential 'DRepRole StandardCrypto) Lovelace
</span><a href="#local-6989586621682147518"><span class="hs-identifier hs-var">drepDelegDeposits</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1077"></span><span>        </span><span class="annot"><span class="annottext">IO
  (Either
     AcquiringFailure
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span>
</span><span id="line-1078"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
forall a.
LocalNodeConnectInfo
-&gt; Target ChainPoint
-&gt; LocalStateQueryExpr BlockInMode ChainPoint QueryInMode () IO a
-&gt; IO (Either AcquiringFailure a)
</span><span class="hs-identifier hs-var">executeLocalStateQueryExpr</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621682147462"><span class="hs-identifier hs-var">localNodeConnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Target ChainPoint
forall point. Target point
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalStateQuery.Type.html#VolatileTip"><span class="hs-identifier hs-var">Consensus.VolatileTip</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalStateQueryExpr
   BlockInMode
   ChainPoint
   QueryInMode
   ()
   IO
   (Either
      QueryConvenienceError
      (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
       Set PoolId, Map StakeCredential Lovelace,
       Map (Credential 'DRepRole StandardCrypto) Lovelace,
       Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
 -&gt; IO
      (Either
         AcquiringFailure
         (Either
            QueryConvenienceError
            (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
             Set PoolId, Map StakeCredential Lovelace,
             Map (Credential 'DRepRole StandardCrypto) Lovelace,
             Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))))
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1079"></span><span>              </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; [TxIn]
-&gt; [Certificate era]
-&gt; LocalStateQueryExpr
     BlockInMode
     ChainPoint
     QueryInMode
     ()
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall era block point r.
CardanoEra era
-&gt; [TxIn]
-&gt; [Certificate era]
-&gt; LocalStateQueryExpr
     block
     point
     QueryInMode
     r
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
</span><span class="hs-identifier hs-var">queryStateForBalancedTx</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147469"><span class="hs-identifier hs-var">nodeEra</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147461"><span class="hs-identifier hs-var">allTxInputs</span></a></span><span> </span><span class="annot"><span class="annottext">[Certificate era]
[Certificate era]
</span><a href="#local-6989586621682147509"><span class="hs-identifier hs-var">certs</span></a></span><span>
</span><span id="line-1080"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>          </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     AcquiringFailure
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         AcquiringFailure
         (Either
            QueryConvenienceError
            (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
             Set PoolId, Map StakeCredential Lovelace,
             Map (Credential 'DRepRole StandardCrypto) Lovelace,
             Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
    -&gt; ExceptT
         TxCmdError
         IO
         (Either
            QueryConvenienceError
            (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
             Set PoolId, Map StakeCredential Lovelace,
             Map (Credential 'DRepRole StandardCrypto) Lovelace,
             Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(AcquiringFailure
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         QueryConvenienceError
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        AcquiringFailure
        (Either
           QueryConvenienceError
           (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
            Set PoolId, Map StakeCredential Lovelace,
            Map (Credential 'DRepRole StandardCrypto) Lovelace,
            Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      (Either
         QueryConvenienceError
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))))
-&gt; (AcquiringFailure -&gt; TxCmdError)
-&gt; AcquiringFailure
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError -&gt; TxCmdError)
-&gt; (AcquiringFailure -&gt; QueryConvenienceError)
-&gt; AcquiringFailure
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AcquiringFailure -&gt; QueryConvenienceError
</span><span class="hs-identifier hs-var">AcqFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-1082"></span><span>          </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     QueryConvenienceError
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         QueryConvenienceError
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
    -&gt; ExceptT
         TxCmdError
         IO
         (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
          Set PoolId, Map StakeCredential Lovelace,
          Map (Credential 'DRepRole StandardCrypto) Lovelace,
          Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryConvenienceError
 -&gt; ExceptT
      TxCmdError
      IO
      (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
       Set PoolId, Map StakeCredential Lovelace,
       Map (Credential 'DRepRole StandardCrypto) Lovelace,
       Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        QueryConvenienceError
        (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
         Set PoolId, Map StakeCredential Lovelace,
         Map (Credential 'DRepRole StandardCrypto) Lovelace,
         Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT
      TxCmdError
      IO
      (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
       Set PoolId, Map StakeCredential Lovelace,
       Map (Credential 'DRepRole StandardCrypto) Lovelace,
       Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue)))
-&gt; (QueryConvenienceError -&gt; TxCmdError)
-&gt; QueryConvenienceError
-&gt; ExceptT
     TxCmdError
     IO
     (UTxO era, LedgerProtocolParameters era, EraHistory, SystemStart,
      Set PoolId, Map StakeCredential Lovelace,
      Map (Credential 'DRepRole StandardCrypto) Lovelace,
      Maybe (Featured ConwayEraOnwards era TxCurrentTreasuryValue))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">QueryConvenienceError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryConvenienceError"><span class="hs-identifier hs-var">TxCmdQueryConvenienceError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1083"></span><span>
</span><span id="line-1084"></span><span>      </span><span id="local-6989586621682147519"><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682147519"><span class="hs-identifier hs-var">txBodyContent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1085"></span><span>        </span><span class="annot"><span class="annottext">Either TxCmdError (TxBodyContent BuildTx era)
-&gt; ExceptT TxCmdError IO (TxBodyContent BuildTx era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxBodyContent BuildTx era)
 -&gt; ExceptT TxCmdError IO (TxBodyContent BuildTx era))
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
-&gt; ExceptT TxCmdError IO (TxBodyContent BuildTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1086"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
forall era.
ShelleyBasedEra era
-&gt; Maybe ScriptValidity
-&gt; Maybe (PParams (ShelleyLedgerEra era))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [TxIn]
-&gt; [TxIn]
-&gt; Maybe (TxOut CtxTx era)
-&gt; Maybe Lovelace
-&gt; [TxOut CtxTx era]
-&gt; Maybe SlotNo
-&gt; TxValidityUpperBound era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Hash PaymentKey]
-&gt; Lovelace
-&gt; TxAuxScripts era
-&gt; TxMetadataInEra era
-&gt; TxUpdateProposal era
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
-&gt; Either TxCmdError (TxBodyContent BuildTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#constructTxBodyContent"><span class="hs-identifier hs-var">constructTxBodyContent</span></a></span><span>
</span><span id="line-1087"></span><span>            </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147422"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-1088"></span><span>            </span><span class="annot"><span class="annottext">Maybe ScriptValidity
</span><a href="#local-6989586621682147425"><span class="hs-identifier hs-var">mScriptValidity</span></a></span><span>
</span><span id="line-1089"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
-&gt; Maybe (PParams (ShelleyLedgerEra era))
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(PParams (ShelleyLedgerEra era)
 -&gt; Maybe (PParams (ShelleyLedgerEra era)))
-&gt; PParams (ShelleyLedgerEra era)
-&gt; Maybe (PParams (ShelleyLedgerEra era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerProtocolParameters era -&gt; PParams (ShelleyLedgerEra era)
forall era.
LedgerProtocolParameters era -&gt; PParams (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">unLedgerProtocolParameters</span></span><span> </span><span class="annot"><span class="annottext">LedgerProtocolParameters era
</span><a href="#local-6989586621682147513"><span class="hs-identifier hs-var">pparams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1090"></span><span>            </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147426"><span class="hs-identifier hs-var">inputsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-1091"></span><span>            </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147427"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-1092"></span><span>            </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147428"><span class="hs-identifier hs-var">txinsc</span></a></span><span>
</span><span id="line-1093"></span><span>            </span><span class="annot"><span class="annottext">Maybe (TxOut CtxTx era)
</span><a href="#local-6989586621682147429"><span class="hs-identifier hs-var">mReturnCollateral</span></a></span><span>
</span><span id="line-1094"></span><span>            </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="#local-6989586621682147430"><span class="hs-identifier hs-var">mTotCollateral</span></a></span><span>
</span><span id="line-1095"></span><span>            </span><span class="annot"><span class="annottext">[TxOut CtxTx era]
</span><a href="#local-6989586621682147431"><span class="hs-identifier hs-var">txouts</span></a></span><span>
</span><span id="line-1096"></span><span>            </span><span class="annot"><span class="annottext">Maybe SlotNo
</span><a href="#local-6989586621682147434"><span class="hs-identifier hs-var">mLowerBound</span></a></span><span>
</span><span id="line-1097"></span><span>            </span><span class="annot"><span class="annottext">TxValidityUpperBound era
</span><a href="#local-6989586621682147435"><span class="hs-identifier hs-var">mUpperBound</span></a></span><span>
</span><span id="line-1098"></span><span>            </span><span class="annot"><span class="annottext">(Value, [MintScriptWitnessWithPolicyId era])
</span><a href="#local-6989586621682147433"><span class="hs-identifier hs-var">valuesWithScriptWits</span></a></span><span>
</span><span id="line-1099"></span><span>            </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147436"><span class="hs-identifier hs-var">certsAndMaybeScriptWits</span></a></span><span>
</span><span id="line-1100"></span><span>            </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147437"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-1101"></span><span>            </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621682147438"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-1102"></span><span>            </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1103"></span><span>            </span><span class="annot"><span class="annottext">TxAuxScripts era
</span><a href="#local-6989586621682147439"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span>
</span><span id="line-1104"></span><span>            </span><span class="annot"><span class="annottext">TxMetadataInEra era
</span><a href="#local-6989586621682147440"><span class="hs-identifier hs-var">txMetadata</span></a></span><span>
</span><span id="line-1105"></span><span>            </span><span class="annot"><span class="annottext">TxUpdateProposal era
</span><a href="#local-6989586621682147441"><span class="hs-identifier hs-var">txUpdateProposal</span></a></span><span>
</span><span id="line-1106"></span><span>            </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147443"><span class="hs-identifier hs-var">votingProcedures</span></a></span><span>
</span><span id="line-1107"></span><span>            </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147444"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-1108"></span><span>            </span><span class="annot"><span class="annottext">Maybe (TxCurrentTreasuryValue, TxTreasuryDonation)
</span><a href="#local-6989586621682147445"><span class="hs-identifier hs-var">mCurrentTreasuryValueAndDonation</span></a></span><span>
</span><span id="line-1109"></span><span>
</span><span id="line-1110"></span><span>      </span><span class="annot"><span class="annottext">(TxInsExistError -&gt; TxCmdError)
-&gt; ExceptT TxInsExistError IO () -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">TxInsExistError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxInsDoNotExist"><span class="hs-identifier hs-var">TxCmdTxInsDoNotExist</span></a></span><span>
</span><span id="line-1111"></span><span>        </span><span class="annot"><span class="annottext">(ExceptT TxInsExistError IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (Either TxInsExistError () -&gt; ExceptT TxInsExistError IO ())
-&gt; Either TxInsExistError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either TxInsExistError () -&gt; ExceptT TxInsExistError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span>
</span><span id="line-1112"></span><span>        </span><span class="annot"><span class="annottext">(Either TxInsExistError () -&gt; ExceptT TxCmdError IO ())
-&gt; Either TxInsExistError () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; UTxO era -&gt; Either TxInsExistError ()
forall era. [TxIn] -&gt; UTxO era -&gt; Either TxInsExistError ()
</span><span class="hs-identifier hs-var">txInsExistInUTxO</span></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147461"><span class="hs-identifier hs-var">allTxInputs</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621682147512"><span class="hs-identifier hs-var">txEraUtxo</span></a></span><span>
</span><span id="line-1113"></span><span>      </span><span class="annot"><span class="annottext">(ScriptLockedTxInsError -&gt; TxCmdError)
-&gt; ExceptT ScriptLockedTxInsError IO () -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLockedTxInsError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdQueryNotScriptLocked"><span class="hs-identifier hs-var">TxCmdQueryNotScriptLocked</span></a></span><span>
</span><span id="line-1114"></span><span>        </span><span class="annot"><span class="annottext">(ExceptT ScriptLockedTxInsError IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (Either ScriptLockedTxInsError ()
    -&gt; ExceptT ScriptLockedTxInsError IO ())
-&gt; Either ScriptLockedTxInsError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either ScriptLockedTxInsError ()
-&gt; ExceptT ScriptLockedTxInsError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span>
</span><span id="line-1115"></span><span>        </span><span class="annot"><span class="annottext">(Either ScriptLockedTxInsError () -&gt; ExceptT TxCmdError IO ())
-&gt; Either ScriptLockedTxInsError () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; UTxO era -&gt; Either ScriptLockedTxInsError ()
forall era. [TxIn] -&gt; UTxO era -&gt; Either ScriptLockedTxInsError ()
</span><span class="hs-identifier hs-var">notScriptLockedTxIns</span></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147428"><span class="hs-identifier hs-var">txinsc</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621682147512"><span class="hs-identifier hs-var">txEraUtxo</span></a></span><span>
</span><span id="line-1116"></span><span>
</span><span id="line-1117"></span><span>      </span><span id="local-6989586621682147524"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621682147524"><span class="hs-identifier hs-var">cAddr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1118"></span><span>        </span><span class="annot"><span class="annottext">Either FilePath (AddressInEra era)
-&gt; ExceptT TxCmdError IO (Either FilePath (AddressInEra era))
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; AddressAny -&gt; Either FilePath (AddressInEra era)
forall era.
CardanoEra era -&gt; AddressAny -&gt; Either FilePath (AddressInEra era)
</span><span class="hs-identifier hs-var">anyAddressInEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147457"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147432"><span class="hs-identifier hs-var">changeAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>          </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either FilePath (AddressInEra era))
-&gt; (ExceptT TxCmdError IO (Either FilePath (AddressInEra era))
    -&gt; ExceptT TxCmdError IO (AddressInEra era))
-&gt; ExceptT TxCmdError IO (AddressInEra era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; ExceptT TxCmdError IO (AddressInEra era))
-&gt; ExceptT TxCmdError IO (Either FilePath (AddressInEra era))
-&gt; ExceptT TxCmdError IO (AddressInEra era)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; ExceptT TxCmdError IO (AddressInEra era)
forall a. HasCallStack =&gt; FilePath -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; FilePath -&gt; ExceptT TxCmdError IO (AddressInEra era))
-&gt; FilePath -&gt; FilePath -&gt; ExceptT TxCmdError IO (AddressInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;runTxBuild: Byron address used: &quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147432"><span class="hs-identifier hs-var">changeAddr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- should this throw instead?</span><span>
</span><span id="line-1120"></span><span>      </span><span id="local-6989586621682147528"><span class="annot"><span class="annottext">balancedTxBody :: BalancedTxBody era
</span><a href="#local-6989586621682147528"><span class="hs-identifier hs-var">balancedTxBody</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BalancedTxBody</span></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682147529"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147529"><span class="hs-identifier hs-var">fee</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1121"></span><span>        </span><span class="annot"><span class="annottext">(TxBodyErrorAutoBalance era -&gt; TxCmdError)
-&gt; ExceptT (TxBodyErrorAutoBalance era) IO (BalancedTxBody era)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyTxBodyErrorAutoBalance -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdBalanceTxBody"><span class="hs-identifier hs-var">TxCmdBalanceTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">(AnyTxBodyErrorAutoBalance -&gt; TxCmdError)
-&gt; (TxBodyErrorAutoBalance era -&gt; AnyTxBodyErrorAutoBalance)
-&gt; TxBodyErrorAutoBalance era
-&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyErrorAutoBalance era -&gt; AnyTxBodyErrorAutoBalance
forall era. TxBodyErrorAutoBalance era -&gt; AnyTxBodyErrorAutoBalance
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#AnyTxBodyErrorAutoBalance"><span class="hs-identifier hs-var">AnyTxBodyErrorAutoBalance</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>          </span><span class="annot"><span class="annottext">(ExceptT (TxBodyErrorAutoBalance era) IO (BalancedTxBody era)
 -&gt; ExceptT TxCmdError IO (BalancedTxBody era))
-&gt; (Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
    -&gt; ExceptT (TxBodyErrorAutoBalance era) IO (BalancedTxBody era))
-&gt; Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
-&gt; ExceptT (TxBodyErrorAutoBalance era) IO (BalancedTxBody era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span>
</span><span id="line-1123"></span><span>          </span><span class="annot"><span class="annottext">(Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
 -&gt; ExceptT TxCmdError IO (BalancedTxBody era))
-&gt; Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
-&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; SystemStart
-&gt; LedgerEpochInfo
-&gt; LedgerProtocolParameters era
-&gt; Set PoolId
-&gt; Map StakeCredential Lovelace
-&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace
-&gt; UTxO era
-&gt; TxBodyContent BuildTx era
-&gt; AddressInEra era
-&gt; Maybe Word
-&gt; Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
forall era.
ShelleyBasedEra era
-&gt; SystemStart
-&gt; LedgerEpochInfo
-&gt; LedgerProtocolParameters era
-&gt; Set PoolId
-&gt; Map StakeCredential Lovelace
-&gt; Map (Credential 'DRepRole StandardCrypto) Lovelace
-&gt; UTxO era
-&gt; TxBodyContent BuildTx era
-&gt; AddressInEra era
-&gt; Maybe Word
-&gt; Either (TxBodyErrorAutoBalance era) (BalancedTxBody era)
</span><span class="hs-identifier hs-var">makeTransactionBodyAutoBalance</span></span><span>
</span><span id="line-1124"></span><span>            </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147422"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-1125"></span><span>            </span><span class="annot"><span class="annottext">SystemStart
</span><a href="#local-6989586621682147515"><span class="hs-identifier hs-var">systemStart</span></a></span><span>
</span><span id="line-1126"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EraHistory -&gt; LedgerEpochInfo
</span><span class="hs-identifier hs-var">toLedgerEpochInfo</span></span><span> </span><span class="annot"><span class="annottext">EraHistory
</span><a href="#local-6989586621682147514"><span class="hs-identifier hs-var">eraHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span>            </span><span class="annot"><span class="annottext">LedgerProtocolParameters era
LedgerProtocolParameters era
</span><a href="#local-6989586621682147513"><span class="hs-identifier hs-var">pparams</span></a></span><span>
</span><span id="line-1128"></span><span>            </span><span class="annot"><span class="annottext">Set PoolId
</span><a href="#local-6989586621682147516"><span class="hs-identifier hs-var">stakePools</span></a></span><span>
</span><span id="line-1129"></span><span>            </span><span class="annot"><span class="annottext">Map StakeCredential Lovelace
</span><a href="#local-6989586621682147517"><span class="hs-identifier hs-var">stakeDelegDeposits</span></a></span><span>
</span><span id="line-1130"></span><span>            </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole StandardCrypto) Lovelace
</span><a href="#local-6989586621682147518"><span class="hs-identifier hs-var">drepDelegDeposits</span></a></span><span>
</span><span id="line-1131"></span><span>            </span><span class="annot"><span class="annottext">UTxO era
UTxO era
</span><a href="#local-6989586621682147512"><span class="hs-identifier hs-var">txEraUtxo</span></a></span><span>
</span><span id="line-1132"></span><span>            </span><span class="annot"><span class="annottext">TxBodyContent BuildTx era
</span><a href="#local-6989586621682147519"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span>
</span><span id="line-1133"></span><span>            </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621682147524"><span class="hs-identifier hs-var">cAddr</span></a></span><span>
</span><span id="line-1134"></span><span>            </span><span class="annot"><span class="annottext">Maybe Word
</span><a href="#local-6989586621682147442"><span class="hs-identifier hs-var">mOverrideWits</span></a></span><span>
</span><span id="line-1135"></span><span>
</span><span id="line-1136"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (Doc AnsiStyle -&gt; IO ())
-&gt; Doc AnsiStyle
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/System.IO.html#putStrLn"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ())
-&gt; (Doc AnsiStyle -&gt; FilePath) -&gt; Doc AnsiStyle -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; FilePath
</span><span class="hs-identifier hs-var">docToString</span></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; ExceptT TxCmdError IO ())
-&gt; Doc AnsiStyle -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;Estimated transaction fee:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Doc AnsiStyle -&gt; Doc AnsiStyle
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/prettyprinter-1.7.1-6097e7e2c8cd6bf185ebf82838a102a3c6283cee0def4f90fb8ed39b3835ab2e/share/doc/html/src/Prettyprinter.Internal.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Doc AnsiStyle
forall a ann. Pretty a =&gt; a -&gt; Doc ann
forall ann. Lovelace -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/prettyprinter-1.7.1-6097e7e2c8cd6bf185ebf82838a102a3c6283cee0def4f90fb8ed39b3835ab2e/share/doc/html/src/Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147529"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-1137"></span><span>
</span><span id="line-1138"></span><span>      </span><span class="annot"><span class="annottext">BalancedTxBody era -&gt; ExceptT TxCmdError IO (BalancedTxBody era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">BalancedTxBody era
</span><a href="#local-6989586621682147528"><span class="hs-identifier hs-var">balancedTxBody</span></a></span><span>
</span><span id="line-1139"></span><span>
</span><span id="line-1140"></span><span id="local-6989586621682145930"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#convertCertificates"><span class="hs-identifier hs-type">convertCertificates</span></a></span><span>
</span><span id="line-1141"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145930"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1143"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145930"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145930"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1144"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxCertificates</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145930"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-1145"></span><span id="convertCertificates"><span class="annot"><span class="annottext">convertCertificates :: forall era.
ShelleyBasedEra era
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; TxCertificates BuildTx era
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#convertCertificates"><span class="hs-identifier hs-var hs-var">convertCertificates</span></a></span></span><span> </span><span id="local-6989586621682147538"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147538"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682147539"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147539"><span class="hs-identifier hs-var">certsAndScriptWitnesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1146"></span><span>  </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; [Certificate era]
-&gt; BuildTxWith BuildTx [(StakeCredential, Witness WitCtxStake era)]
-&gt; TxCertificates BuildTx era
forall era build.
ShelleyBasedEra era
-&gt; [Certificate era]
-&gt; BuildTxWith build [(StakeCredential, Witness WitCtxStake era)]
-&gt; TxCertificates build era
</span><span class="hs-identifier hs-var">TxCertificates</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147538"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">[Certificate era]
</span><a href="#local-6989586621682147540"><span class="hs-identifier hs-var">certs</span></a></span><span> </span><span class="annot"><span class="annottext">(BuildTxWith BuildTx [(StakeCredential, Witness WitCtxStake era)]
 -&gt; TxCertificates BuildTx era)
-&gt; BuildTxWith BuildTx [(StakeCredential, Witness WitCtxStake era)]
-&gt; TxCertificates BuildTx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(StakeCredential, Witness WitCtxStake era)]
-&gt; BuildTxWith BuildTx [(StakeCredential, Witness WitCtxStake era)]
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">[(StakeCredential, Witness WitCtxStake era)]
</span><a href="#local-6989586621682147541"><span class="hs-identifier hs-var">reqWits</span></a></span><span>
</span><span id="line-1147"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1148"></span><span>  </span><span id="local-6989586621682147540"><span class="annot"><span class="annottext">certs :: [Certificate era]
</span><a href="#local-6989586621682147540"><span class="hs-identifier hs-var hs-var">certs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Certificate era, Maybe (ScriptWitness WitCtxStake era))
 -&gt; Certificate era)
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [Certificate era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(Certificate era, Maybe (ScriptWitness WitCtxStake era))
-&gt; Certificate era
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147539"><span class="hs-identifier hs-var">certsAndScriptWitnesses</span></a></span><span>
</span><span id="line-1149"></span><span>  </span><span id="local-6989586621682147541"><span class="annot"><span class="annottext">reqWits :: [(StakeCredential, Witness WitCtxStake era)]
</span><a href="#local-6989586621682147541"><span class="hs-identifier hs-var hs-var">reqWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Item [(StakeCredential, Witness WitCtxStake era)]]
-&gt; [(StakeCredential, Witness WitCtxStake era)]
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Item [(StakeCredential, Witness WitCtxStake era)]]
 -&gt; [(StakeCredential, Witness WitCtxStake era)])
-&gt; [Item [(StakeCredential, Witness WitCtxStake era)]]
-&gt; [(StakeCredential, Witness WitCtxStake era)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Certificate era, Maybe (ScriptWitness WitCtxStake era))
 -&gt; Maybe (StakeCredential, Witness WitCtxStake era))
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeCredential, Witness WitCtxStake era)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Certificate era, Maybe (ScriptWitness WitCtxStake era))
-&gt; Maybe (StakeCredential, Witness WitCtxStake era)
forall era.
(Certificate era, Maybe (ScriptWitness WitCtxStake era))
-&gt; Maybe (StakeCredential, Witness WitCtxStake era)
</span><a href="#local-6989586621682147542"><span class="hs-identifier hs-var">convertCert</span></a></span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147539"><span class="hs-identifier hs-var">certsAndScriptWitnesses</span></a></span><span>
</span><span id="line-1150"></span><span>  </span><span id="local-6989586621682145983"><span class="annot"><a href="#local-6989586621682147542"><span class="hs-identifier hs-type">convertCert</span></a></span><span>
</span><span id="line-1151"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145983"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145983"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeCredential</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Witness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145983"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1153"></span><span>  </span><span id="local-6989586621682147542"><span class="annot"><span class="annottext">convertCert :: forall era.
(Certificate era, Maybe (ScriptWitness WitCtxStake era))
-&gt; Maybe (StakeCredential, Witness WitCtxStake era)
</span><a href="#local-6989586621682147542"><span class="hs-identifier hs-var hs-var">convertCert</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147545"><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682147545"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147546"><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682147546"><span class="hs-identifier hs-var">mScriptWitnessFiles</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1154"></span><span>    </span><span id="local-6989586621682147547"><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682147547"><span class="hs-identifier hs-var">sCred</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Certificate era -&gt; Maybe StakeCredential
forall era. Certificate era -&gt; Maybe StakeCredential
</span><span class="hs-identifier hs-var">selectStakeCredentialWitness</span></span><span> </span><span class="annot"><span class="annottext">Certificate era
</span><a href="#local-6989586621682147545"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-1155"></span><span>    </span><span class="annot"><span class="annottext">(StakeCredential, Witness WitCtxStake era)
-&gt; Maybe (StakeCredential, Witness WitCtxStake era)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((StakeCredential, Witness WitCtxStake era)
 -&gt; Maybe (StakeCredential, Witness WitCtxStake era))
-&gt; (StakeCredential, Witness WitCtxStake era)
-&gt; Maybe (StakeCredential, Witness WitCtxStake era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="#local-6989586621682147546"><span class="hs-identifier hs-var">mScriptWitnessFiles</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1156"></span><span>      </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147549"><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147549"><span class="hs-identifier hs-var">sWit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682147547"><span class="hs-identifier hs-var">sCred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxStake
-&gt; ScriptWitness WitCtxStake era -&gt; Witness WitCtxStake era
forall witctx era.
ScriptWitnessInCtx witctx
-&gt; ScriptWitness witctx era -&gt; Witness witctx era
</span><span class="hs-identifier hs-var">ScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxStake
</span><span class="hs-identifier hs-var">ScriptWitnessForStakeAddr</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147549"><span class="hs-identifier hs-var">sWit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span>      </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxStake era)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeCredential
</span><a href="#local-6989586621682147547"><span class="hs-identifier hs-var">sCred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxStake -&gt; Witness WitCtxStake era
forall witctx era. KeyWitnessInCtx witctx -&gt; Witness witctx era
</span><span class="hs-identifier hs-var">KeyWitness</span></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxStake
</span><span class="hs-identifier hs-var">KeyWitnessForStakeAddr</span></span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1160"></span><span class="hs-comment">-- Transaction body validation and conversion</span><span>
</span><span id="line-1161"></span><span class="hs-comment">--</span><span>
</span><span id="line-1162"></span><span>
</span><span id="line-1163"></span><span id="local-6989586621682145986"><span id="local-6989586621682145987"><span id="local-6989586621682145989"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatch"><span class="hs-identifier hs-type">txFeatureMismatch</span></a></span><span>
</span><span id="line-1164"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1165"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145986"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145987"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1167"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.TxFeature.html#TxFeature"><span class="hs-identifier hs-type">TxFeature</span></a></span><span>
</span><span id="line-1168"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145986"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145989"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-1169"></span><span id="txFeatureMismatch"><span class="annot"><span class="annottext">txFeatureMismatch :: forall (m :: * -&gt; *) era a.
Monad m =&gt;
CardanoEra era -&gt; TxFeature -&gt; ExceptT TxCmdError m a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatch"><span class="hs-identifier hs-var hs-var">txFeatureMismatch</span></a></span></span><span> </span><span id="local-6989586621682147553"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147553"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682147554"><span class="annot"><span class="annottext">TxFeature
</span><a href="#local-6989586621682147554"><span class="hs-identifier hs-var">feature</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1170"></span><span>  </span><span class="annot"><span class="annottext">Either TxCmdError a -&gt; ExceptT TxCmdError m a
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError a -&gt; ExceptT TxCmdError m a)
-&gt; (TxCmdError -&gt; Either TxCmdError a)
-&gt; TxCmdError
-&gt; ExceptT TxCmdError m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxCmdError -&gt; Either TxCmdError a
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError m a)
-&gt; TxCmdError -&gt; ExceptT TxCmdError m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; TxFeature -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxFeatureMismatch"><span class="hs-identifier hs-var">TxCmdTxFeatureMismatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; AnyCardanoEra
forall era. CardanoEra era -&gt; AnyCardanoEra
</span><span class="hs-identifier hs-var">anyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147553"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="#local-6989586621682147554"><span class="hs-identifier hs-var">feature</span></a></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span id="local-6989586621682145996"><span id="local-6989586621682145997"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-type">txFeatureMismatchPure</span></a></span><span>
</span><span id="line-1173"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145996"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1174"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.TxFeature.html#TxFeature"><span class="hs-identifier hs-type">TxFeature</span></a></span><span>
</span><span id="line-1175"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145997"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1176"></span><span id="txFeatureMismatchPure"><span class="annot"><span class="annottext">txFeatureMismatchPure :: forall era a. CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-var hs-var">txFeatureMismatchPure</span></a></span></span><span> </span><span id="local-6989586621682147558"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147558"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682147559"><span class="annot"><span class="annottext">TxFeature
</span><a href="#local-6989586621682147559"><span class="hs-identifier hs-var">feature</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1177"></span><span>  </span><span class="annot"><span class="annottext">TxCmdError -&gt; Either TxCmdError a
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; TxFeature -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxFeatureMismatch"><span class="hs-identifier hs-var">TxCmdTxFeatureMismatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; AnyCardanoEra
forall era. CardanoEra era -&gt; AnyCardanoEra
</span><span class="hs-identifier hs-var">anyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147558"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="#local-6989586621682147559"><span class="hs-identifier hs-var">feature</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span id="local-6989586621682145895"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxIns"><span class="hs-identifier hs-type">validateTxIns</span></a></span><span>
</span><span id="line-1180"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682145895"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1181"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTxWith</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Witness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682145895"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1182"></span><span id="validateTxIns"><span class="annot"><span class="annottext">validateTxIns :: forall era.
[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era))]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxIns"><span class="hs-identifier hs-var hs-var">validateTxIns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((TxIn, Maybe (ScriptWitness WitCtxTxIn era))
 -&gt; (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era)))
-&gt; [(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(TxIn, Maybe (ScriptWitness WitCtxTxIn era))
-&gt; (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era))
forall era.
(TxIn, Maybe (ScriptWitness WitCtxTxIn era))
-&gt; (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era))
</span><a href="#local-6989586621682147560"><span class="hs-identifier hs-var">convertTxIn</span></a></span><span>
</span><span id="line-1183"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1184"></span><span>  </span><span id="local-6989586621682146001"><span class="annot"><a href="#local-6989586621682147560"><span class="hs-identifier hs-type">convertTxIn</span></a></span><span>
</span><span id="line-1185"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682146001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1186"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTxWith</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Witness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682146001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1187"></span><span>  </span><span id="local-6989586621682147560"><span class="annot"><span class="annottext">convertTxIn :: forall era.
(TxIn, Maybe (ScriptWitness WitCtxTxIn era))
-&gt; (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn era))
</span><a href="#local-6989586621682147560"><span class="hs-identifier hs-var hs-var">convertTxIn</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147561"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147561"><span class="hs-identifier hs-var">txin</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147562"><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxTxIn era)
</span><a href="#local-6989586621682147562"><span class="hs-identifier hs-var">mScriptWitness</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1188"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxTxIn era)
</span><a href="#local-6989586621682147562"><span class="hs-identifier hs-var">mScriptWitness</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1189"></span><span>      </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147563"><span class="annot"><span class="annottext">ScriptWitness WitCtxTxIn era
</span><a href="#local-6989586621682147563"><span class="hs-identifier hs-var">sWit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1190"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147561"><span class="hs-identifier hs-var">txin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Witness WitCtxTxIn era
-&gt; BuildTxWith BuildTx (Witness WitCtxTxIn era)
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxTxIn era
 -&gt; BuildTxWith BuildTx (Witness WitCtxTxIn era))
-&gt; Witness WitCtxTxIn era
-&gt; BuildTxWith BuildTx (Witness WitCtxTxIn era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxTxIn
-&gt; ScriptWitness WitCtxTxIn era -&gt; Witness WitCtxTxIn era
forall witctx era.
ScriptWitnessInCtx witctx
-&gt; ScriptWitness witctx era -&gt; Witness witctx era
</span><span class="hs-identifier hs-var">ScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxTxIn
</span><span class="hs-identifier hs-var">ScriptWitnessForSpending</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxTxIn era
</span><a href="#local-6989586621682147563"><span class="hs-identifier hs-var">sWit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>      </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxTxIn era)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1192"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147561"><span class="hs-identifier hs-var">txin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Witness WitCtxTxIn era
-&gt; BuildTxWith BuildTx (Witness WitCtxTxIn era)
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxTxIn era
 -&gt; BuildTxWith BuildTx (Witness WitCtxTxIn era))
-&gt; Witness WitCtxTxIn era
-&gt; BuildTxWith BuildTx (Witness WitCtxTxIn era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxTxIn -&gt; Witness WitCtxTxIn era
forall witctx era. KeyWitnessInCtx witctx -&gt; Witness witctx era
</span><span class="hs-identifier hs-var">KeyWitness</span></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxTxIn
</span><span class="hs-identifier hs-var">KeyWitnessForSpending</span></span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span><span>
</span><span id="line-1194"></span><span id="local-6989586621682145850"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsCollateral"><span class="hs-identifier hs-type">validateTxInsCollateral</span></a></span><span>
</span><span id="line-1195"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145850"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1196"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-1197"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxInsCollateral</span></span><span> </span><span class="annot"><a href="#local-6989586621682145850"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1198"></span><span id="validateTxInsCollateral"><span class="annot"><span class="annottext">validateTxInsCollateral :: forall era.
ShelleyBasedEra era
-&gt; [TxIn] -&gt; Either TxCmdError (TxInsCollateral era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsCollateral"><span class="hs-identifier hs-var hs-var">validateTxInsCollateral</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxInsCollateral era -&gt; Either TxCmdError (TxInsCollateral era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TxInsCollateral era
forall era. TxInsCollateral era
</span><span class="hs-identifier hs-var">TxInsCollateralNone</span></span><span>
</span><span id="line-1199"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsCollateral"><span class="hs-identifier hs-var">validateTxInsCollateral</span></a></span><span> </span><span id="local-6989586621682147570"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147570"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682147571"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147571"><span class="hs-identifier hs-var">txins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1200"></span><span>  </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (AlonzoEraOnwards era -&gt; TxInsCollateral era)
-&gt; Maybe (TxInsCollateral era)
forall (eon :: * -&gt; *) era a.
Eon eon =&gt;
ShelleyBasedEra era -&gt; (eon era -&gt; a) -&gt; Maybe a
</span><span class="hs-identifier hs-var">forShelleyBasedEraInEonMaybe</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147570"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147572"><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147572"><span class="hs-identifier hs-var">supported</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era -&gt; [TxIn] -&gt; TxInsCollateral era
forall era. AlonzoEraOnwards era -&gt; [TxIn] -&gt; TxInsCollateral era
</span><span class="hs-identifier hs-var">TxInsCollateral</span></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147572"><span class="hs-identifier hs-var">supported</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147571"><span class="hs-identifier hs-var">txins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1201"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TxInsCollateral era)
-&gt; (Maybe (TxInsCollateral era)
    -&gt; Either TxCmdError (TxInsCollateral era))
-&gt; Either TxCmdError (TxInsCollateral era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (TxInsCollateral era)
-&gt; (TxInsCollateral era -&gt; Either TxCmdError (TxInsCollateral era))
-&gt; Maybe (TxInsCollateral era)
-&gt; Either TxCmdError (TxInsCollateral era)
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; TxFeature -&gt; Either TxCmdError (TxInsCollateral era)
forall era a. CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-var">txFeatureMismatchPure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147570"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureCollateral"><span class="hs-identifier hs-var">TxFeatureCollateral</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxInsCollateral era -&gt; Either TxCmdError (TxInsCollateral era)
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span id="local-6989586621682145852"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsReference"><span class="hs-identifier hs-type">validateTxInsReference</span></a></span><span>
</span><span id="line-1204"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145852"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1205"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-1206"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxInsReference</span></span><span> </span><span class="annot"><a href="#local-6989586621682145852"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1207"></span><span id="validateTxInsReference"><span class="annot"><span class="annottext">validateTxInsReference :: forall era.
ShelleyBasedEra era
-&gt; [TxIn] -&gt; Either TxCmdError (TxInsReference era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsReference"><span class="hs-identifier hs-var hs-var">validateTxInsReference</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxInsReference era -&gt; Either TxCmdError (TxInsReference era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TxInsReference era
forall era. TxInsReference era
</span><span class="hs-identifier hs-var">TxInsReferenceNone</span></span><span>
</span><span id="line-1208"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#validateTxInsReference"><span class="hs-identifier hs-var">validateTxInsReference</span></a></span><span> </span><span id="local-6989586621682147580"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147580"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682147581"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147581"><span class="hs-identifier hs-var">allRefIns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1209"></span><span>  </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (BabbageEraOnwards era -&gt; TxInsReference era)
-&gt; Maybe (TxInsReference era)
forall (eon :: * -&gt; *) era a.
Eon eon =&gt;
ShelleyBasedEra era -&gt; (eon era -&gt; a) -&gt; Maybe a
</span><span class="hs-identifier hs-var">forShelleyBasedEraInEonMaybe</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147580"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147582"><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147582"><span class="hs-identifier hs-var">supported</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era -&gt; [TxIn] -&gt; TxInsReference era
forall era. BabbageEraOnwards era -&gt; [TxIn] -&gt; TxInsReference era
</span><span class="hs-identifier hs-var">TxInsReference</span></span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147582"><span class="hs-identifier hs-var">supported</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147581"><span class="hs-identifier hs-var">allRefIns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1210"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TxInsReference era)
-&gt; (Maybe (TxInsReference era)
    -&gt; Either TxCmdError (TxInsReference era))
-&gt; Either TxCmdError (TxInsReference era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (TxInsReference era)
-&gt; (TxInsReference era -&gt; Either TxCmdError (TxInsReference era))
-&gt; Maybe (TxInsReference era)
-&gt; Either TxCmdError (TxInsReference era)
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; TxFeature -&gt; Either TxCmdError (TxInsReference era)
forall era a. CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-var">txFeatureMismatchPure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147580"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureReferenceInputs"><span class="hs-identifier hs-var">TxFeatureReferenceInputs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxInsReference era -&gt; Either TxCmdError (TxInsReference era)
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span>
</span><span id="line-1211"></span><span>
</span><span id="line-1212"></span><span id="local-6989586621682145571"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getAllReferenceInputs"><span class="hs-identifier hs-type">getAllReferenceInputs</span></a></span><span>
</span><span id="line-1213"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxTxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1214"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxMint</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1215"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Certificate</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1216"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1217"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VotingProcedures</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1218"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Proposal</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxStake</span></span><span> </span><span class="annot"><a href="#local-6989586621682145571"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1219"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span><span>
</span><span id="line-1220"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Read only reference inputs</span></span><span>
</span><span id="line-1221"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-1222"></span><span id="getAllReferenceInputs"><span class="annot"><span class="annottext">getAllReferenceInputs :: forall era.
[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
-&gt; [ScriptWitness WitCtxMint era]
-&gt; [(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(StakeAddress, Lovelace,
     Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
-&gt; [TxIn]
-&gt; [TxIn]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getAllReferenceInputs"><span class="hs-identifier hs-var hs-var">getAllReferenceInputs</span></a></span></span><span>
</span><span id="line-1223"></span><span>  </span><span id="local-6989586621682147586"><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147586"><span class="hs-identifier hs-var">txins</span></a></span></span><span>
</span><span id="line-1224"></span><span>  </span><span id="local-6989586621682147587"><span class="annot"><span class="annottext">[ScriptWitness WitCtxMint era]
</span><a href="#local-6989586621682147587"><span class="hs-identifier hs-var">mintWitnesses</span></a></span></span><span>
</span><span id="line-1225"></span><span>  </span><span id="local-6989586621682147588"><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147588"><span class="hs-identifier hs-var">certFiles</span></a></span></span><span>
</span><span id="line-1226"></span><span>  </span><span id="local-6989586621682147589"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147589"><span class="hs-identifier hs-var">withdrawals</span></a></span></span><span>
</span><span id="line-1227"></span><span>  </span><span id="local-6989586621682147590"><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147590"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span></span><span>
</span><span id="line-1228"></span><span>  </span><span id="local-6989586621682147591"><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147591"><span class="hs-identifier hs-var">propProceduresAnMaybeScriptWits</span></a></span></span><span>
</span><span id="line-1229"></span><span>  </span><span id="local-6989586621682147592"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147592"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1230"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147593"><span class="annot"><span class="annottext">txinsWitByRefInputs :: [Maybe TxIn]
</span><a href="#local-6989586621682147593"><span class="hs-identifier hs-var hs-var">txinsWitByRefInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScriptWitness WitCtxTxIn era -&gt; Maybe TxIn
forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var">getReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxTxIn era
</span><a href="#local-6989586621682147595"><span class="hs-identifier hs-var">sWit</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147595"><span class="annot"><span class="annottext">ScriptWitness WitCtxTxIn era
</span><a href="#local-6989586621682147595"><span class="hs-identifier hs-var">sWit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(TxIn, Maybe (ScriptWitness WitCtxTxIn era))]
</span><a href="#local-6989586621682147586"><span class="hs-identifier hs-var">txins</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1231"></span><span>        </span><span id="local-6989586621682147596"><span class="annot"><span class="annottext">mintingRefInputs :: [Maybe TxIn]
</span><a href="#local-6989586621682147596"><span class="hs-identifier hs-var hs-var">mintingRefInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ScriptWitness WitCtxMint era -&gt; Maybe TxIn)
-&gt; [ScriptWitness WitCtxMint era] -&gt; [Maybe TxIn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxMint era -&gt; Maybe TxIn
forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var">getReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptWitness WitCtxMint era]
</span><a href="#local-6989586621682147587"><span class="hs-identifier hs-var">mintWitnesses</span></a></span><span>
</span><span id="line-1232"></span><span>        </span><span id="local-6989586621682147597"><span class="annot"><span class="annottext">certsWitByRefInputs :: [Maybe TxIn]
</span><a href="#local-6989586621682147597"><span class="hs-identifier hs-var hs-var">certsWitByRefInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era -&gt; Maybe TxIn
forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var">getReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147598"><span class="hs-identifier hs-var">sWit</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Certificate era
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147598"><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147598"><span class="hs-identifier hs-var">sWit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Certificate era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147588"><span class="hs-identifier hs-var">certFiles</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1233"></span><span>        </span><span id="local-6989586621682147599"><span class="annot"><span class="annottext">withdrawalsWitByRefInputs :: [Maybe TxIn]
</span><a href="#local-6989586621682147599"><span class="hs-identifier hs-var hs-var">withdrawalsWitByRefInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era -&gt; Maybe TxIn
forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var">getReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147600"><span class="hs-identifier hs-var">sWit</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeAddress
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147600"><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147600"><span class="hs-identifier hs-var">sWit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147589"><span class="hs-identifier hs-var">withdrawals</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1234"></span><span>        </span><span id="local-6989586621682147601"><span class="annot"><span class="annottext">votesWitByRefInputs :: [Maybe TxIn]
</span><a href="#local-6989586621682147601"><span class="hs-identifier hs-var hs-var">votesWitByRefInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era -&gt; Maybe TxIn
forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var">getReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147602"><span class="hs-identifier hs-var">sWit</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VotingProcedures era
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147602"><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147602"><span class="hs-identifier hs-var">sWit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(VotingProcedures era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147590"><span class="hs-identifier hs-var">votingProceduresAndMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1235"></span><span>        </span><span id="local-6989586621682147603"><span class="annot"><span class="annottext">propsWitByRefInputs :: [Maybe TxIn]
</span><a href="#local-6989586621682147603"><span class="hs-identifier hs-var hs-var">propsWitByRefInputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era -&gt; Maybe TxIn
forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var">getReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147604"><span class="hs-identifier hs-var">sWit</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proposal era
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147604"><span class="annot"><span class="annottext">ScriptWitness WitCtxStake era
</span><a href="#local-6989586621682147604"><span class="hs-identifier hs-var">sWit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Proposal era, Maybe (ScriptWitness WitCtxStake era))]
</span><a href="#local-6989586621682147591"><span class="hs-identifier hs-var">propProceduresAnMaybeScriptWits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1236"></span><span>
</span><span id="line-1237"></span><span>    </span><span class="annot"><span class="annottext">([Maybe TxIn] -&gt; [TxIn]) -&gt; [[Maybe TxIn]] -&gt; [TxIn]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span>
</span><span id="line-1238"></span><span>      </span><span class="annot"><span class="annottext">[Maybe TxIn] -&gt; [TxIn]
forall a. [Maybe a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span>
</span><span id="line-1239"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Maybe TxIn]
</span><a href="#local-6989586621682147593"><span class="hs-identifier hs-var">txinsWitByRefInputs</span></a></span><span>
</span><span id="line-1240"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe TxIn]
</span><a href="#local-6989586621682147596"><span class="hs-identifier hs-var">mintingRefInputs</span></a></span><span>
</span><span id="line-1241"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe TxIn]
</span><a href="#local-6989586621682147597"><span class="hs-identifier hs-var">certsWitByRefInputs</span></a></span><span>
</span><span id="line-1242"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe TxIn]
</span><a href="#local-6989586621682147599"><span class="hs-identifier hs-var">withdrawalsWitByRefInputs</span></a></span><span>
</span><span id="line-1243"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe TxIn]
</span><a href="#local-6989586621682147601"><span class="hs-identifier hs-var">votesWitByRefInputs</span></a></span><span>
</span><span id="line-1244"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe TxIn]
</span><a href="#local-6989586621682147603"><span class="hs-identifier hs-var">propsWitByRefInputs</span></a></span><span>
</span><span id="line-1245"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(TxIn -&gt; Maybe TxIn) -&gt; [TxIn] -&gt; [Maybe TxIn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe TxIn
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621682147592"><span class="hs-identifier hs-var">readOnlyRefIns</span></a></span><span>
</span><span id="line-1246"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1247"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-1248"></span><span>    </span><span id="local-6989586621682146008"><span id="local-6989586621682146009"><span class="annot"><a href="#local-6989586621682147594"><span class="hs-identifier hs-type">getReferenceInput</span></a></span><span>
</span><span id="line-1249"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621682146008"><span class="hs-identifier hs-type">witctx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146009"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span></span></span><span>
</span><span id="line-1250"></span><span>    </span><span id="local-6989586621682147594"><span class="annot"><span class="annottext">getReferenceInput :: forall witctx era. ScriptWitness witctx era -&gt; Maybe TxIn
</span><a href="#local-6989586621682147594"><span class="hs-identifier hs-var hs-var">getReferenceInput</span></a></span></span><span> </span><span id="local-6989586621682147606"><span class="annot"><span class="annottext">ScriptWitness witctx era
</span><a href="#local-6989586621682147606"><span class="hs-identifier hs-var">sWit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1251"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ScriptWitness witctx era
</span><a href="#local-6989586621682147606"><span class="hs-identifier hs-var">sWit</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1252"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra lang era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PReferenceScript</span></span><span> </span><span id="local-6989586621682147609"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147609"><span class="hs-identifier hs-var">refIn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ScriptDatum witctx
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExecutionUnits
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe TxIn
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147609"><span class="hs-identifier hs-var">refIn</span></a></span><span>
</span><span id="line-1253"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra lang era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PScript</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">ScriptDatum witctx
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExecutionUnits
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TxIn
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1254"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SimpleScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra SimpleScript' era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SReferenceScript</span></span><span> </span><span id="local-6989586621682147614"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147614"><span class="hs-identifier hs-var">refIn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe TxIn
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682147614"><span class="hs-identifier hs-var">refIn</span></a></span><span>
</span><span id="line-1255"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SimpleScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra SimpleScript' era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SScript</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TxIn
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span id="local-6989586621682146019"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInAnyEra"><span class="hs-identifier hs-type">toAddressInAnyEra</span></a></span><span>
</span><span id="line-1258"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146019"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1259"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AddressAny</span></span><span>
</span><span id="line-1260"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AddressInEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146019"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1261"></span><span id="toAddressInAnyEra"><span class="annot"><span class="annottext">toAddressInAnyEra :: forall era.
CardanoEra era
-&gt; AddressAny -&gt; Either TxCmdError (AddressInEra era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInAnyEra"><span class="hs-identifier hs-var hs-var">toAddressInAnyEra</span></a></span></span><span> </span><span id="local-6989586621682147627"><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147627"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682147628"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147628"><span class="hs-identifier hs-var">addrAny</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Except TxCmdError (AddressInEra era)
-&gt; Either TxCmdError (AddressInEra era)
forall e a. Except e a -&gt; Either e a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#runExcept"><span class="hs-identifier hs-var">runExcept</span></a></span><span> </span><span class="annot"><span class="annottext">(Except TxCmdError (AddressInEra era)
 -&gt; Either TxCmdError (AddressInEra era))
-&gt; Except TxCmdError (AddressInEra era)
-&gt; Either TxCmdError (AddressInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147628"><span class="hs-identifier hs-var">addrAny</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1263"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">AddressByron</span></span><span> </span><span id="local-6989586621682147631"><span class="annot"><span class="annottext">Address ByronAddr
</span><a href="#local-6989586621682147631"><span class="hs-identifier hs-var">bAddr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AddressInEra era -&gt; Except TxCmdError (AddressInEra era)
forall a. a -&gt; ExceptT TxCmdError Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressTypeInEra ByronAddr era
-&gt; Address ByronAddr -&gt; AddressInEra era
forall addrtype era.
AddressTypeInEra addrtype era
-&gt; Address addrtype -&gt; AddressInEra era
</span><span class="hs-identifier hs-var">AddressInEra</span></span><span> </span><span class="annot"><span class="annottext">AddressTypeInEra ByronAddr era
forall era. AddressTypeInEra ByronAddr era
</span><span class="hs-identifier hs-var">ByronAddressInAnyEra</span></span><span> </span><span class="annot"><span class="annottext">Address ByronAddr
</span><a href="#local-6989586621682147631"><span class="hs-identifier hs-var">bAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1264"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">AddressShelley</span></span><span> </span><span id="local-6989586621682147635"><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621682147635"><span class="hs-identifier hs-var">sAddr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1265"></span><span>      </span><span id="local-6989586621682147636"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147636"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1266"></span><span>        </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; ExceptT TxCmdError Identity (Maybe (ShelleyBasedEra era))
forall (m :: * -&gt; *) era.
Applicative m =&gt;
CardanoEra era -&gt; m (Maybe (ShelleyBasedEra era))
</span><span class="hs-identifier hs-var">requireShelleyBasedEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147627"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1267"></span><span>          </span><span class="annot"><span class="annottext">ExceptT TxCmdError Identity (Maybe (ShelleyBasedEra era))
-&gt; (ExceptT TxCmdError Identity (Maybe (ShelleyBasedEra era))
    -&gt; ExceptT TxCmdError Identity (ShelleyBasedEra era))
-&gt; ExceptT TxCmdError Identity (ShelleyBasedEra era)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT TxCmdError Identity (ShelleyBasedEra era)
-&gt; ExceptT TxCmdError Identity (Maybe (ShelleyBasedEra era))
-&gt; ExceptT TxCmdError Identity (ShelleyBasedEra era)
forall x (m :: * -&gt; *) a.
Monad m =&gt;
ExceptT x m a -&gt; ExceptT x m (Maybe a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; TxFeature -&gt; ExceptT TxCmdError Identity (ShelleyBasedEra era)
forall (m :: * -&gt; *) era a.
Monad m =&gt;
CardanoEra era -&gt; TxFeature -&gt; ExceptT TxCmdError m a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatch"><span class="hs-identifier hs-var">txFeatureMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147627"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureShelleyAddresses"><span class="hs-identifier hs-var">TxFeatureShelleyAddresses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span>      </span><span class="annot"><span class="annottext">AddressInEra era -&gt; Except TxCmdError (AddressInEra era)
forall a. a -&gt; ExceptT TxCmdError Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressTypeInEra ShelleyAddr era
-&gt; Address ShelleyAddr -&gt; AddressInEra era
forall addrtype era.
AddressTypeInEra addrtype era
-&gt; Address addrtype -&gt; AddressInEra era
</span><span class="hs-identifier hs-var">AddressInEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; AddressTypeInEra ShelleyAddr era
forall era. ShelleyBasedEra era -&gt; AddressTypeInEra ShelleyAddr era
</span><span class="hs-identifier hs-var">ShelleyAddressInEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147636"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621682147635"><span class="hs-identifier hs-var">sAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>
</span><span id="line-1271"></span><span id="local-6989586621682146034"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInShelleyBasedEra"><span class="hs-identifier hs-type">toAddressInShelleyBasedEra</span></a></span><span>
</span><span id="line-1272"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146034"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1273"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Address</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyAddr</span></span><span>
</span><span id="line-1274"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AddressInEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146034"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1275"></span><span id="toAddressInShelleyBasedEra"><span class="annot"><span class="annottext">toAddressInShelleyBasedEra :: forall era.
ShelleyBasedEra era
-&gt; Address ShelleyAddr -&gt; Either TxCmdError (AddressInEra era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInShelleyBasedEra"><span class="hs-identifier hs-var hs-var">toAddressInShelleyBasedEra</span></a></span></span><span> </span><span id="local-6989586621682147644"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147644"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682147645"><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621682147645"><span class="hs-identifier hs-var">sAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1276"></span><span>  </span><span class="annot"><span class="annottext">Except TxCmdError (AddressInEra era)
-&gt; Either TxCmdError (AddressInEra era)
forall e a. Except e a -&gt; Either e a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#runExcept"><span class="hs-identifier hs-var">runExcept</span></a></span><span> </span><span class="annot"><span class="annottext">(Except TxCmdError (AddressInEra era)
 -&gt; Either TxCmdError (AddressInEra era))
-&gt; Except TxCmdError (AddressInEra era)
-&gt; Either TxCmdError (AddressInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1277"></span><span>    </span><span class="annot"><span class="annottext">AddressInEra era -&gt; Except TxCmdError (AddressInEra era)
forall a. a -&gt; ExceptT TxCmdError Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressTypeInEra ShelleyAddr era
-&gt; Address ShelleyAddr -&gt; AddressInEra era
forall addrtype era.
AddressTypeInEra addrtype era
-&gt; Address addrtype -&gt; AddressInEra era
</span><span class="hs-identifier hs-var">AddressInEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; AddressTypeInEra ShelleyAddr era
forall era. ShelleyBasedEra era -&gt; AddressTypeInEra ShelleyAddr era
</span><span class="hs-identifier hs-var">ShelleyAddressInEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147644"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621682147645"><span class="hs-identifier hs-var">sAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1278"></span><span>
</span><span id="line-1279"></span><span id="local-6989586621682146036"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutValueInAnyEra"><span class="hs-identifier hs-type">toTxOutValueInAnyEra</span></a></span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146036"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1281"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-1282"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutValue</span></span><span> </span><span class="annot"><a href="#local-6989586621682146036"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1283"></span><span id="toTxOutValueInAnyEra"><span class="annot"><span class="annottext">toTxOutValueInAnyEra :: forall era.
ShelleyBasedEra era -&gt; Value -&gt; Either TxCmdError (TxOutValue era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutValueInAnyEra"><span class="hs-identifier hs-var hs-var">toTxOutValueInAnyEra</span></a></span></span><span> </span><span id="local-6989586621682147647"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147647"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682147648"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147648"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1284"></span><span>  </span><span class="annot"><span class="annottext">(ShelleyToAllegraEraConstraints era =&gt;
 ShelleyToAllegraEra era -&gt; Either TxCmdError (TxOutValue era))
-&gt; (MaryEraOnwardsConstraints era =&gt;
    MaryEraOnwards era -&gt; Either TxCmdError (TxOutValue era))
-&gt; ShelleyBasedEra era
-&gt; Either TxCmdError (TxOutValue era)
forall era a.
(ShelleyToAllegraEraConstraints era =&gt;
 ShelleyToAllegraEra era -&gt; a)
-&gt; (MaryEraOnwardsConstraints era =&gt; MaryEraOnwards era -&gt; a)
-&gt; ShelleyBasedEra era
-&gt; a
</span><span class="hs-identifier hs-var">caseShelleyToAllegraOrMaryEraOnwards</span></span><span>
</span><span id="line-1285"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">ShelleyToAllegraEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Lovelace
</span><span class="hs-identifier hs-var">valueToLovelace</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147648"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1286"></span><span>        </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147668"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147668"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutValue era -&gt; Either TxCmdError (TxOutValue era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
forall era.
(Eq (Value (ShelleyLedgerEra era)),
 Show (Value (ShelleyLedgerEra era))) =&gt;
ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
</span><span class="hs-identifier hs-var">TxOutValueShelleyBased</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147647"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">Value (ShelleyLedgerEra era)
Lovelace
</span><a href="#local-6989586621682147668"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1287"></span><span>        </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError (TxOutValue era)
forall era a. CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-var">txFeatureMismatchPure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147647"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureMultiAssetOutputs"><span class="hs-identifier hs-var">TxFeatureMultiAssetOutputs</span></a></span><span>
</span><span id="line-1288"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147683"><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682147683"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutValue era -&gt; Either TxCmdError (TxOutValue era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
forall era.
(Eq (Value (ShelleyLedgerEra era)),
 Show (Value (ShelleyLedgerEra era))) =&gt;
ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
</span><span class="hs-identifier hs-var">TxOutValueShelleyBased</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147647"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MaryEraOnwards era -&gt; Value -&gt; Value (ShelleyLedgerEra era)
forall era.
MaryEraOnwards era -&gt; Value -&gt; Value (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">toLedgerValue</span></span><span> </span><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682147683"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147648"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1290"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147647"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span id="local-6989586621682147685"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutValueInShelleyBasedEra"><span class="hs-identifier hs-type">toTxOutValueInShelleyBasedEra</span></a></span><span>
</span><span id="line-1293"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682147685"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1294"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutValue</span></span><span> </span><span class="annot"><a href="#local-6989586621682147685"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1296"></span><span id="toTxOutValueInShelleyBasedEra"><span class="annot"><span class="annottext">toTxOutValueInShelleyBasedEra :: forall era.
ShelleyBasedEra era -&gt; Value -&gt; Either TxCmdError (TxOutValue era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutValueInShelleyBasedEra"><span class="hs-identifier hs-var hs-var">toTxOutValueInShelleyBasedEra</span></a></span></span><span> </span><span id="local-6989586621682147687"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147687"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682147688"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147688"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1297"></span><span>  </span><span class="annot"><span class="annottext">(ShelleyToAllegraEraConstraints era =&gt;
 ShelleyToAllegraEra era -&gt; Either TxCmdError (TxOutValue era))
-&gt; (MaryEraOnwardsConstraints era =&gt;
    MaryEraOnwards era -&gt; Either TxCmdError (TxOutValue era))
-&gt; ShelleyBasedEra era
-&gt; Either TxCmdError (TxOutValue era)
forall era a.
(ShelleyToAllegraEraConstraints era =&gt;
 ShelleyToAllegraEra era -&gt; a)
-&gt; (MaryEraOnwardsConstraints era =&gt; MaryEraOnwards era -&gt; a)
-&gt; ShelleyBasedEra era
-&gt; a
</span><span class="hs-identifier hs-var">caseShelleyToAllegraOrMaryEraOnwards</span></span><span>
</span><span id="line-1298"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">ShelleyToAllegraEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Lovelace
</span><span class="hs-identifier hs-var">valueToLovelace</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147688"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1299"></span><span>        </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682147703"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682147703"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutValue era -&gt; Either TxCmdError (TxOutValue era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
forall era.
(Eq (Value (ShelleyLedgerEra era)),
 Show (Value (ShelleyLedgerEra era))) =&gt;
ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
</span><span class="hs-identifier hs-var">TxOutValueShelleyBased</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147687"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Value (ShelleyLedgerEra era)
Lovelace
</span><a href="#local-6989586621682147703"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>        </span><span class="annot"><span class="annottext">Maybe Lovelace
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError (TxOutValue era)
forall era a. CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-var">txFeatureMismatchPure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147687"><span class="hs-identifier hs-var">sbe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureMultiAssetOutputs"><span class="hs-identifier hs-var">TxFeatureMultiAssetOutputs</span></a></span><span>
</span><span id="line-1301"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1302"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147716"><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682147716"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutValue era -&gt; Either TxCmdError (TxOutValue era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
forall era.
(Eq (Value (ShelleyLedgerEra era)),
 Show (Value (ShelleyLedgerEra era))) =&gt;
ShelleyBasedEra era
-&gt; Value (ShelleyLedgerEra era) -&gt; TxOutValue era
</span><span class="hs-identifier hs-var">TxOutValueShelleyBased</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147687"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MaryEraOnwards era -&gt; Value -&gt; Value (ShelleyLedgerEra era)
forall era.
MaryEraOnwards era -&gt; Value -&gt; Value (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">toLedgerValue</span></span><span> </span><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682147716"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147688"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1303"></span><span>    </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147687"><span class="hs-identifier hs-var">sbe</span></a></span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span id="local-6989586621682145509"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInShelleyBasedEra"><span class="hs-identifier hs-type">toTxOutInShelleyBasedEra</span></a></span><span>
</span><span id="line-1306"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145509"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1307"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutShelleyBasedEra"><span class="hs-identifier hs-type">TxOutShelleyBasedEra</span></a></span><span>
</span><span id="line-1308"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145509"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1309"></span><span id="toTxOutInShelleyBasedEra"><span class="annot"><span class="annottext">toTxOutInShelleyBasedEra :: forall era.
ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInShelleyBasedEra"><span class="hs-identifier hs-var hs-var">toTxOutInShelleyBasedEra</span></a></span></span><span> </span><span id="local-6989586621682147727"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147727"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutShelleyBasedEra"><span class="hs-identifier hs-type">TxOutShelleyBasedEra</span></a></span><span> </span><span id="local-6989586621682147729"><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621682147729"><span class="hs-identifier hs-var">addr'</span></a></span></span><span> </span><span id="local-6989586621682147730"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147730"><span class="hs-identifier hs-var">val'</span></a></span></span><span> </span><span id="local-6989586621682147731"><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="#local-6989586621682147731"><span class="hs-identifier hs-var">mDatumHash</span></a></span></span><span> </span><span id="local-6989586621682147732"><span class="annot"><span class="annottext">ReferenceScriptAnyEra
</span><a href="#local-6989586621682147732"><span class="hs-identifier hs-var">refScriptFp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1310"></span><span>  </span><span id="local-6989586621682147733"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621682147733"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (AddressInEra era)
-&gt; ExceptT TxCmdError IO (AddressInEra era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (AddressInEra era)
 -&gt; ExceptT TxCmdError IO (AddressInEra era))
-&gt; Either TxCmdError (AddressInEra era)
-&gt; ExceptT TxCmdError IO (AddressInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Address ShelleyAddr -&gt; Either TxCmdError (AddressInEra era)
forall era.
ShelleyBasedEra era
-&gt; Address ShelleyAddr -&gt; Either TxCmdError (AddressInEra era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInShelleyBasedEra"><span class="hs-identifier hs-var">toAddressInShelleyBasedEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147727"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621682147729"><span class="hs-identifier hs-var">addr'</span></a></span><span>
</span><span id="line-1311"></span><span>  </span><span id="local-6989586621682147734"><span class="annot"><span class="annottext">TxOutValue era
</span><a href="#local-6989586621682147734"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (TxOutValue era)
-&gt; ExceptT TxCmdError IO (TxOutValue era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxOutValue era)
 -&gt; ExceptT TxCmdError IO (TxOutValue era))
-&gt; Either TxCmdError (TxOutValue era)
-&gt; ExceptT TxCmdError IO (TxOutValue era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; Value -&gt; Either TxCmdError (TxOutValue era)
forall era.
ShelleyBasedEra era -&gt; Value -&gt; Either TxCmdError (TxOutValue era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutValueInShelleyBasedEra"><span class="hs-identifier hs-var">toTxOutValueInShelleyBasedEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147727"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147730"><span class="hs-identifier hs-var">val'</span></a></span><span>
</span><span id="line-1312"></span><span>
</span><span id="line-1313"></span><span>  </span><span id="local-6989586621682147735"><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621682147735"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1314"></span><span>    </span><span class="annot"><span class="annottext">(ShelleyToMaryEraConstraints era =&gt;
 ShelleyToMaryEra era
 -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; (AlonzoEraOnwardsConstraints era =&gt;
    AlonzoEraOnwards era
    -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; ShelleyBasedEra era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall era a.
(ShelleyToMaryEraConstraints era =&gt; ShelleyToMaryEra era -&gt; a)
-&gt; (AlonzoEraOnwardsConstraints era =&gt; AlonzoEraOnwards era -&gt; a)
-&gt; ShelleyBasedEra era
-&gt; a
</span><span class="hs-identifier hs-var">caseShelleyToMaryOrAlonzoEraOnwards</span></span><span>
</span><span id="line-1315"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (TxOutDatum CtxTx era)
-&gt; ShelleyToMaryEra era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
forall ctx era. TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumNone</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147742"><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147742"><span class="hs-identifier hs-var">wa</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
-&gt; TxOutDatumAnyEra -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall era.
AlonzoEraOnwards era
-&gt; TxOutDatumAnyEra -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxAlonzoDatum"><span class="hs-identifier hs-var">toTxAlonzoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147742"><span class="hs-identifier hs-var">wa</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="#local-6989586621682147731"><span class="hs-identifier hs-var">mDatumHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147727"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1318"></span><span>
</span><span id="line-1319"></span><span>  </span><span id="local-6989586621682147744"><span class="annot"><span class="annottext">ReferenceScript era
</span><a href="#local-6989586621682147744"><span class="hs-identifier hs-var">refScript</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1320"></span><span>    </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (ReferenceScript era)
-&gt; (BabbageEraOnwards era
    -&gt; ExceptT TxCmdError IO (ReferenceScript era))
-&gt; CardanoEra era
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall a era.
a -&gt; (BabbageEraOnwards era -&gt; a) -&gt; CardanoEra era -&gt; a
forall (eon :: * -&gt; *) a era.
Eon eon =&gt;
a -&gt; (eon era -&gt; a) -&gt; CardanoEra era -&gt; a
</span><span class="hs-identifier hs-var">inEonForEra</span></span><span>
</span><span id="line-1321"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReferenceScript era -&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
forall era. ReferenceScript era
</span><span class="hs-identifier hs-var">ReferenceScriptNone</span></span><span class="hs-special">)</span><span>
</span><span id="line-1322"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147746"><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147746"><span class="hs-identifier hs-var">wb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
-&gt; ReferenceScriptAnyEra
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall era.
BabbageEraOnwards era
-&gt; ReferenceScriptAnyEra
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getReferenceScript"><span class="hs-identifier hs-var">getReferenceScript</span></a></span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147746"><span class="hs-identifier hs-var">wb</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptAnyEra
</span><a href="#local-6989586621682147732"><span class="hs-identifier hs-var">refScriptFp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147727"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1324"></span><span>
</span><span id="line-1325"></span><span>  </span><span class="annot"><span class="annottext">TxOut CtxTx era -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxTx era -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; TxOut CtxTx era -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum CtxTx era
-&gt; ReferenceScript era
-&gt; TxOut CtxTx era
forall ctx era.
AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum ctx era
-&gt; ReferenceScript era
-&gt; TxOut ctx era
</span><span class="hs-identifier hs-var">TxOut</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621682147733"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutValue era
</span><a href="#local-6989586621682147734"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621682147735"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><a href="#local-6989586621682147744"><span class="hs-identifier hs-var">refScript</span></a></span><span>
</span><span id="line-1326"></span><span>
</span><span id="line-1327"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutByronEra"><span class="hs-identifier hs-type">toTxOutByronEra</span></a></span><span>
</span><span id="line-1328"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutAnyEra"><span class="hs-identifier hs-type">TxOutAnyEra</span></a></span><span>
</span><span id="line-1329"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByronEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span id="toTxOutByronEra"><span class="annot"><span class="annottext">toTxOutByronEra :: TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx ByronEra)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutByronEra"><span class="hs-identifier hs-var hs-var">toTxOutByronEra</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutAnyEra"><span class="hs-identifier hs-type">TxOutAnyEra</span></a></span><span> </span><span id="local-6989586621682147750"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147750"><span class="hs-identifier hs-var">addr'</span></a></span></span><span> </span><span id="local-6989586621682147751"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147751"><span class="hs-identifier hs-var">val'</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptAnyEra
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1331"></span><span>  </span><span id="local-6989586621682147752"><span class="annot"><span class="annottext">AddressInEra ByronEra
</span><a href="#local-6989586621682147752"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (AddressInEra ByronEra)
-&gt; ExceptT TxCmdError IO (AddressInEra ByronEra)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (AddressInEra ByronEra)
 -&gt; ExceptT TxCmdError IO (AddressInEra ByronEra))
-&gt; Either TxCmdError (AddressInEra ByronEra)
-&gt; ExceptT TxCmdError IO (AddressInEra ByronEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra ByronEra
-&gt; AddressAny -&gt; Either TxCmdError (AddressInEra ByronEra)
forall era.
CardanoEra era
-&gt; AddressAny -&gt; Either TxCmdError (AddressInEra era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInAnyEra"><span class="hs-identifier hs-var">toAddressInAnyEra</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra ByronEra
</span><span class="hs-identifier hs-var">ByronEra</span></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147750"><span class="hs-identifier hs-var">addr'</span></a></span><span>
</span><span id="line-1332"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147754"><span class="annot"><span class="annottext">ada :: TxOutValue ByronEra
</span><a href="#local-6989586621682147754"><span class="hs-identifier hs-var hs-var">ada</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; TxOutValue ByronEra
forall era. Lovelace -&gt; TxOutValue era
</span><span class="hs-identifier hs-var">TxOutValueByron</span></span><span> </span><span class="annot"><span class="annottext">(Lovelace -&gt; TxOutValue ByronEra)
-&gt; Lovelace -&gt; TxOutValue ByronEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Lovelace
</span><span class="hs-identifier hs-var">selectLovelace</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147751"><span class="hs-identifier hs-var">val'</span></a></span><span>
</span><span id="line-1333"></span><span>  </span><span class="annot"><span class="annottext">TxOut CtxTx ByronEra
-&gt; ExceptT TxCmdError IO (TxOut CtxTx ByronEra)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxTx ByronEra
 -&gt; ExceptT TxCmdError IO (TxOut CtxTx ByronEra))
-&gt; TxOut CtxTx ByronEra
-&gt; ExceptT TxCmdError IO (TxOut CtxTx ByronEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddressInEra ByronEra
-&gt; TxOutValue ByronEra
-&gt; TxOutDatum CtxTx ByronEra
-&gt; ReferenceScript ByronEra
-&gt; TxOut CtxTx ByronEra
forall ctx era.
AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum ctx era
-&gt; ReferenceScript era
-&gt; TxOut ctx era
</span><span class="hs-identifier hs-var">TxOut</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra ByronEra
</span><a href="#local-6989586621682147752"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutValue ByronEra
</span><a href="#local-6989586621682147754"><span class="hs-identifier hs-var">ada</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx ByronEra
forall ctx era. TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumNone</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScript ByronEra
forall era. ReferenceScript era
</span><span class="hs-identifier hs-var">ReferenceScriptNone</span></span><span>
</span><span id="line-1334"></span><span>
</span><span id="line-1335"></span><span class="hs-comment">-- TODO: toTxOutInAnyEra eventually will not be needed because</span><span>
</span><span id="line-1336"></span><span class="hs-comment">-- byron related functionality will be treated</span><span>
</span><span id="line-1337"></span><span class="hs-comment">-- separately</span><span>
</span><span id="line-1338"></span><span id="local-6989586621682145510"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInAnyEra"><span class="hs-identifier hs-type">toTxOutInAnyEra</span></a></span><span>
</span><span id="line-1339"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145510"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1340"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutAnyEra"><span class="hs-identifier hs-type">TxOutAnyEra</span></a></span><span>
</span><span id="line-1341"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145510"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1342"></span><span id="toTxOutInAnyEra"><span class="annot"><span class="annottext">toTxOutInAnyEra :: forall era.
ShelleyBasedEra era
-&gt; TxOutAnyEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInAnyEra"><span class="hs-identifier hs-var hs-var">toTxOutInAnyEra</span></a></span></span><span> </span><span id="local-6989586621682147765"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147765"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutAnyEra"><span class="hs-identifier hs-type">TxOutAnyEra</span></a></span><span> </span><span id="local-6989586621682147766"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147766"><span class="hs-identifier hs-var">addr'</span></a></span></span><span> </span><span id="local-6989586621682147767"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147767"><span class="hs-identifier hs-var">val'</span></a></span></span><span> </span><span id="local-6989586621682147768"><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="#local-6989586621682147768"><span class="hs-identifier hs-var">mDatumHash</span></a></span></span><span> </span><span id="local-6989586621682147769"><span class="annot"><span class="annottext">ReferenceScriptAnyEra
</span><a href="#local-6989586621682147769"><span class="hs-identifier hs-var">refScriptFp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1343"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147770"><span class="annot"><span class="annottext">cEra :: CardanoEra era
</span><a href="#local-6989586621682147770"><span class="hs-identifier hs-var hs-var">cEra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147765"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1344"></span><span>  </span><span id="local-6989586621682147771"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621682147771"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (AddressInEra era)
-&gt; ExceptT TxCmdError IO (AddressInEra era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (AddressInEra era)
 -&gt; ExceptT TxCmdError IO (AddressInEra era))
-&gt; Either TxCmdError (AddressInEra era)
-&gt; ExceptT TxCmdError IO (AddressInEra era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; AddressAny -&gt; Either TxCmdError (AddressInEra era)
forall era.
CardanoEra era
-&gt; AddressAny -&gt; Either TxCmdError (AddressInEra era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toAddressInAnyEra"><span class="hs-identifier hs-var">toAddressInAnyEra</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147770"><span class="hs-identifier hs-var">cEra</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621682147766"><span class="hs-identifier hs-var">addr'</span></a></span><span>
</span><span id="line-1345"></span><span>  </span><span id="local-6989586621682147772"><span class="annot"><span class="annottext">TxOutValue era
</span><a href="#local-6989586621682147772"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either TxCmdError (TxOutValue era)
-&gt; ExceptT TxCmdError IO (TxOutValue era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TxCmdError (TxOutValue era)
 -&gt; ExceptT TxCmdError IO (TxOutValue era))
-&gt; Either TxCmdError (TxOutValue era)
-&gt; ExceptT TxCmdError IO (TxOutValue era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; Value -&gt; Either TxCmdError (TxOutValue era)
forall era.
ShelleyBasedEra era -&gt; Value -&gt; Either TxCmdError (TxOutValue era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutValueInAnyEra"><span class="hs-identifier hs-var">toTxOutValueInAnyEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147765"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147767"><span class="hs-identifier hs-var">val'</span></a></span><span>
</span><span id="line-1346"></span><span>
</span><span id="line-1347"></span><span>  </span><span id="local-6989586621682147773"><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621682147773"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1348"></span><span>    </span><span class="annot"><span class="annottext">(ShelleyToMaryEraConstraints era =&gt;
 ShelleyToMaryEra era
 -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; (AlonzoEraOnwardsConstraints era =&gt;
    AlonzoEraOnwards era
    -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; ShelleyBasedEra era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall era a.
(ShelleyToMaryEraConstraints era =&gt; ShelleyToMaryEra era -&gt; a)
-&gt; (AlonzoEraOnwardsConstraints era =&gt; AlonzoEraOnwards era -&gt; a)
-&gt; ShelleyBasedEra era
-&gt; a
</span><span class="hs-identifier hs-var">caseShelleyToMaryOrAlonzoEraOnwards</span></span><span>
</span><span id="line-1349"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (TxOutDatum CtxTx era)
-&gt; ShelleyToMaryEra era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
forall ctx era. TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumNone</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1350"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147777"><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147777"><span class="hs-identifier hs-var">wa</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
-&gt; TxOutDatumAnyEra -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall era.
AlonzoEraOnwards era
-&gt; TxOutDatumAnyEra -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxAlonzoDatum"><span class="hs-identifier hs-var">toTxAlonzoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147777"><span class="hs-identifier hs-var">wa</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="#local-6989586621682147768"><span class="hs-identifier hs-var">mDatumHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147765"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1352"></span><span>
</span><span id="line-1353"></span><span>  </span><span id="local-6989586621682147778"><span class="annot"><span class="annottext">ReferenceScript era
</span><a href="#local-6989586621682147778"><span class="hs-identifier hs-var">refScript</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1354"></span><span>    </span><span class="annot"><span class="annottext">(ShelleyToAlonzoEraConstraints era =&gt;
 ShelleyToAlonzoEra era
 -&gt; ExceptT TxCmdError IO (ReferenceScript era))
-&gt; (BabbageEraOnwardsConstraints era =&gt;
    BabbageEraOnwards era
    -&gt; ExceptT TxCmdError IO (ReferenceScript era))
-&gt; ShelleyBasedEra era
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall era a.
(ShelleyToAlonzoEraConstraints era =&gt; ShelleyToAlonzoEra era -&gt; a)
-&gt; (BabbageEraOnwardsConstraints era =&gt; BabbageEraOnwards era -&gt; a)
-&gt; ShelleyBasedEra era
-&gt; a
</span><span class="hs-identifier hs-var">caseShelleyToAlonzoOrBabbageEraOnwards</span></span><span>
</span><span id="line-1355"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (ReferenceScript era)
-&gt; ShelleyToAlonzoEra era
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReferenceScript era -&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
forall era. ReferenceScript era
</span><span class="hs-identifier hs-var">ReferenceScriptNone</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682147783"><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147783"><span class="hs-identifier hs-var">wb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
-&gt; ReferenceScriptAnyEra
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall era.
BabbageEraOnwards era
-&gt; ReferenceScriptAnyEra
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getReferenceScript"><span class="hs-identifier hs-var">getReferenceScript</span></a></span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147783"><span class="hs-identifier hs-var">wb</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptAnyEra
</span><a href="#local-6989586621682147769"><span class="hs-identifier hs-var">refScriptFp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1357"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147765"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1358"></span><span>  </span><span class="annot"><span class="annottext">TxOut CtxTx era -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxTx era -&gt; ExceptT TxCmdError IO (TxOut CtxTx era))
-&gt; TxOut CtxTx era -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum CtxTx era
-&gt; ReferenceScript era
-&gt; TxOut CtxTx era
forall ctx era.
AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum ctx era
-&gt; ReferenceScript era
-&gt; TxOut ctx era
</span><span class="hs-identifier hs-var">TxOut</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621682147771"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutValue era
</span><a href="#local-6989586621682147772"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621682147773"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><a href="#local-6989586621682147778"><span class="hs-identifier hs-var">refScript</span></a></span><span>
</span><span id="line-1359"></span><span>
</span><span id="line-1360"></span><span id="local-6989586621682146068"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#getReferenceScript"><span class="hs-identifier hs-type">getReferenceScript</span></a></span><span>
</span><span id="line-1361"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1362"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BabbageEraOnwards</span></span><span> </span><span class="annot"><a href="#local-6989586621682146068"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1363"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#ReferenceScriptAnyEra"><span class="hs-identifier hs-type">ReferenceScriptAnyEra</span></a></span><span>
</span><span id="line-1364"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReferenceScript</span></span><span> </span><span class="annot"><a href="#local-6989586621682146068"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1365"></span><span id="getReferenceScript"><span class="annot"><span class="annottext">getReferenceScript :: forall era.
BabbageEraOnwards era
-&gt; ReferenceScriptAnyEra
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#getReferenceScript"><span class="hs-identifier hs-var hs-var">getReferenceScript</span></a></span></span><span> </span><span id="local-6989586621682147788"><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147788"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1366"></span><span>  </span><span class="annot"><span class="annottext">ReferenceScriptAnyEra
</span><a href="Cardano.CLI.Types.Common.html#ReferenceScriptAnyEraNone"><span class="hs-identifier hs-var">ReferenceScriptAnyEraNone</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReferenceScript era -&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
forall era. ReferenceScript era
</span><span class="hs-identifier hs-var">ReferenceScriptNone</span></span><span>
</span><span id="line-1367"></span><span>  </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#ReferenceScriptAnyEra"><span class="hs-identifier hs-type">ReferenceScriptAnyEra</span></a></span><span> </span><span id="local-6989586621682147791"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147791"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era -&gt; ScriptInAnyLang -&gt; ReferenceScript era
forall era.
BabbageEraOnwards era -&gt; ScriptInAnyLang -&gt; ReferenceScript era
</span><span class="hs-identifier hs-var">ReferenceScript</span></span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147788"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptInAnyLang -&gt; ReferenceScript era)
-&gt; ExceptT TxCmdError IO ScriptInAnyLang
-&gt; ExceptT TxCmdError IO (ReferenceScript era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError ScriptDecodeError -&gt; TxCmdError)
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
-&gt; ExceptT TxCmdError IO ScriptInAnyLang
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError ScriptDecodeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptFileError"><span class="hs-identifier hs-var">TxCmdScriptFileError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *).
MonadIOTransError (FileError ScriptDecodeError) t m =&gt;
FilePath -&gt; t m ScriptInAnyLang
</span><a href="Cardano.CLI.Read.html#readFileScriptInAnyLang"><span class="hs-identifier hs-var">readFileScriptInAnyLang</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147791"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1368"></span><span>
</span><span id="line-1369"></span><span id="local-6989586621682146065"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxAlonzoDatum"><span class="hs-identifier hs-type">toTxAlonzoDatum</span></a></span><span>
</span><span id="line-1370"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AlonzoEraOnwards</span></span><span> </span><span class="annot"><a href="#local-6989586621682146065"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1372"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutDatumAnyEra"><span class="hs-identifier hs-type">TxOutDatumAnyEra</span></a></span><span>
</span><span id="line-1373"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatum</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682146065"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1374"></span><span id="toTxAlonzoDatum"><span class="annot"><span class="annottext">toTxAlonzoDatum :: forall era.
AlonzoEraOnwards era
-&gt; TxOutDatumAnyEra -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxAlonzoDatum"><span class="hs-identifier hs-var hs-var">toTxAlonzoDatum</span></a></span></span><span> </span><span id="local-6989586621682147811"><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147811"><span class="hs-identifier hs-var">supp</span></a></span></span><span> </span><span id="local-6989586621682147812"><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="#local-6989586621682147812"><span class="hs-identifier hs-var">cliDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1375"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="#local-6989586621682147812"><span class="hs-identifier hs-var">cliDatum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1376"></span><span>    </span><span class="annot"><span class="annottext">TxOutDatumAnyEra
</span><a href="Cardano.CLI.Types.Common.html#TxOutDatumByNone"><span class="hs-identifier hs-var">TxOutDatumByNone</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
forall ctx era. TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumNone</span></span><span>
</span><span id="line-1377"></span><span>    </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutDatumByHashOnly"><span class="hs-identifier hs-type">TxOutDatumByHashOnly</span></a></span><span> </span><span id="local-6989586621682147815"><span class="annot"><span class="annottext">Hash ScriptData
</span><a href="#local-6989586621682147815"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AlonzoEraOnwards era -&gt; Hash ScriptData -&gt; TxOutDatum CtxTx era
forall era ctx.
AlonzoEraOnwards era -&gt; Hash ScriptData -&gt; TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumHash</span></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147811"><span class="hs-identifier hs-var">supp</span></a></span><span> </span><span class="annot"><span class="annottext">Hash ScriptData
</span><a href="#local-6989586621682147815"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>    </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutDatumByHashOf"><span class="hs-identifier hs-type">TxOutDatumByHashOf</span></a></span><span> </span><span id="local-6989586621682147818"><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682147818"><span class="hs-identifier hs-var">sDataOrFile</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1379"></span><span>      </span><span id="local-6989586621682147819"><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682147819"><span class="hs-identifier hs-var">sData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptDataError -&gt; TxCmdError)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptDataError"><span class="hs-identifier hs-var">TxCmdScriptDataError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ScriptDataError IO ScriptRedeemer
 -&gt; ExceptT TxCmdError IO ScriptRedeemer)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile -&gt; ExceptT ScriptDataError IO ScriptRedeemer
forall (m :: * -&gt; *).
MonadIO m =&gt;
ScriptDataOrFile -&gt; ExceptT ScriptDataError m ScriptRedeemer
</span><a href="Cardano.CLI.Read.html#readScriptDataOrFile"><span class="hs-identifier hs-var">readScriptDataOrFile</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682147818"><span class="hs-identifier hs-var">sDataOrFile</span></a></span><span>
</span><span id="line-1380"></span><span>      </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AlonzoEraOnwards era -&gt; Hash ScriptData -&gt; TxOutDatum CtxTx era
forall era ctx.
AlonzoEraOnwards era -&gt; Hash ScriptData -&gt; TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumHash</span></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147811"><span class="hs-identifier hs-var">supp</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash ScriptData -&gt; TxOutDatum CtxTx era)
-&gt; Hash ScriptData -&gt; TxOutDatum CtxTx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer -&gt; Hash ScriptData
</span><span class="hs-identifier hs-var">hashScriptDataBytes</span></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682147819"><span class="hs-identifier hs-var">sData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1381"></span><span>    </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutDatumByValue"><span class="hs-identifier hs-type">TxOutDatumByValue</span></a></span><span> </span><span id="local-6989586621682147824"><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682147824"><span class="hs-identifier hs-var">sDataOrFile</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1382"></span><span>      </span><span id="local-6989586621682147825"><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682147825"><span class="hs-identifier hs-var">sData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptDataError -&gt; TxCmdError)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptDataError"><span class="hs-identifier hs-var">TxCmdScriptDataError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ScriptDataError IO ScriptRedeemer
 -&gt; ExceptT TxCmdError IO ScriptRedeemer)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile -&gt; ExceptT ScriptDataError IO ScriptRedeemer
forall (m :: * -&gt; *).
MonadIO m =&gt;
ScriptDataOrFile -&gt; ExceptT ScriptDataError m ScriptRedeemer
</span><a href="Cardano.CLI.Read.html#readScriptDataOrFile"><span class="hs-identifier hs-var">readScriptDataOrFile</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682147824"><span class="hs-identifier hs-var">sDataOrFile</span></a></span><span>
</span><span id="line-1383"></span><span>      </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AlonzoEraOnwards era -&gt; ScriptRedeemer -&gt; TxOutDatum CtxTx era
forall era.
AlonzoEraOnwards era -&gt; ScriptRedeemer -&gt; TxOutDatum CtxTx era
</span><span class="hs-identifier hs-var">TxOutSupplementalDatum</span></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147811"><span class="hs-identifier hs-var">supp</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682147825"><span class="hs-identifier hs-var">sData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1384"></span><span>    </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxOutInlineDatumByValue"><span class="hs-identifier hs-type">TxOutInlineDatumByValue</span></a></span><span> </span><span id="local-6989586621682147828"><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682147828"><span class="hs-identifier hs-var">sDataOrFile</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1385"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147829"><span class="annot"><span class="annottext">cEra :: CardanoEra era
</span><a href="#local-6989586621682147829"><span class="hs-identifier hs-var hs-var">cEra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era -&gt; CardanoEra era
forall era. AlonzoEraOnwards era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">AlonzoEraOnwards era
</span><a href="#local-6989586621682147811"><span class="hs-identifier hs-var">supp</span></a></span><span>
</span><span id="line-1386"></span><span>      </span><span class="annot"><span class="annottext">CardanoEra era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
-&gt; (BabbageEraOnwards era
    -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall (eon :: * -&gt; *) era a.
Eon eon =&gt;
CardanoEra era -&gt; a -&gt; (eon era -&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">forEraInEon</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147829"><span class="hs-identifier hs-var">cEra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; TxFeature -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall (m :: * -&gt; *) era a.
Monad m =&gt;
CardanoEra era -&gt; TxFeature -&gt; ExceptT TxCmdError m a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatch"><span class="hs-identifier hs-var">txFeatureMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621682147829"><span class="hs-identifier hs-var">cEra</span></a></span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureInlineDatums"><span class="hs-identifier hs-var">TxFeatureInlineDatums</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((BabbageEraOnwards era
  -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
 -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; (BabbageEraOnwards era
    -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147831"><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147831"><span class="hs-identifier hs-var">babbageOnwards</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1387"></span><span>        </span><span id="local-6989586621682147832"><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682147832"><span class="hs-identifier hs-var">sData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptDataError -&gt; TxCmdError)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptDataError"><span class="hs-identifier hs-var">TxCmdScriptDataError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ScriptDataError IO ScriptRedeemer
 -&gt; ExceptT TxCmdError IO ScriptRedeemer)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile -&gt; ExceptT ScriptDataError IO ScriptRedeemer
forall (m :: * -&gt; *).
MonadIO m =&gt;
ScriptDataOrFile -&gt; ExceptT ScriptDataError m ScriptRedeemer
</span><a href="Cardano.CLI.Read.html#readScriptDataOrFile"><span class="hs-identifier hs-var">readScriptDataOrFile</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682147828"><span class="hs-identifier hs-var">sDataOrFile</span></a></span><span>
</span><span id="line-1388"></span><span>        </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutDatum CtxTx era
 -&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era))
-&gt; TxOutDatum CtxTx era
-&gt; ExceptT TxCmdError IO (TxOutDatum CtxTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era -&gt; ScriptRedeemer -&gt; TxOutDatum CtxTx era
forall era ctx.
BabbageEraOnwards era -&gt; ScriptRedeemer -&gt; TxOutDatum ctx era
</span><span class="hs-identifier hs-var">TxOutDatumInline</span></span><span> </span><span class="annot"><span class="annottext">BabbageEraOnwards era
</span><a href="#local-6989586621682147831"><span class="hs-identifier hs-var">babbageOnwards</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682147832"><span class="hs-identifier hs-var">sData</span></a></span><span>
</span><span id="line-1389"></span><span>
</span><span id="line-1390"></span><span class="hs-comment">-- TODO: Currently we specify the policyId with the '--mint' option on the cli</span><span>
</span><span id="line-1391"></span><span class="hs-comment">-- and we added a separate '--policy-id' parser that parses the policy id for the</span><span>
</span><span id="line-1392"></span><span class="hs-comment">-- given reference input (since we don't have the script in this case). To avoid asking</span><span>
</span><span id="line-1393"></span><span class="hs-comment">-- for the policy id twice (in the build command) we can potentially query the UTxO and</span><span>
</span><span id="line-1394"></span><span class="hs-comment">-- access the script (and therefore the policy id).</span><span>
</span><span id="line-1395"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#createTxMintValue"><span class="hs-identifier hs-type">createTxMintValue</span></a></span><span>
</span><span id="line-1396"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682145866"><span class="annot"><a href="#local-6989586621682145866"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-1397"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682145866"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1398"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#MintScriptWitnessWithPolicyId"><span class="hs-identifier hs-type">MintScriptWitnessWithPolicyId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1399"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxMintValue</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="annot"><a href="#local-6989586621682145866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1400"></span><span id="createTxMintValue"><span class="annot"><span class="annottext">createTxMintValue :: forall era.
ShelleyBasedEra era
-&gt; (Value, [MintScriptWitnessWithPolicyId era])
-&gt; Either TxCmdError (TxMintValue BuildTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#createTxMintValue"><span class="hs-identifier hs-var hs-var">createTxMintValue</span></a></span></span><span> </span><span id="local-6989586621682147839"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147839"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147840"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147840"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147841"><span class="annot"><span class="annottext">[MintScriptWitnessWithPolicyId era]
</span><a href="#local-6989586621682147841"><span class="hs-identifier hs-var">scriptWitnesses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1401"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(AssetId, Quantity)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">List.null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; [Item Value]
forall l. IsList l =&gt; l -&gt; [Item l]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147840"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">[MintScriptWitnessWithPolicyId era] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">List.null</span></a></span><span> </span><span class="annot"><span class="annottext">[MintScriptWitnessWithPolicyId era]
</span><a href="#local-6989586621682147841"><span class="hs-identifier hs-var">scriptWitnesses</span></a></span><span>
</span><span id="line-1402"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx era
-&gt; Either TxCmdError (TxMintValue BuildTx era)
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx era
forall build era. TxMintValue build era
</span><span class="hs-identifier hs-var">TxMintNone</span></span><span>
</span><span id="line-1403"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1404"></span><span>      </span><span class="annot"><span class="annottext">(ShelleyToAllegraEraConstraints era =&gt;
 ShelleyToAllegraEra era
 -&gt; Either TxCmdError (TxMintValue BuildTx era))
-&gt; (MaryEraOnwardsConstraints era =&gt;
    MaryEraOnwards era -&gt; Either TxCmdError (TxMintValue BuildTx era))
-&gt; ShelleyBasedEra era
-&gt; Either TxCmdError (TxMintValue BuildTx era)
forall era a.
(ShelleyToAllegraEraConstraints era =&gt;
 ShelleyToAllegraEra era -&gt; a)
-&gt; (MaryEraOnwardsConstraints era =&gt; MaryEraOnwards era -&gt; a)
-&gt; ShelleyBasedEra era
-&gt; a
</span><span class="hs-identifier hs-var">caseShelleyToAllegraOrMaryEraOnwards</span></span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either TxCmdError (TxMintValue BuildTx era)
-&gt; ShelleyToAllegraEra era
-&gt; Either TxCmdError (TxMintValue BuildTx era)
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; TxFeature -&gt; Either TxCmdError (TxMintValue BuildTx era)
forall era a. CardanoEra era -&gt; TxFeature -&gt; Either TxCmdError a
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#txFeatureMismatchPure"><span class="hs-identifier hs-var">txFeatureMismatchPure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147839"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxFeature
</span><a href="Cardano.CLI.Types.TxFeature.html#TxFeatureMintValue"><span class="hs-identifier hs-var">TxFeatureMintValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147860"><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682147860"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1407"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682147861"><span class="hs-identifier hs-type">policiesWithAssets</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PolicyId</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AssetName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Quantity</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1408"></span><span>                </span><span id="local-6989586621682147861"><span class="annot"><span class="annottext">policiesWithAssets :: [(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621682147861"><span class="hs-identifier hs-var hs-var">policiesWithAssets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147862"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621682147863"><span class="hs-identifier hs-var">assetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682147864"><span class="hs-identifier hs-var">quantity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AssetId</span></span><span> </span><span id="local-6989586621682147862"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147862"><span class="hs-identifier hs-var">pid</span></a></span></span><span> </span><span id="local-6989586621682147863"><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621682147863"><span class="hs-identifier hs-var">assetName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147864"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682147864"><span class="hs-identifier hs-var">quantity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; [Item Value]
forall l. IsList l =&gt; l -&gt; [Item l]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621682147840"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1409"></span><span>                </span><span class="hs-comment">-- The set of policy ids for which we need witnesses:</span><span>
</span><span id="line-1410"></span><span>                </span><span class="annot"><a href="#local-6989586621682147866"><span class="hs-identifier hs-type">witnessesNeededSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PolicyId</span></span><span>
</span><span id="line-1411"></span><span>                </span><span id="local-6989586621682147866"><span class="annot"><span class="annottext">witnessesNeededSet :: Set PolicyId
</span><a href="#local-6989586621682147866"><span class="hs-identifier hs-var hs-var">witnessesNeededSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Item (Set PolicyId)] -&gt; Set PolicyId
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set PolicyId)
PolicyId
</span><a href="#local-6989586621682147867"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147867"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147867"><span class="hs-identifier hs-var">pid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AssetName
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621682147861"><span class="hs-identifier hs-var">policiesWithAssets</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1412"></span><span>
</span><span id="line-1413"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682147868"><span class="hs-identifier hs-type">witnessesProvidedMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PolicyId</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WitCtxMint</span></span><span> </span><span class="annot"><a href="#local-6989586621682145866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span>                </span><span id="local-6989586621682147868"><span class="annot"><span class="annottext">witnessesProvidedMap :: Map PolicyId (ScriptWitness WitCtxMint era)
</span><a href="#local-6989586621682147868"><span class="hs-identifier hs-var hs-var">witnessesProvidedMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Item (Map PolicyId (ScriptWitness WitCtxMint era))]
-&gt; Map PolicyId (ScriptWitness WitCtxMint era)
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#fromList"><span class="hs-identifier hs-var">fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Item (Map PolicyId (ScriptWitness WitCtxMint era))]
 -&gt; Map PolicyId (ScriptWitness WitCtxMint era))
-&gt; [Item (Map PolicyId (ScriptWitness WitCtxMint era))]
-&gt; Map PolicyId (ScriptWitness WitCtxMint era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147869"><span class="hs-identifier hs-var">polid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxMint era
</span><a href="#local-6989586621682147870"><span class="hs-identifier hs-var">sWit</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Script.Mint.Types.html#MintScriptWitnessWithPolicyId"><span class="hs-identifier hs-type">MintScriptWitnessWithPolicyId</span></a></span><span> </span><span id="local-6989586621682147869"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147869"><span class="hs-identifier hs-var">polid</span></a></span></span><span> </span><span id="local-6989586621682147870"><span class="annot"><span class="annottext">ScriptWitness WitCtxMint era
</span><a href="#local-6989586621682147870"><span class="hs-identifier hs-var">sWit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[MintScriptWitnessWithPolicyId era]
</span><a href="#local-6989586621682147841"><span class="hs-identifier hs-var">scriptWitnesses</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1415"></span><span>                </span><span id="local-6989586621682147872"><span class="annot"><span class="annottext">witnessesProvidedSet :: Set PolicyId
</span><a href="#local-6989586621682147872"><span class="hs-identifier hs-var hs-var">witnessesProvidedSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map PolicyId (ScriptWitness WitCtxMint era) -&gt; Set PolicyId
forall k a. Map k a -&gt; Set k
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Internal.html#keysSet"><span class="hs-identifier hs-var">Map.keysSet</span></a></span><span> </span><span class="annot"><span class="annottext">Map PolicyId (ScriptWitness WitCtxMint era)
</span><a href="#local-6989586621682147868"><span class="hs-identifier hs-var">witnessesProvidedMap</span></a></span><span>
</span><span id="line-1416"></span><span>                </span><span id="local-6989586621682147874"><span class="annot"><span class="annottext">policiesWithWitnesses :: Map
  PolicyId
  [(AssetName, Quantity,
    BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
</span><a href="#local-6989586621682147874"><span class="hs-identifier hs-var hs-var">policiesWithWitnesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1417"></span><span>                  </span><span class="annot"><span class="annottext">([(AssetName, Quantity,
   BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
 -&gt; [(AssetName, Quantity,
      BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
 -&gt; [(AssetName, Quantity,
      BuildTxWith BuildTx (ScriptWitness WitCtxMint era))])
-&gt; [(PolicyId,
     [(AssetName, Quantity,
       BuildTxWith BuildTx (ScriptWitness WitCtxMint era))])]
-&gt; Map
     PolicyId
     [(AssetName, Quantity,
       BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Strict.Internal.html#fromListWith"><span class="hs-identifier hs-var">Map.fromListWith</span></a></span><span>
</span><span id="line-1418"></span><span>                    </span><span class="annot"><span class="annottext">[(AssetName, Quantity,
  BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
-&gt; [(AssetName, Quantity,
     BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
-&gt; [(AssetName, Quantity,
     BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span>
</span><span id="line-1419"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147876"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621682147877"><span class="hs-identifier hs-var">assetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682147878"><span class="hs-identifier hs-var">quantity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxMint era
-&gt; BuildTxWith BuildTx (ScriptWitness WitCtxMint era)
forall a. a -&gt; BuildTxWith BuildTx a
</span><span class="hs-identifier hs-var">BuildTxWith</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitness WitCtxMint era
</span><a href="#local-6989586621682147879"><span class="hs-identifier hs-var">witness</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147876"><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147876"><span class="hs-identifier hs-var">pid</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147877"><span class="annot"><span class="annottext">AssetName
</span><a href="#local-6989586621682147877"><span class="hs-identifier hs-var">assetName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147878"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682147878"><span class="hs-identifier hs-var">quantity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(PolicyId, AssetName, Quantity)]
</span><a href="#local-6989586621682147861"><span class="hs-identifier hs-var">policiesWithAssets</span></a></span><span>
</span><span id="line-1421"></span><span>                    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147879"><span class="annot"><span class="annottext">ScriptWitness WitCtxMint era
</span><a href="#local-6989586621682147879"><span class="hs-identifier hs-var">witness</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (ScriptWitness WitCtxMint era)
-&gt; [ScriptWitness WitCtxMint era]
forall a. Maybe a -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Maybe.html#maybeToList"><span class="hs-identifier hs-var">maybeToList</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (ScriptWitness WitCtxMint era)
 -&gt; [ScriptWitness WitCtxMint era])
-&gt; Maybe (ScriptWitness WitCtxMint era)
-&gt; [ScriptWitness WitCtxMint era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PolicyId
-&gt; Map PolicyId (ScriptWitness WitCtxMint era)
-&gt; Maybe (ScriptWitness WitCtxMint era)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">PolicyId
</span><a href="#local-6989586621682147876"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">Map PolicyId (ScriptWitness WitCtxMint era)
</span><a href="#local-6989586621682147868"><span class="hs-identifier hs-var">witnessesProvidedMap</span></a></span><span>
</span><span id="line-1422"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-1423"></span><span>            </span><span class="hs-comment">-- Check not too many, nor too few:</span><span>
</span><span id="line-1424"></span><span>            </span><span class="annot"><span class="annottext">Set PolicyId -&gt; Set PolicyId -&gt; Either TxCmdError ()
</span><a href="#local-6989586621682147881"><span class="hs-identifier hs-var">validateAllWitnessesProvided</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147866"><span class="hs-identifier hs-var">witnessesNeededSet</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147872"><span class="hs-identifier hs-var">witnessesProvidedSet</span></a></span><span>
</span><span id="line-1425"></span><span>            </span><span class="annot"><span class="annottext">Set PolicyId -&gt; Set PolicyId -&gt; Either TxCmdError ()
</span><a href="#local-6989586621682147882"><span class="hs-identifier hs-var">validateNoUnnecessaryWitnesses</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147866"><span class="hs-identifier hs-var">witnessesNeededSet</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147872"><span class="hs-identifier hs-var">witnessesProvidedSet</span></a></span><span>
</span><span id="line-1426"></span><span>            </span><span class="annot"><span class="annottext">TxMintValue BuildTx era
-&gt; Either TxCmdError (TxMintValue BuildTx era)
forall a. a -&gt; Either TxCmdError a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMintValue BuildTx era
 -&gt; Either TxCmdError (TxMintValue BuildTx era))
-&gt; TxMintValue BuildTx era
-&gt; Either TxCmdError (TxMintValue BuildTx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">MaryEraOnwards era
-&gt; Map
     PolicyId
     [(AssetName, Quantity,
       BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
-&gt; TxMintValue BuildTx era
forall era build.
MaryEraOnwards era
-&gt; Map
     PolicyId
     [(AssetName, Quantity,
       BuildTxWith build (ScriptWitness WitCtxMint era))]
-&gt; TxMintValue build era
</span><span class="hs-identifier hs-var">TxMintValue</span></span><span> </span><span class="annot"><span class="annottext">MaryEraOnwards era
</span><a href="#local-6989586621682147860"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  PolicyId
  [(AssetName, Quantity,
    BuildTxWith BuildTx (ScriptWitness WitCtxMint era))]
</span><a href="#local-6989586621682147874"><span class="hs-identifier hs-var">policiesWithWitnesses</span></a></span><span>
</span><span id="line-1427"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1428"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147839"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-1429"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1430"></span><span>  </span><span id="local-6989586621682147881"><span class="annot"><span class="annottext">validateAllWitnessesProvided :: Set PolicyId -&gt; Set PolicyId -&gt; Either TxCmdError ()
</span><a href="#local-6989586621682147881"><span class="hs-identifier hs-var hs-var">validateAllWitnessesProvided</span></a></span></span><span> </span><span id="local-6989586621682147888"><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147888"><span class="hs-identifier hs-var">witnessesNeeded</span></a></span></span><span> </span><span id="local-6989586621682147889"><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147889"><span class="hs-identifier hs-var">witnessesProvided</span></a></span></span><span>
</span><span id="line-1431"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[PolicyId] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[PolicyId]
</span><a href="#local-6989586621682147890"><span class="hs-identifier hs-var">witnessesMissing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Either TxCmdError ()
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxCmdError -&gt; Either TxCmdError ()
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[PolicyId] -&gt; [PolicyId] -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdPolicyIdsMissing"><span class="hs-identifier hs-var">TxCmdPolicyIdsMissing</span></a></span><span> </span><span class="annot"><span class="annottext">[PolicyId]
</span><a href="#local-6989586621682147890"><span class="hs-identifier hs-var">witnessesMissing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set PolicyId -&gt; [Item (Set PolicyId)]
forall l. IsList l =&gt; l -&gt; [Item l]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IsList.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147889"><span class="hs-identifier hs-var">witnessesProvided</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1433"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-1434"></span><span>    </span><span id="local-6989586621682147890"><span class="annot"><span class="annottext">witnessesMissing :: [PolicyId]
</span><a href="#local-6989586621682147890"><span class="hs-identifier hs-var hs-var">witnessesMissing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set PolicyId -&gt; [PolicyId]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#elems"><span class="hs-identifier hs-var">Set.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147888"><span class="hs-identifier hs-var">witnessesNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId -&gt; Set PolicyId -&gt; Set PolicyId
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#%5C%5C"><span class="hs-operator hs-var">Set.\\</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147889"><span class="hs-identifier hs-var">witnessesProvided</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>
</span><span id="line-1436"></span><span>  </span><span id="local-6989586621682147882"><span class="annot"><span class="annottext">validateNoUnnecessaryWitnesses :: Set PolicyId -&gt; Set PolicyId -&gt; Either TxCmdError ()
</span><a href="#local-6989586621682147882"><span class="hs-identifier hs-var hs-var">validateNoUnnecessaryWitnesses</span></a></span></span><span> </span><span id="local-6989586621682147897"><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147897"><span class="hs-identifier hs-var">witnessesNeeded</span></a></span></span><span> </span><span id="local-6989586621682147898"><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147898"><span class="hs-identifier hs-var">witnessesProvided</span></a></span></span><span>
</span><span id="line-1437"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[PolicyId] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[PolicyId]
</span><a href="#local-6989586621682147899"><span class="hs-identifier hs-var">witnessesExtra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Either TxCmdError ()
forall a. a -&gt; Either TxCmdError a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1438"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxCmdError -&gt; Either TxCmdError ()
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[PolicyId] -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdPolicyIdsExcess"><span class="hs-identifier hs-var">TxCmdPolicyIdsExcess</span></a></span><span> </span><span class="annot"><span class="annottext">[PolicyId]
</span><a href="#local-6989586621682147899"><span class="hs-identifier hs-var">witnessesExtra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-1440"></span><span>    </span><span id="local-6989586621682147899"><span class="annot"><span class="annottext">witnessesExtra :: [PolicyId]
</span><a href="#local-6989586621682147899"><span class="hs-identifier hs-var hs-var">witnessesExtra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set PolicyId -&gt; [PolicyId]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#elems"><span class="hs-identifier hs-var">Set.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147898"><span class="hs-identifier hs-var">witnessesProvided</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId -&gt; Set PolicyId -&gt; Set PolicyId
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/containers-0.6.8-inplace/src/Data.Set.Internal.html#%5C%5C"><span class="hs-operator hs-var">Set.\\</span></a></span><span> </span><span class="annot"><span class="annottext">Set PolicyId
</span><a href="#local-6989586621682147897"><span class="hs-identifier hs-var">witnessesNeeded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1441"></span><span>
</span><span id="line-1442"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1443"></span><span class="hs-comment">-- Transaction signing</span><span>
</span><span id="line-1444"></span><span class="hs-comment">--</span><span>
</span><span id="line-1445"></span><span>
</span><span id="line-1446"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignCmd"><span class="hs-identifier hs-type">runTransactionSignCmd</span></a></span><span>
</span><span id="line-1447"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1448"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSignCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionSignCmdArgs</span></a></span><span>
</span><span id="line-1449"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1450"></span><span id="runTransactionSignCmd"><span class="annot"><span class="annottext">runTransactionSignCmd :: TransactionSignCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignCmd"><span class="hs-identifier hs-var hs-var">runTransactionSignCmd</span></a></span></span><span>
</span><span id="line-1451"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSignCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionSignCmdArgs</span></a></span><span>
</span><span id="line-1452"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txOrTxBodyFile :: TransactionSignCmdArgs -&gt; InputTxBodyOrTxFile
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txOrTxBodyFile"><span class="hs-identifier hs-var">txOrTxBodyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682147903"><span class="annot"><span class="annottext">InputTxBodyOrTxFile
</span><a href="#local-6989586621682147903"><span class="hs-identifier hs-var">txOrTxBody</span></a></span></span><span>
</span><span id="line-1453"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">witnessSigningData :: TransactionSignCmdArgs -&gt; [WitnessSigningData]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#witnessSigningData"><span class="hs-identifier hs-var">witnessSigningData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682147905"><span class="annot"><span class="annottext">[WitnessSigningData]
</span><a href="#local-6989586621682147905"><span class="hs-identifier hs-var">witnessSigningData</span></a></span></span><span>
</span><span id="line-1454"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mNetworkId :: TransactionSignCmdArgs -&gt; Maybe NetworkId
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#mNetworkId"><span class="hs-identifier hs-var">mNetworkId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682147907"><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="#local-6989586621682147907"><span class="hs-identifier hs-var">mNetworkId</span></a></span></span><span>
</span><span id="line-1455"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">outTxFile :: TransactionSignCmdArgs -&gt; TxFile 'Out
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#outTxFile"><span class="hs-identifier hs-var">outTxFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682147909"><span class="annot"><span class="annottext">TxFile 'Out
</span><a href="#local-6989586621682147909"><span class="hs-identifier hs-var">outTxFile</span></a></span></span><span>
</span><span id="line-1456"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1457"></span><span>    </span><span id="local-6989586621682147910"><span class="annot"><span class="annottext">[SomeSigningWitness]
</span><a href="#local-6989586621682147910"><span class="hs-identifier hs-var">sks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[WitnessSigningData]
-&gt; (WitnessSigningData -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; ExceptT TxCmdError IO [SomeSigningWitness]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[WitnessSigningData]
</span><a href="#local-6989586621682147905"><span class="hs-identifier hs-var">witnessSigningData</span></a></span><span> </span><span class="annot"><span class="annottext">((WitnessSigningData -&gt; ExceptT TxCmdError IO SomeSigningWitness)
 -&gt; ExceptT TxCmdError IO [SomeSigningWitness])
-&gt; (WitnessSigningData -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; ExceptT TxCmdError IO [SomeSigningWitness]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682147911"><span class="annot"><span class="annottext">WitnessSigningData
</span><a href="#local-6989586621682147911"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1458"></span><span>      </span><span class="annot"><span class="annottext">IO (Either ReadWitnessSigningDataError SomeSigningWitness)
-&gt; ExceptT
     TxCmdError
     IO
     (Either ReadWitnessSigningDataError SomeSigningWitness)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WitnessSigningData
-&gt; IO (Either ReadWitnessSigningDataError SomeSigningWitness)
</span><a href="Cardano.CLI.Read.html#readWitnessSigningData"><span class="hs-identifier hs-var">readWitnessSigningData</span></a></span><span> </span><span class="annot"><span class="annottext">WitnessSigningData
</span><a href="#local-6989586621682147911"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1459"></span><span>        </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either ReadWitnessSigningDataError SomeSigningWitness)
-&gt; (ExceptT
      TxCmdError
      IO
      (Either ReadWitnessSigningDataError SomeSigningWitness)
    -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; ExceptT TxCmdError IO SomeSigningWitness
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(ReadWitnessSigningDataError
 -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; ExceptT
     TxCmdError
     IO
     (Either ReadWitnessSigningDataError SomeSigningWitness)
-&gt; ExceptT TxCmdError IO SomeSigningWitness
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO SomeSigningWitness
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; (ReadWitnessSigningDataError -&gt; TxCmdError)
-&gt; ReadWitnessSigningDataError
-&gt; ExceptT TxCmdError IO SomeSigningWitness
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ReadWitnessSigningDataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadWitnessSigningDataError"><span class="hs-identifier hs-var">TxCmdReadWitnessSigningDataError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1460"></span><span>
</span><span id="line-1461"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147914"><span class="annot"><span class="annottext">[ShelleyBootstrapWitnessSigningKeyData]
</span><a href="#local-6989586621682147914"><span class="hs-identifier hs-var">sksByron</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147915"><span class="annot"><span class="annottext">[ShelleyWitnessSigningKey]
</span><a href="#local-6989586621682147915"><span class="hs-identifier hs-var">sksShelley</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ByronOrShelleyWitness]
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#partitionSomeWitnesses"><span class="hs-identifier hs-var">partitionSomeWitnesses</span></a></span><span> </span><span class="annot"><span class="annottext">([ByronOrShelleyWitness]
 -&gt; ([ShelleyBootstrapWitnessSigningKeyData],
     [ShelleyWitnessSigningKey]))
-&gt; [ByronOrShelleyWitness]
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(SomeSigningWitness -&gt; ByronOrShelleyWitness)
-&gt; [SomeSigningWitness] -&gt; [ByronOrShelleyWitness]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">SomeSigningWitness -&gt; ByronOrShelleyWitness
</span><a href="Cardano.CLI.Read.html#categoriseSomeSigningWitness"><span class="hs-identifier hs-var">categoriseSomeSigningWitness</span></a></span><span> </span><span class="annot"><span class="annottext">[SomeSigningWitness]
</span><a href="#local-6989586621682147910"><span class="hs-identifier hs-var">sks</span></a></span><span>
</span><span id="line-1462"></span><span>
</span><span id="line-1463"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">InputTxBodyOrTxFile
</span><a href="#local-6989586621682147903"><span class="hs-identifier hs-var">txOrTxBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1464"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#InputTxFile"><span class="hs-identifier hs-type">InputTxFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682147918"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147918"><span class="hs-identifier hs-var">inputTxFilePath</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1465"></span><span>        </span><span id="local-6989586621682147919"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682147919"><span class="hs-identifier hs-var">inputTxFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147918"><span class="hs-identifier hs-var">inputTxFilePath</span></a></span><span>
</span><span id="line-1466"></span><span>        </span><span id="local-6989586621682147921"><span class="annot"><span class="annottext">InAnyShelleyBasedEra Tx
</span><a href="#local-6989586621682147921"><span class="hs-identifier hs-var">anyTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO
  (Either
     (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
</span><a href="Cardano.CLI.Read.html#readFileTx"><span class="hs-identifier hs-var">readFileTx</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682147919"><span class="hs-identifier hs-var">inputTxFile</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
    -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; (FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; FileError TextEnvelopeCddlError
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1467"></span><span>
</span><span id="line-1468"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682147934"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147934"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682147935"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147935"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra Tx
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra Tx
</span><a href="#local-6989586621682147921"><span class="hs-identifier hs-var">anyTx</span></a></span><span>
</span><span id="line-1469"></span><span>
</span><span id="line-1470"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682147936"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147936"><span class="hs-identifier hs-var">txbody</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147937"><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147937"><span class="hs-identifier hs-var">existingTxKeyWits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; (TxBody era, [KeyWitness era])
forall era. Tx era -&gt; (TxBody era, [KeyWitness era])
</span><span class="hs-identifier hs-var">getTxBodyAndWitnesses</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147935"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-1471"></span><span>
</span><span id="line-1472"></span><span>        </span><span id="local-6989586621682147939"><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147939"><span class="hs-identifier hs-var">byronWitnesses</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1473"></span><span>          </span><span class="annot"><span class="annottext">Either BootstrapWitnessError [KeyWitness era]
-&gt; ExceptT
     TxCmdError IO (Either BootstrapWitnessError [KeyWitness era])
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; Either BootstrapWitnessError [KeyWitness era]
forall era.
ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; Either BootstrapWitnessError [KeyWitness era]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitnesses"><span class="hs-identifier hs-var">mkShelleyBootstrapWitnesses</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147934"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="#local-6989586621682147907"><span class="hs-identifier hs-var">mNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147936"><span class="hs-identifier hs-var">txbody</span></a></span><span> </span><span class="annot"><span class="annottext">[ShelleyBootstrapWitnessSigningKeyData]
</span><a href="#local-6989586621682147914"><span class="hs-identifier hs-var">sksByron</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1474"></span><span>            </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError IO (Either BootstrapWitnessError [KeyWitness era])
-&gt; (ExceptT
      TxCmdError IO (Either BootstrapWitnessError [KeyWitness era])
    -&gt; ExceptT TxCmdError IO [KeyWitness era])
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(BootstrapWitnessError -&gt; ExceptT TxCmdError IO [KeyWitness era])
-&gt; ExceptT
     TxCmdError IO (Either BootstrapWitnessError [KeyWitness era])
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO [KeyWitness era]
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO [KeyWitness era])
-&gt; (BootstrapWitnessError -&gt; TxCmdError)
-&gt; BootstrapWitnessError
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdBootstrapWitnessError"><span class="hs-identifier hs-var">TxCmdBootstrapWitnessError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147941"><span class="annot"><span class="annottext">newShelleyKeyWits :: [KeyWitness era]
</span><a href="#local-6989586621682147941"><span class="hs-identifier hs-var hs-var">newShelleyKeyWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ShelleyWitnessSigningKey -&gt; KeyWitness era)
-&gt; [ShelleyWitnessSigningKey] -&gt; [KeyWitness era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBody era -&gt; ShelleyWitnessSigningKey -&gt; KeyWitness era
forall era.
ShelleyBasedEra era
-&gt; TxBody era -&gt; ShelleyWitnessSigningKey -&gt; KeyWitness era
</span><span class="hs-identifier hs-var">makeShelleyKeyWitness</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147934"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147936"><span class="hs-identifier hs-var">txbody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ShelleyWitnessSigningKey]
</span><a href="#local-6989586621682147915"><span class="hs-identifier hs-var">sksShelley</span></a></span><span>
</span><span id="line-1477"></span><span>            </span><span id="local-6989586621682147943"><span class="annot"><span class="annottext">allKeyWits :: [KeyWitness era]
</span><a href="#local-6989586621682147943"><span class="hs-identifier hs-var hs-var">allKeyWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147937"><span class="hs-identifier hs-var">existingTxKeyWits</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; [KeyWitness era] -&gt; [KeyWitness era]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147941"><span class="hs-identifier hs-var">newShelleyKeyWits</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; [KeyWitness era] -&gt; [KeyWitness era]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147939"><span class="hs-identifier hs-var">byronWitnesses</span></a></span><span>
</span><span id="line-1478"></span><span>            </span><span id="local-6989586621682147944"><span class="annot"><span class="annottext">signedTx :: Tx era
</span><a href="#local-6989586621682147944"><span class="hs-identifier hs-var hs-var">signedTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; TxBody era -&gt; Tx era
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><span class="hs-identifier hs-var">makeSignedTransaction</span></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147943"><span class="hs-identifier hs-var">allKeyWits</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147936"><span class="hs-identifier hs-var">txbody</span></a></span><span>
</span><span id="line-1479"></span><span>
</span><span id="line-1480"></span><span>        </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxFile 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
forall era content.
ShelleyBasedEra era
-&gt; File content 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147934"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxFile 'Out
</span><a href="#local-6989586621682147909"><span class="hs-identifier hs-var">outTxFile</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147944"><span class="hs-identifier hs-var">signedTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1481"></span><span>          </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; (ExceptT TxCmdError IO (Either (FileError ()) ())
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FileError () -&gt; TxCmdError)
-&gt; FileError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#InputTxBodyFile"><span class="hs-identifier hs-type">InputTxBodyFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682147946"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147946"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1483"></span><span>        </span><span id="local-6989586621682147947"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682147947"><span class="hs-identifier hs-var">txbodyFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147946"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span><span>
</span><span id="line-1484"></span><span>        </span><span id="local-6989586621682147948"><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682147948"><span class="hs-identifier hs-var">unwitnessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1485"></span><span>          </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; (IO
      (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
    -&gt; ExceptT
         (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1486"></span><span>            </span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
</span><a href="Cardano.CLI.Read.html#readFileTxBody"><span class="hs-identifier hs-var">readFileTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682147947"><span class="hs-identifier hs-var">txbodyFile</span></a></span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682147948"><span class="hs-identifier hs-var">unwitnessed</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1489"></span><span>          </span><span class="annot"><a href="Cardano.CLI.Read.html#IncompleteCddlTxBody"><span class="hs-identifier hs-type">IncompleteCddlTxBody</span></a></span><span> </span><span id="local-6989586621682147951"><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
</span><a href="#local-6989586621682147951"><span class="hs-identifier hs-var">anyTxBody</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1490"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682147960"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682147961"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147961"><span class="hs-identifier hs-var">txbody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
</span><a href="#local-6989586621682147951"><span class="hs-identifier hs-var">anyTxBody</span></a></span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span>            </span><span class="hs-comment">-- Byron witnesses require the network ID. This can either be provided</span><span>
</span><span id="line-1493"></span><span>            </span><span class="hs-comment">-- directly or derived from a provided Byron address.</span><span>
</span><span id="line-1494"></span><span>            </span><span id="local-6989586621682147962"><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147962"><span class="hs-identifier hs-var">byronWitnesses</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1495"></span><span>              </span><span class="annot"><span class="annottext">(BootstrapWitnessError -&gt; TxCmdError)
-&gt; ExceptT BootstrapWitnessError IO [KeyWitness era]
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdBootstrapWitnessError"><span class="hs-identifier hs-var">TxCmdBootstrapWitnessError</span></a></span><span>
</span><span id="line-1496"></span><span>                </span><span class="annot"><span class="annottext">(ExceptT BootstrapWitnessError IO [KeyWitness era]
 -&gt; ExceptT TxCmdError IO [KeyWitness era])
-&gt; (Either BootstrapWitnessError [KeyWitness era]
    -&gt; ExceptT BootstrapWitnessError IO [KeyWitness era])
-&gt; Either BootstrapWitnessError [KeyWitness era]
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either BootstrapWitnessError [KeyWitness era]
-&gt; ExceptT BootstrapWitnessError IO [KeyWitness era]
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span>
</span><span id="line-1497"></span><span>                </span><span class="annot"><span class="annottext">(Either BootstrapWitnessError [KeyWitness era]
 -&gt; ExceptT TxCmdError IO [KeyWitness era])
-&gt; Either BootstrapWitnessError [KeyWitness era]
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; Either BootstrapWitnessError [KeyWitness era]
forall era.
ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; Either BootstrapWitnessError [KeyWitness era]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitnesses"><span class="hs-identifier hs-var">mkShelleyBootstrapWitnesses</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="#local-6989586621682147907"><span class="hs-identifier hs-var">mNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147961"><span class="hs-identifier hs-var">txbody</span></a></span><span> </span><span class="annot"><span class="annottext">[ShelleyBootstrapWitnessSigningKeyData]
</span><a href="#local-6989586621682147914"><span class="hs-identifier hs-var">sksByron</span></a></span><span>
</span><span id="line-1498"></span><span>
</span><span id="line-1499"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147963"><span class="annot"><span class="annottext">shelleyKeyWitnesses :: [KeyWitness era]
</span><a href="#local-6989586621682147963"><span class="hs-identifier hs-var hs-var">shelleyKeyWitnesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ShelleyWitnessSigningKey -&gt; KeyWitness era)
-&gt; [ShelleyWitnessSigningKey] -&gt; [KeyWitness era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBody era -&gt; ShelleyWitnessSigningKey -&gt; KeyWitness era
forall era.
ShelleyBasedEra era
-&gt; TxBody era -&gt; ShelleyWitnessSigningKey -&gt; KeyWitness era
</span><span class="hs-identifier hs-var">makeShelleyKeyWitness</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147961"><span class="hs-identifier hs-var">txbody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ShelleyWitnessSigningKey]
</span><a href="#local-6989586621682147915"><span class="hs-identifier hs-var">sksShelley</span></a></span><span>
</span><span id="line-1500"></span><span>                </span><span id="local-6989586621682147964"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621682147964"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; TxBody era -&gt; Tx era
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><span class="hs-identifier hs-var">makeSignedTransaction</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147962"><span class="hs-identifier hs-var">byronWitnesses</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; [KeyWitness era] -&gt; [KeyWitness era]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682147963"><span class="hs-identifier hs-var">shelleyKeyWitnesses</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682147961"><span class="hs-identifier hs-var">txbody</span></a></span><span>
</span><span id="line-1501"></span><span>
</span><span id="line-1502"></span><span>            </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxFile 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
forall era content.
ShelleyBasedEra era
-&gt; File content 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxFile 'Out
</span><a href="#local-6989586621682147909"><span class="hs-identifier hs-var">outTxFile</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147964"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1503"></span><span>              </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; (ExceptT TxCmdError IO (Either (FileError ()) ())
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FileError () -&gt; TxCmdError)
-&gt; FileError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>
</span><span id="line-1505"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1506"></span><span class="hs-comment">-- Transaction submission</span><span>
</span><span id="line-1507"></span><span class="hs-comment">--</span><span>
</span><span id="line-1508"></span><span>
</span><span id="line-1509"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSubmitCmd"><span class="hs-identifier hs-type">runTransactionSubmitCmd</span></a></span><span>
</span><span id="line-1510"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1511"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSubmitCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionSubmitCmdArgs</span></a></span><span>
</span><span id="line-1512"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1513"></span><span id="runTransactionSubmitCmd"><span class="annot"><span class="annottext">runTransactionSubmitCmd :: TransactionSubmitCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSubmitCmd"><span class="hs-identifier hs-var hs-var">runTransactionSubmitCmd</span></a></span></span><span>
</span><span id="line-1514"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSubmitCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionSubmitCmdArgs</span></a></span><span>
</span><span id="line-1515"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682147966"><span class="annot"><span class="annottext">SocketPath
nodeSocketPath :: SocketPath
nodeSocketPath :: TransactionSubmitCmdArgs -&gt; SocketPath
</span><a href="#local-6989586621682147966"><span class="hs-identifier hs-var hs-var">nodeSocketPath</span></a></span></span><span>
</span><span id="line-1516"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147968"><span class="annot"><span class="annottext">ConsensusModeParams
consensusModeParams :: ConsensusModeParams
consensusModeParams :: TransactionSubmitCmdArgs -&gt; ConsensusModeParams
</span><a href="#local-6989586621682147968"><span class="hs-identifier hs-var hs-var">consensusModeParams</span></a></span></span><span>
</span><span id="line-1517"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147970"><span class="annot"><span class="annottext">NetworkId
networkId :: NetworkId
networkId :: TransactionSubmitCmdArgs -&gt; NetworkId
</span><a href="#local-6989586621682147970"><span class="hs-identifier hs-var hs-var">networkId</span></a></span></span><span>
</span><span id="line-1518"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682147972"><span class="annot"><span class="annottext">FilePath
txFile :: FilePath
txFile :: TransactionSubmitCmdArgs -&gt; FilePath
</span><a href="#local-6989586621682147972"><span class="hs-identifier hs-var hs-var">txFile</span></a></span></span><span>
</span><span id="line-1519"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1520"></span><span>    </span><span id="local-6989586621682147974"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682147974"><span class="hs-identifier hs-var">txFileOrPipe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682147972"><span class="hs-identifier hs-var">txFile</span></a></span><span>
</span><span id="line-1521"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682147987"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147987"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682147988"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147988"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1522"></span><span>      </span><span class="annot"><span class="annottext">IO
  (Either
     (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
</span><a href="Cardano.CLI.Read.html#readFileTx"><span class="hs-identifier hs-var">readFileTx</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682147974"><span class="hs-identifier hs-var">txFileOrPipe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
    -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; (FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; FileError TextEnvelopeCddlError
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1523"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147989"><span class="annot"><span class="annottext">txInMode :: TxInMode
</span><a href="#local-6989586621682147989"><span class="hs-identifier hs-var hs-var">txInMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; Tx era -&gt; TxInMode
forall era. ShelleyBasedEra era -&gt; Tx era -&gt; TxInMode
</span><span class="hs-identifier hs-var">TxInMode</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682147987"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147988"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-1524"></span><span>        </span><span id="local-6989586621682147991"><span class="annot"><span class="annottext">localNodeConnInfo :: LocalNodeConnectInfo
</span><a href="#local-6989586621682147991"><span class="hs-identifier hs-var hs-var">localNodeConnInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1525"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></span><span>
</span><span id="line-1526"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">localConsensusModeParams :: ConsensusModeParams
</span><span class="hs-identifier hs-var">localConsensusModeParams</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
</span><a href="#local-6989586621682147968"><span class="hs-identifier hs-var">consensusModeParams</span></a></span><span>
</span><span id="line-1527"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localNodeNetworkId :: NetworkId
</span><span class="hs-identifier hs-var">localNodeNetworkId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682147970"><span class="hs-identifier hs-var">networkId</span></a></span><span>
</span><span id="line-1528"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localNodeSocketPath :: SocketPath
</span><span class="hs-identifier hs-var">localNodeSocketPath</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621682147966"><span class="hs-identifier hs-var">nodeSocketPath</span></a></span><span>
</span><span id="line-1529"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1530"></span><span>
</span><span id="line-1531"></span><span>    </span><span id="local-6989586621682147992"><span class="annot"><span class="annottext">SubmitResult TxValidationErrorInCardanoMode
</span><a href="#local-6989586621682147992"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (SubmitResult TxValidationErrorInCardanoMode)
-&gt; ExceptT
     TxCmdError IO (SubmitResult TxValidationErrorInCardanoMode)
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (SubmitResult TxValidationErrorInCardanoMode)
 -&gt; ExceptT
      TxCmdError IO (SubmitResult TxValidationErrorInCardanoMode))
-&gt; IO (SubmitResult TxValidationErrorInCardanoMode)
-&gt; ExceptT
     TxCmdError IO (SubmitResult TxValidationErrorInCardanoMode)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; TxInMode -&gt; IO (SubmitResult TxValidationErrorInCardanoMode)
forall (m :: * -&gt; *).
MonadIO m =&gt;
LocalNodeConnectInfo
-&gt; TxInMode -&gt; m (SubmitResult TxValidationErrorInCardanoMode)
</span><span class="hs-identifier hs-var">submitTxToNodeLocal</span></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621682147991"><span class="hs-identifier hs-var">localNodeConnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TxInMode
</span><a href="#local-6989586621682147989"><span class="hs-identifier hs-var">txInMode</span></a></span><span>
</span><span id="line-1532"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SubmitResult TxValidationErrorInCardanoMode
</span><a href="#local-6989586621682147992"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1533"></span><span>      </span><span class="annot"><span class="annottext">SubmitResult TxValidationErrorInCardanoMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalTxSubmission.Type.html#SubmitSuccess"><span class="hs-identifier hs-var">Net.Tx.SubmitSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1534"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Handle -&gt; Text -&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/text-2.1.1-66dd499aca7e777f8d20f0e47452fe261f2354d2ebc11923ec07d645d3895501/share/doc/html/src/Data.Text.IO.html#hPutStrLn"><span class="hs-identifier hs-var">Text.hPutStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.IO.StdHandles.html#stderr"><span class="hs-identifier hs-var">IO.stderr</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Transaction successfully submitted. Transaction hash is:&quot;</span></span><span>
</span><span id="line-1535"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Lazy.Char8.html#putStrLn"><span class="hs-identifier hs-var">LBS.putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO ()) -&gt; ByteString -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSubmissionResult -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-2.2.3.0-0dd2e1ddd7e981ab58d86fb751cbb00bd55cdd2eda38b7379d143d083431cd0d/share/doc/html/src/Data.Aeson.html#encode"><span class="hs-identifier hs-var">Aeson.encode</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSubmissionResult -&gt; ByteString)
-&gt; TxSubmissionResult -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxSubmissionResult
</span><a href="Cardano.CLI.Types.Common.html#TxSubmissionResult"><span class="hs-identifier hs-var">TxSubmissionResult</span></a></span><span> </span><span class="annot"><span class="annottext">(TxId -&gt; TxSubmissionResult) -&gt; TxId -&gt; TxSubmissionResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; TxId
forall era. TxBody era -&gt; TxId
</span><span class="hs-identifier hs-var">getTxId</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; TxId) -&gt; TxBody era -&gt; TxId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxBody era
forall era. Tx era -&gt; TxBody era
</span><span class="hs-identifier hs-var">getTxBody</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682147988"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-1536"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.11.0.0-59a1a58b6fd69856bbf78b51d417ed7b418df2f7462111be1e92742c538c2b1f/share/doc/html/src/Ouroboros.Network.Protocol.LocalTxSubmission.Type.html#SubmitFail"><span class="hs-identifier hs-type">Net.Tx.SubmitFail</span></a></span><span> </span><span id="local-6989586621682148003"><span class="annot"><span class="annottext">TxValidationErrorInCardanoMode
</span><a href="#local-6989586621682148003"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1537"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxValidationErrorInCardanoMode
</span><a href="#local-6989586621682148003"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1538"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></span><span> </span><span id="local-6989586621682148008"><span class="annot"><span class="annottext">TxValidationError era
</span><a href="#local-6989586621682148008"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FilePath -&gt; TxCmdError) -&gt; FilePath -&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxSubmitError"><span class="hs-identifier hs-var">TxCmdTxSubmitError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; TxCmdError)
-&gt; (FilePath -&gt; Text) -&gt; FilePath -&gt; TxCmdError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/text-2.1.1-66dd499aca7e777f8d20f0e47452fe261f2354d2ebc11923ec07d645d3895501/share/doc/html/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; ExceptT TxCmdError IO ())
-&gt; FilePath -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidationError era -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidationError era
</span><a href="#local-6989586621682148008"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1539"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">TxValidationEraMismatch</span></span><span> </span><span id="local-6989586621682148012"><span class="annot"><span class="annottext">EraMismatch
</span><a href="#local-6989586621682148012"><span class="hs-identifier hs-var">mismatchErr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; TxCmdError -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EraMismatch -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTxSubmitErrorEraMismatch"><span class="hs-identifier hs-var">TxCmdTxSubmitErrorEraMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">EraMismatch
</span><a href="#local-6989586621682148012"><span class="hs-identifier hs-var">mismatchErr</span></a></span><span>
</span><span id="line-1540"></span><span>
</span><span id="line-1541"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1542"></span><span class="hs-comment">-- Transaction fee calculation</span><span>
</span><span id="line-1543"></span><span class="hs-comment">--</span><span>
</span><span id="line-1544"></span><span>
</span><span id="line-1545"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinFeeCmd"><span class="hs-identifier hs-type">runTransactionCalculateMinFeeCmd</span></a></span><span>
</span><span id="line-1546"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinFeeCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionCalculateMinFeeCmdArgs</span></a></span><span>
</span><span id="line-1548"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1549"></span><span id="runTransactionCalculateMinFeeCmd"><span class="annot"><span class="annottext">runTransactionCalculateMinFeeCmd :: TransactionCalculateMinFeeCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinFeeCmd"><span class="hs-identifier hs-var hs-var">runTransactionCalculateMinFeeCmd</span></a></span></span><span>
</span><span id="line-1550"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinFeeCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionCalculateMinFeeCmdArgs</span></a></span><span>
</span><span id="line-1551"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txBodyFile :: TransactionCalculateMinFeeCmdArgs -&gt; File (TxBody ()) 'In
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txBodyFile"><span class="hs-identifier hs-var">txBodyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682148014"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148014"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span></span><span>
</span><span id="line-1552"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">protocolParamsFile :: TransactionCalculateMinFeeCmdArgs -&gt; ProtocolParamsFile
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#protocolParamsFile"><span class="hs-identifier hs-var">protocolParamsFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148016"><span class="annot"><span class="annottext">ProtocolParamsFile
</span><a href="#local-6989586621682148016"><span class="hs-identifier hs-var">protocolParamsFile</span></a></span></span><span>
</span><span id="line-1553"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txShelleyWitnessCount :: TransactionCalculateMinFeeCmdArgs -&gt; TxShelleyWitnessCount
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txShelleyWitnessCount"><span class="hs-identifier hs-var">txShelleyWitnessCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxShelleyWitnessCount"><span class="hs-identifier hs-type">TxShelleyWitnessCount</span></a></span><span> </span><span id="local-6989586621682148019"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148019"><span class="hs-identifier hs-var">nShelleyKeyWitnesses</span></a></span></span><span>
</span><span id="line-1554"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txByronWitnessCount :: TransactionCalculateMinFeeCmdArgs -&gt; TxByronWitnessCount
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txByronWitnessCount"><span class="hs-identifier hs-var">txByronWitnessCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#TxByronWitnessCount"><span class="hs-identifier hs-type">TxByronWitnessCount</span></a></span><span> </span><span id="local-6989586621682148022"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148022"><span class="hs-identifier hs-var">nByronKeyWitnesses</span></a></span></span><span>
</span><span id="line-1555"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">referenceScriptSize :: TransactionCalculateMinFeeCmdArgs -&gt; ReferenceScriptSize
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#referenceScriptSize"><span class="hs-identifier hs-var">referenceScriptSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#ReferenceScriptSize"><span class="hs-identifier hs-type">ReferenceScriptSize</span></a></span><span> </span><span id="local-6989586621682148025"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148025"><span class="hs-identifier hs-var">sReferenceScript</span></a></span></span><span>
</span><span id="line-1556"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148026"><span class="annot"><span class="annottext">Maybe OutputFormatJsonOrText
outputFormat :: Maybe OutputFormatJsonOrText
outputFormat :: TransactionCalculateMinFeeCmdArgs -&gt; Maybe OutputFormatJsonOrText
</span><a href="#local-6989586621682148026"><span class="hs-identifier hs-var hs-var">outputFormat</span></a></span></span><span>
</span><span id="line-1557"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148028"><span class="annot"><span class="annottext">Maybe (File () 'Out)
outFile :: Maybe (File () 'Out)
outFile :: TransactionCalculateMinFeeCmdArgs -&gt; Maybe (File () 'Out)
</span><a href="#local-6989586621682148028"><span class="hs-identifier hs-var hs-var">outFile</span></a></span></span><span>
</span><span id="line-1558"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1559"></span><span>    </span><span id="local-6989586621682148030"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148030"><span class="hs-identifier hs-var">txbodyFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148014"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span><span>
</span><span id="line-1560"></span><span>    </span><span id="local-6989586621682148031"><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148031"><span class="hs-identifier hs-var">unwitnessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1561"></span><span>      </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; (IO
      (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
    -&gt; ExceptT
         (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1562"></span><span>        </span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
</span><a href="Cardano.CLI.Read.html#readFileTxBody"><span class="hs-identifier hs-var">readFileTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148030"><span class="hs-identifier hs-var">txbodyFile</span></a></span><span>
</span><span id="line-1563"></span><span>
</span><span id="line-1564"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148032"><span class="annot"><span class="annottext">nShelleyKeyWitW32 :: Word
</span><a href="#local-6989586621682148032"><span class="hs-identifier hs-var hs-var">nShelleyKeyWitW32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148019"><span class="hs-identifier hs-var">nShelleyKeyWitnesses</span></a></span><span>
</span><span id="line-1565"></span><span>
</span><span id="line-1566"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682148054"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148054"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682148055"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148055"><span class="hs-identifier hs-var">txbody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(InAnyShelleyBasedEra TxBody
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody))
-&gt; InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody -&gt; InAnyShelleyBasedEra TxBody
</span><a href="Cardano.CLI.Read.html#unIncompleteCddlTxBody"><span class="hs-identifier hs-var">unIncompleteCddlTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148031"><span class="hs-identifier hs-var">unwitnessed</span></a></span><span>
</span><span id="line-1567"></span><span>
</span><span id="line-1568"></span><span>    </span><span id="local-6989586621682148057"><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682148057"><span class="hs-identifier hs-var">lpparams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1569"></span><span>      </span><span class="annot"><span class="annottext">(ProtocolParamsError -&gt; TxCmdError)
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
-&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era))
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProtocolParamsError"><span class="hs-identifier hs-var">TxCmdProtocolParamsError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
 -&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era)))
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
-&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1570"></span><span>        </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
forall era.
ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
</span><a href="Cardano.CLI.EraBased.Run.Genesis.Common.html#readProtocolParameters"><span class="hs-identifier hs-var">readProtocolParameters</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148054"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsFile
</span><a href="#local-6989586621682148016"><span class="hs-identifier hs-var">protocolParamsFile</span></a></span><span>
</span><span id="line-1571"></span><span>
</span><span id="line-1572"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148058"><span class="annot"><span class="annottext">shelleyfee :: Lovelace
</span><a href="#local-6989586621682148058"><span class="hs-identifier hs-var hs-var">shelleyfee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; PParams (ShelleyLedgerEra era)
-&gt; TxBody era
-&gt; Word
-&gt; Word
-&gt; Int
-&gt; Lovelace
forall era.
ShelleyBasedEra era
-&gt; PParams (ShelleyLedgerEra era)
-&gt; TxBody era
-&gt; Word
-&gt; Word
-&gt; Int
-&gt; Lovelace
</span><span class="hs-identifier hs-var">evaluateTransactionFee</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148054"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682148057"><span class="hs-identifier hs-var">lpparams</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148055"><span class="hs-identifier hs-var">txbody</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682148032"><span class="hs-identifier hs-var">nShelleyKeyWitW32</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148025"><span class="hs-identifier hs-var">sReferenceScript</span></a></span><span>
</span><span id="line-1573"></span><span>
</span><span id="line-1574"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148060"><span class="annot"><span class="annottext">byronfee :: Lovelace
</span><a href="#local-6989586621682148060"><span class="hs-identifier hs-var hs-var">byronfee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1575"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; (ShelleyBasedEraConstraints era =&gt; Lovelace) -&gt; Lovelace
forall era a.
ShelleyBasedEra era -&gt; (ShelleyBasedEraConstraints era =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">shelleyBasedEraConstraints</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148054"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">((ShelleyBasedEraConstraints era =&gt; Lovelace) -&gt; Lovelace)
-&gt; (ShelleyBasedEraConstraints era =&gt; Lovelace) -&gt; Lovelace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1576"></span><span>            </span><span class="annot"><span class="annottext">Lovelace -&gt; Int -&gt; Lovelace
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#calculateByronWitnessFees"><span class="hs-identifier hs-var">calculateByronWitnessFees</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682148057"><span class="hs-identifier hs-var">lpparams</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
-&gt; Getting Lovelace (PParams (ShelleyLedgerEra era)) Lovelace
-&gt; Lovelace
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Lovelace (PParams (ShelleyLedgerEra era)) Lovelace
forall era. EraPParams era =&gt; Lens' (PParams era) Lovelace
Lens' (PParams (ShelleyLedgerEra era)) Lovelace
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Core.PParams.html#ppMinFeeAL"><span class="hs-identifier hs-var">L.ppMinFeeAL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148022"><span class="hs-identifier hs-var">nByronKeyWitnesses</span></a></span><span>
</span><span id="line-1577"></span><span>
</span><span id="line-1578"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148067"><span class="annot"><span class="annottext">fee :: Lovelace
</span><a href="#local-6989586621682148067"><span class="hs-identifier hs-var hs-var">fee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148058"><span class="hs-identifier hs-var">shelleyfee</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Lovelace -&gt; Lovelace
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148060"><span class="hs-identifier hs-var">byronfee</span></a></span><span>
</span><span id="line-1579"></span><span>        </span><span id="local-6989586621682148069"><span class="annot"><span class="annottext">textToWrite :: Text
</span><a href="#local-6989586621682148069"><span class="hs-identifier hs-var hs-var">textToWrite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Text
</span><span class="hs-identifier hs-var">docToText</span></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; Text) -&gt; Doc AnsiStyle -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Doc AnsiStyle
forall a ann. Pretty a =&gt; a -&gt; Doc ann
forall ann. Lovelace -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/prettyprinter-1.7.1-6097e7e2c8cd6bf185ebf82838a102a3c6283cee0def4f90fb8ed39b3835ab2e/share/doc/html/src/Prettyprinter.Internal.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148067"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-1580"></span><span>        </span><span id="local-6989586621682148071"><span class="annot"><span class="annottext">jsonToWrite :: ByteString
</span><a href="#local-6989586621682148071"><span class="hs-identifier hs-var hs-var">jsonToWrite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-pretty-0.8.10-b284cc6b9db73737627a563d667096228ece9d928bbedd02b9690e45d6764723/share/doc/html/src/Data.Aeson.Encode.Pretty.html#encodePretty"><span class="hs-identifier hs-var">encodePretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ByteString) -&gt; Value -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-2.2.3.0-0dd2e1ddd7e981ab58d86fb751cbb00bd55cdd2eda38b7379d143d083431cd0d/share/doc/html/src/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">Aeson.object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fee&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Lovelace -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/aeson-2.2.3.0-0dd2e1ddd7e981ab58d86fb751cbb00bd55cdd2eda38b7379d143d083431cd0d/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148067"><span class="hs-identifier hs-var">fee</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1581"></span><span>
</span><span id="line-1582"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe OutputFormatJsonOrText
-&gt; Maybe (File () 'Out) -&gt; OutputFormatJsonOrText
forall a.
Maybe OutputFormatJsonOrText -&gt; Maybe a -&gt; OutputFormatJsonOrText
</span><a href="Cardano.CLI.EraBased.Run.Query.html#newOutputFormat"><span class="hs-identifier hs-var">newOutputFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe OutputFormatJsonOrText
</span><a href="#local-6989586621682148026"><span class="hs-identifier hs-var">outputFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (File () 'Out)
</span><a href="#local-6989586621682148028"><span class="hs-identifier hs-var">outFile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (File () 'Out)
</span><a href="#local-6989586621682148028"><span class="hs-identifier hs-var">outFile</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1583"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputFormatJsonOrText
</span><a href="Cardano.CLI.Types.Common.html#OutputFormatText"><span class="hs-identifier hs-var">OutputFormatText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (File () 'Out)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1584"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/text-2.1.1-66dd499aca7e777f8d20f0e47452fe261f2354d2ebc11923ec07d645d3895501/share/doc/html/src/Data.Text.IO.html#putStrLn"><span class="hs-identifier hs-var">Text.putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682148069"><span class="hs-identifier hs-var">textToWrite</span></a></span><span>
</span><span id="line-1585"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputFormatJsonOrText
</span><a href="Cardano.CLI.Types.Common.html#OutputFormatText"><span class="hs-identifier hs-var">OutputFormatText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682148076"><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148076"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1586"></span><span>        </span><span class="annot"><span class="annottext">(FileError () -&gt; TxCmdError)
-&gt; ExceptT (FileError ()) IO () -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ()) IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (IO (Either (FileError ()) ()) -&gt; ExceptT (FileError ()) IO ())
-&gt; IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ()) -&gt; ExceptT (FileError ()) IO ()
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError ()) ()) -&gt; ExceptT TxCmdError IO ())
-&gt; IO (Either (FileError ()) ()) -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">File () 'Out -&gt; Text -&gt; IO (Either (FileError ()) ())
forall (m :: * -&gt; *) content e.
MonadIO m =&gt;
File content 'Out -&gt; Text -&gt; m (Either (FileError e) ())
</span><span class="hs-identifier hs-var">writeTextFile</span></span><span> </span><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148076"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682148069"><span class="hs-identifier hs-var">textToWrite</span></a></span><span>
</span><span id="line-1587"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputFormatJsonOrText
</span><a href="Cardano.CLI.Types.Common.html#OutputFormatJson"><span class="hs-identifier hs-var">OutputFormatJson</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (File () 'Out)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1588"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Lazy.Char8.html#putStrLn"><span class="hs-identifier hs-var">LBS.putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682148071"><span class="hs-identifier hs-var">jsonToWrite</span></a></span><span>
</span><span id="line-1589"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputFormatJsonOrText
</span><a href="Cardano.CLI.Types.Common.html#OutputFormatJson"><span class="hs-identifier hs-var">OutputFormatJson</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682148079"><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148079"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1590"></span><span>        </span><span class="annot"><span class="annottext">(FileError () -&gt; TxCmdError)
-&gt; ExceptT (FileError ()) IO () -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ()) IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (IO (Either (FileError ()) ()) -&gt; ExceptT (FileError ()) IO ())
-&gt; IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ()) -&gt; ExceptT (FileError ()) IO ()
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError ()) ()) -&gt; ExceptT TxCmdError IO ())
-&gt; IO (Either (FileError ()) ()) -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">File () 'Out -&gt; ByteString -&gt; IO (Either (FileError ()) ())
forall (m :: * -&gt; *) content e.
MonadIO m =&gt;
File content 'Out -&gt; ByteString -&gt; m (Either (FileError e) ())
</span><span class="hs-identifier hs-var">writeLazyByteStringFile</span></span><span> </span><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148079"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682148071"><span class="hs-identifier hs-var">jsonToWrite</span></a></span><span>
</span><span id="line-1591"></span><span>
</span><span id="line-1592"></span><span class="hs-comment">-- Extra logic to handle byron witnesses.</span><span>
</span><span id="line-1593"></span><span class="hs-comment">-- TODO: move this to Cardano.API.Fee.evaluateTransactionFee.</span><span>
</span><span id="line-1594"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#calculateByronWitnessFees"><span class="hs-identifier hs-type">calculateByronWitnessFees</span></a></span><span>
</span><span id="line-1595"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1596"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-1597"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The tx fee per byte (from protocol parameters)</span></span><span>
</span><span id="line-1598"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-1599"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The number of Byron key witnesses</span></span><span>
</span><span id="line-1600"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span>
</span><span id="line-1601"></span><span id="calculateByronWitnessFees"><span class="annot"><span class="annottext">calculateByronWitnessFees :: Lovelace -&gt; Int -&gt; Lovelace
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#calculateByronWitnessFees"><span class="hs-identifier hs-var hs-var">calculateByronWitnessFees</span></a></span></span><span> </span><span id="local-6989586621682148081"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148081"><span class="hs-identifier hs-var">txFeePerByte</span></a></span></span><span> </span><span id="local-6989586621682148082"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148082"><span class="hs-identifier hs-var">byronwitcount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1602"></span><span>  </span><span class="annot"><span class="annottext">Integer -&gt; Lovelace
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-core-1.15.0.0-97c5f897e34d987ca38b0d3657553bae69f1b67f68fccfe05019462f6c4e83fb/share/doc/html/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">L.Coin</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Lovelace) -&gt; Integer -&gt; Lovelace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1603"></span><span>    </span><span class="annot"><span class="annottext">Lovelace -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Real.html#toInteger"><span class="hs-identifier hs-var">toInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148081"><span class="hs-identifier hs-var">txFeePerByte</span></a></span><span>
</span><span id="line-1604"></span><span>      </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Real.html#toInteger"><span class="hs-identifier hs-var">toInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148082"><span class="hs-identifier hs-var">byronwitcount</span></a></span><span>
</span><span id="line-1605"></span><span>      </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Real.html#toInteger"><span class="hs-identifier hs-var">toInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148085"><span class="hs-identifier hs-var">sizeByronKeyWitnesses</span></a></span><span>
</span><span id="line-1606"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1607"></span><span>  </span><span id="local-6989586621682148085"><span class="annot"><span class="annottext">sizeByronKeyWitnesses :: Int
</span><a href="#local-6989586621682148085"><span class="hs-identifier hs-var hs-var">sizeByronKeyWitnesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148086"><span class="hs-identifier hs-var">smallArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148087"><span class="hs-identifier hs-var">keyObj</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148088"><span class="hs-identifier hs-var">sigObj</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148089"><span class="hs-identifier hs-var">ccodeObj</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148090"><span class="hs-identifier hs-var">attrsObj</span></a></span><span>
</span><span id="line-1608"></span><span>
</span><span id="line-1609"></span><span>  </span><span id="local-6989586621682148086"><span class="annot"><span class="annottext">smallArray :: Int
</span><a href="#local-6989586621682148086"><span class="hs-identifier hs-var hs-var">smallArray</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1610"></span><span>
</span><span id="line-1611"></span><span>  </span><span id="local-6989586621682148087"><span class="annot"><span class="annottext">keyObj :: Int
</span><a href="#local-6989586621682148087"><span class="hs-identifier hs-var hs-var">keyObj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148092"><span class="hs-identifier hs-var">keyLen</span></a></span><span>
</span><span id="line-1612"></span><span>  </span><span id="local-6989586621682148092"><span class="annot"><span class="annottext">keyLen :: Int
</span><a href="#local-6989586621682148092"><span class="hs-identifier hs-var hs-var">keyLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-1613"></span><span>
</span><span id="line-1614"></span><span>  </span><span id="local-6989586621682148088"><span class="annot"><span class="annottext">sigObj :: Int
</span><a href="#local-6989586621682148088"><span class="hs-identifier hs-var hs-var">sigObj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148094"><span class="hs-identifier hs-var">sigLen</span></a></span><span>
</span><span id="line-1615"></span><span>  </span><span id="local-6989586621682148094"><span class="annot"><span class="annottext">sigLen :: Int
</span><a href="#local-6989586621682148094"><span class="hs-identifier hs-var hs-var">sigLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span>
</span><span id="line-1616"></span><span>
</span><span id="line-1617"></span><span>  </span><span id="local-6989586621682148089"><span class="annot"><span class="annottext">ccodeObj :: Int
</span><a href="#local-6989586621682148089"><span class="hs-identifier hs-var hs-var">ccodeObj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148096"><span class="hs-identifier hs-var">ccodeLen</span></a></span><span>
</span><span id="line-1618"></span><span>  </span><span id="local-6989586621682148096"><span class="annot"><span class="annottext">ccodeLen :: Int
</span><a href="#local-6989586621682148096"><span class="hs-identifier hs-var hs-var">ccodeLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-1619"></span><span>
</span><span id="line-1620"></span><span>  </span><span id="local-6989586621682148090"><span class="annot"><span class="annottext">attrsObj :: Int
</span><a href="#local-6989586621682148090"><span class="hs-identifier hs-var hs-var">attrsObj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.html#length"><span class="hs-identifier hs-var">Data.Bytestring.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682148101"><span class="hs-identifier hs-var">attributes</span></a></span><span>
</span><span id="line-1621"></span><span>
</span><span id="line-1622"></span><span>  </span><span class="hs-comment">-- We assume testnet network magic here to avoid having</span><span>
</span><span id="line-1623"></span><span>  </span><span class="hs-comment">-- to thread the actual network ID into this function</span><span>
</span><span id="line-1624"></span><span>  </span><span class="hs-comment">-- merely to calculate the fees of byron witnesses more accurately.</span><span>
</span><span id="line-1625"></span><span>  </span><span class="hs-comment">-- This may slightly over-estimate min fees for byron witnesses</span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-comment">-- in mainnet transaction by one Word32 per witness.</span><span>
</span><span id="line-1627"></span><span>  </span><span id="local-6989586621682148101"><span class="annot"><span class="annottext">attributes :: ByteString
</span><a href="#local-6989586621682148101"><span class="hs-identifier hs-var hs-var">attributes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1628"></span><span>    </span><span class="annot"><span class="annottext">Attributes AddrAttributes -&gt; ByteString
forall a. ToCBOR a =&gt; a -&gt; ByteString
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-binary-1.7.1.0-82e6a16c5de057afe818d9a263c14d256ace639737b38f11e743cd35dc443931/share/doc/html/src/Cardano.Binary.Serialize.html#serialize%27"><span class="hs-identifier hs-var">CBOR.serialize'</span></a></span><span> </span><span class="annot"><span class="annottext">(Attributes AddrAttributes -&gt; ByteString)
-&gt; Attributes AddrAttributes -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1629"></span><span>      </span><span class="annot"><span class="annottext">AddrAttributes -&gt; Attributes AddrAttributes
forall h. h -&gt; Attributes h
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-byron-1.0.1.0-98754e61db8dbb991255b2504fc0babd4c3935ee177c95b582b9fd674e717bbb/share/doc/html/src/Cardano.Chain.Common.Attributes.html#mkAttributes"><span class="hs-identifier hs-var">Byron.mkAttributes</span></a></span><span>
</span><span id="line-1630"></span><span>        </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-byron-1.0.1.0-98754e61db8dbb991255b2504fc0babd4c3935ee177c95b582b9fd674e717bbb/share/doc/html/src/Cardano.Chain.Common.AddrAttributes.html#AddrAttributes"><span class="hs-identifier hs-type">Byron.AddrAttributes</span></a></span><span>
</span><span id="line-1631"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">aaVKDerivationPath :: Maybe HDAddressPayload
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-byron-1.0.1.0-98754e61db8dbb991255b2504fc0babd4c3935ee177c95b582b9fd674e717bbb/share/doc/html/src/Cardano.Chain.Common.AddrAttributes.html#aaVKDerivationPath"><span class="hs-identifier hs-var">Byron.aaVKDerivationPath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe HDAddressPayload
forall a. Maybe a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1632"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">aaNetworkMagic :: NetworkMagic
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-byron-1.0.1.0-98754e61db8dbb991255b2504fc0babd4c3935ee177c95b582b9fd674e717bbb/share/doc/html/src/Cardano.Chain.Common.AddrAttributes.html#aaNetworkMagic"><span class="hs-identifier hs-var">Byron.aaNetworkMagic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; NetworkMagic
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/cardano-ledger-byron-1.0.1.0-98754e61db8dbb991255b2504fc0babd4c3935ee177c95b582b9fd674e717bbb/share/doc/html/src/Cardano.Chain.Common.NetworkMagic.html#NetworkTestnet"><span class="hs-identifier hs-var">Byron.NetworkTestnet</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
forall a. Bounded a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Enum.html#maxBound"><span class="hs-identifier hs-var">maxBound</span></a></span><span>
</span><span id="line-1633"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1634"></span><span>
</span><span id="line-1635"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1636"></span><span class="hs-comment">-- Transaction fee calculation</span><span>
</span><span id="line-1637"></span><span class="hs-comment">--</span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span id="local-6989586621682145309"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinValueCmd"><span class="hs-identifier hs-type">runTransactionCalculateMinValueCmd</span></a></span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinValueCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionCalculateMinValueCmdArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145309"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1642"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1643"></span><span id="runTransactionCalculateMinValueCmd"><span class="annot"><span class="annottext">runTransactionCalculateMinValueCmd :: forall era.
TransactionCalculateMinValueCmdArgs era -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionCalculateMinValueCmd"><span class="hs-identifier hs-var hs-var">runTransactionCalculateMinValueCmd</span></a></span></span><span>
</span><span id="line-1644"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionCalculateMinValueCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionCalculateMinValueCmdArgs</span></a></span><span>
</span><span id="line-1645"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682148120"><span class="annot"><span class="annottext">ShelleyBasedEra era
eon :: ShelleyBasedEra era
eon :: forall era.
TransactionCalculateMinValueCmdArgs era -&gt; ShelleyBasedEra era
</span><a href="#local-6989586621682148120"><span class="hs-identifier hs-var hs-var">eon</span></a></span></span><span>
</span><span id="line-1646"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148122"><span class="annot"><span class="annottext">ProtocolParamsFile
protocolParamsFile :: ProtocolParamsFile
protocolParamsFile :: forall era.
TransactionCalculateMinValueCmdArgs era -&gt; ProtocolParamsFile
</span><a href="#local-6989586621682148122"><span class="hs-identifier hs-var hs-var">protocolParamsFile</span></a></span></span><span>
</span><span id="line-1647"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148124"><span class="annot"><span class="annottext">TxOutShelleyBasedEra
txOut :: TxOutShelleyBasedEra
txOut :: forall era.
TransactionCalculateMinValueCmdArgs era -&gt; TxOutShelleyBasedEra
</span><a href="#local-6989586621682148124"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span>
</span><span id="line-1648"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1649"></span><span>    </span><span id="local-6989586621682148126"><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682148126"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ProtocolParamsError -&gt; TxCmdError)
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
-&gt; ExceptT TxCmdError IO (PParams (ShelleyLedgerEra era))
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdProtocolParamsError"><span class="hs-identifier hs-var">TxCmdProtocolParamsError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
forall era.
ShelleyBasedEra era
-&gt; ProtocolParamsFile
-&gt; ExceptT ProtocolParamsError IO (PParams (ShelleyLedgerEra era))
</span><a href="Cardano.CLI.EraBased.Run.Genesis.Common.html#readProtocolParameters"><span class="hs-identifier hs-var">readProtocolParameters</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148120"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParamsFile
</span><a href="#local-6989586621682148122"><span class="hs-identifier hs-var">protocolParamsFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1650"></span><span>    </span><span id="local-6989586621682148127"><span class="annot"><span class="annottext">TxOut CtxTx era
</span><a href="#local-6989586621682148127"><span class="hs-identifier hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
forall era.
ShelleyBasedEra era
-&gt; TxOutShelleyBasedEra -&gt; ExceptT TxCmdError IO (TxOut CtxTx era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#toTxOutInShelleyBasedEra"><span class="hs-identifier hs-var">toTxOutInShelleyBasedEra</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148120"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutShelleyBasedEra
</span><a href="#local-6989586621682148124"><span class="hs-identifier hs-var">txOut</span></a></span><span>
</span><span id="line-1651"></span><span>
</span><span id="line-1652"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148128"><span class="annot"><span class="annottext">minValue :: Lovelace
</span><a href="#local-6989586621682148128"><span class="hs-identifier hs-var hs-var">minValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxOut CtxTx era -&gt; PParams (ShelleyLedgerEra era) -&gt; Lovelace
forall era.
ShelleyBasedEra era
-&gt; TxOut CtxTx era -&gt; PParams (ShelleyLedgerEra era) -&gt; Lovelace
</span><span class="hs-identifier hs-var">calculateMinimumUTxO</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148120"><span class="hs-identifier hs-var">eon</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx era
</span><a href="#local-6989586621682148127"><span class="hs-identifier hs-var">out</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (ShelleyLedgerEra era)
</span><a href="#local-6989586621682148126"><span class="hs-identifier hs-var">pp</span></a></span><span>
</span><span id="line-1653"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (Lovelace -&gt; IO ()) -&gt; Lovelace -&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; IO ()
forall a. Show a =&gt; a -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/System.IO.html#print"><span class="hs-identifier hs-var">IO.print</span></a></span><span> </span><span class="annot"><span class="annottext">(Lovelace -&gt; ExceptT TxCmdError IO ())
-&gt; Lovelace -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621682148128"><span class="hs-identifier hs-var">minValue</span></a></span><span>
</span><span id="line-1654"></span><span>
</span><span id="line-1655"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionPolicyIdCmd"><span class="hs-identifier hs-type">runTransactionPolicyIdCmd</span></a></span><span>
</span><span id="line-1656"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionPolicyIdCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionPolicyIdCmdArgs</span></a></span><span>
</span><span id="line-1658"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1659"></span><span id="runTransactionPolicyIdCmd"><span class="annot"><span class="annottext">runTransactionPolicyIdCmd :: TransactionPolicyIdCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionPolicyIdCmd"><span class="hs-identifier hs-var hs-var">runTransactionPolicyIdCmd</span></a></span></span><span>
</span><span id="line-1660"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionPolicyIdCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionPolicyIdCmdArgs</span></a></span><span>
</span><span id="line-1661"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scriptFile :: TransactionPolicyIdCmdArgs -&gt; ScriptFile
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#scriptFile"><span class="hs-identifier hs-var">scriptFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682148132"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148132"><span class="hs-identifier hs-var">sFile</span></a></span></span><span>
</span><span id="line-1662"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1663"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ScriptInAnyLang</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguage lang
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148137"><span class="annot"><span class="annottext">Script lang
</span><a href="#local-6989586621682148137"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1664"></span><span>      </span><span class="annot"><span class="annottext">(FileError ScriptDecodeError -&gt; TxCmdError)
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
-&gt; ExceptT TxCmdError IO ScriptInAnyLang
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError ScriptDecodeError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptFileError"><span class="hs-identifier hs-var">TxCmdScriptFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
 -&gt; ExceptT TxCmdError IO ScriptInAnyLang)
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
-&gt; ExceptT TxCmdError IO ScriptInAnyLang
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1665"></span><span>        </span><span class="annot"><span class="annottext">FilePath
-&gt; ExceptT (FileError ScriptDecodeError) IO ScriptInAnyLang
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *).
MonadIOTransError (FileError ScriptDecodeError) t m =&gt;
FilePath -&gt; t m ScriptInAnyLang
</span><a href="Cardano.CLI.Read.html#readFileScriptInAnyLang"><span class="hs-identifier hs-var">readFileScriptInAnyLang</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148132"><span class="hs-identifier hs-var">sFile</span></a></span><span>
</span><span id="line-1666"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (ScriptHash -&gt; IO ()) -&gt; ScriptHash -&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/text-2.1.1-66dd499aca7e777f8d20f0e47452fe261f2354d2ebc11923ec07d645d3895501/share/doc/html/src/Data.Text.IO.html#putStrLn"><span class="hs-identifier hs-var">Text.putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ()) -&gt; (ScriptHash -&gt; Text) -&gt; ScriptHash -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Text
forall a. SerialiseAsRawBytes a =&gt; a -&gt; Text
</span><span class="hs-identifier hs-var">serialiseToRawBytesHexText</span></span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; ExceptT TxCmdError IO ())
-&gt; ScriptHash -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Script lang -&gt; ScriptHash
forall lang. Script lang -&gt; ScriptHash
</span><span class="hs-identifier hs-var">hashScript</span></span><span> </span><span class="annot"><span class="annottext">Script lang
</span><a href="#local-6989586621682148137"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-1667"></span><span>
</span><span id="line-1668"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#partitionSomeWitnesses"><span class="hs-identifier hs-type">partitionSomeWitnesses</span></a></span><span>
</span><span id="line-1669"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.Read.html#ByronOrShelleyWitness"><span class="hs-identifier hs-type">ByronOrShelleyWitness</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1670"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.Read.html#ShelleyBootstrapWitnessSigningKeyData"><span class="hs-identifier hs-type">ShelleyBootstrapWitnessSigningKeyData</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1671"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ShelleyWitnessSigningKey</span></span><span class="hs-special">]</span><span>
</span><span id="line-1672"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1673"></span><span id="partitionSomeWitnesses"><span class="annot"><span class="annottext">partitionSomeWitnesses :: [ByronOrShelleyWitness]
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#partitionSomeWitnesses"><span class="hs-identifier hs-var hs-var">partitionSomeWitnesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([ShelleyBootstrapWitnessSigningKeyData],
 [ShelleyWitnessSigningKey])
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
forall {a} {a}. ([a], [a]) -&gt; ([a], [a])
</span><a href="#local-6989586621682148140"><span class="hs-identifier hs-var">reversePartitionedWits</span></a></span><span> </span><span class="annot"><span class="annottext">(([ShelleyBootstrapWitnessSigningKeyData],
  [ShelleyWitnessSigningKey])
 -&gt; ([ShelleyBootstrapWitnessSigningKeyData],
     [ShelleyWitnessSigningKey]))
-&gt; ([ByronOrShelleyWitness]
    -&gt; ([ShelleyBootstrapWitnessSigningKeyData],
        [ShelleyWitnessSigningKey]))
-&gt; [ByronOrShelleyWitness]
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(([ShelleyBootstrapWitnessSigningKeyData],
  [ShelleyWitnessSigningKey])
 -&gt; ByronOrShelleyWitness
 -&gt; ([ShelleyBootstrapWitnessSigningKeyData],
     [ShelleyWitnessSigningKey]))
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
-&gt; [ByronOrShelleyWitness]
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">Foldable.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">([ShelleyBootstrapWitnessSigningKeyData],
 [ShelleyWitnessSigningKey])
-&gt; ByronOrShelleyWitness
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
</span><a href="#local-6989586621682148142"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">([ShelleyBootstrapWitnessSigningKeyData],
 [ShelleyWitnessSigningKey])
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1674"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1675"></span><span>  </span><span id="local-6989586621682148140"><span class="annot"><span class="annottext">reversePartitionedWits :: ([a], [a]) -&gt; ([a], [a])
</span><a href="#local-6989586621682148140"><span class="hs-identifier hs-var hs-var">reversePartitionedWits</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148143"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682148143"><span class="hs-identifier hs-var">bw</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148144"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682148144"><span class="hs-identifier hs-var">skw</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1676"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682148143"><span class="hs-identifier hs-var">bw</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682148144"><span class="hs-identifier hs-var">skw</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1677"></span><span>
</span><span id="line-1678"></span><span>  </span><span id="local-6989586621682148142"><span class="annot"><span class="annottext">go :: ([ShelleyBootstrapWitnessSigningKeyData],
 [ShelleyWitnessSigningKey])
-&gt; ByronOrShelleyWitness
-&gt; ([ShelleyBootstrapWitnessSigningKeyData],
    [ShelleyWitnessSigningKey])
</span><a href="#local-6989586621682148142"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148146"><span class="annot"><span class="annottext">[ShelleyBootstrapWitnessSigningKeyData]
</span><a href="#local-6989586621682148146"><span class="hs-identifier hs-var">byronAcc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148147"><span class="annot"><span class="annottext">[ShelleyWitnessSigningKey]
</span><a href="#local-6989586621682148147"><span class="hs-identifier hs-var">shelleyKeyAcc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682148148"><span class="annot"><span class="annottext">ByronOrShelleyWitness
</span><a href="#local-6989586621682148148"><span class="hs-identifier hs-var">byronOrShelleyWit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1679"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByronOrShelleyWitness
</span><a href="#local-6989586621682148148"><span class="hs-identifier hs-var">byronOrShelleyWit</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1680"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Read.html#AByronWitness"><span class="hs-identifier hs-type">AByronWitness</span></a></span><span> </span><span id="local-6989586621682148150"><span class="annot"><span class="annottext">ShelleyBootstrapWitnessSigningKeyData
</span><a href="#local-6989586621682148150"><span class="hs-identifier hs-var">byronWit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1681"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBootstrapWitnessSigningKeyData
</span><a href="#local-6989586621682148150"><span class="hs-identifier hs-var">byronWit</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBootstrapWitnessSigningKeyData
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[ShelleyBootstrapWitnessSigningKeyData]
</span><a href="#local-6989586621682148146"><span class="hs-identifier hs-var">byronAcc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ShelleyWitnessSigningKey]
</span><a href="#local-6989586621682148147"><span class="hs-identifier hs-var">shelleyKeyAcc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1682"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Read.html#AShelleyKeyWitness"><span class="hs-identifier hs-type">AShelleyKeyWitness</span></a></span><span> </span><span id="local-6989586621682148152"><span class="annot"><span class="annottext">ShelleyWitnessSigningKey
</span><a href="#local-6989586621682148152"><span class="hs-identifier hs-var">shelleyKeyWit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1683"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ShelleyBootstrapWitnessSigningKeyData]
</span><a href="#local-6989586621682148146"><span class="hs-identifier hs-var">byronAcc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShelleyWitnessSigningKey
</span><a href="#local-6989586621682148152"><span class="hs-identifier hs-var">shelleyKeyWit</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyWitnessSigningKey
-&gt; [ShelleyWitnessSigningKey] -&gt; [ShelleyWitnessSigningKey]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[ShelleyWitnessSigningKey]
</span><a href="#local-6989586621682148147"><span class="hs-identifier hs-var">shelleyKeyAcc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1684"></span><span>
</span><span id="line-1685"></span><span class="hs-comment">-- | Construct a Shelley bootstrap witness (i.e. a Byron key witness in the</span><span>
</span><span id="line-1686"></span><span class="hs-comment">-- Shelley era).</span><span>
</span><span id="line-1687"></span><span id="local-6989586621682146182"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitness"><span class="hs-identifier hs-type">mkShelleyBootstrapWitness</span></a></span><span>
</span><span id="line-1688"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1689"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146182"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1690"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span>
</span><span id="line-1691"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxBody</span></span><span> </span><span class="annot"><a href="#local-6989586621682146182"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1692"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.Read.html#ShelleyBootstrapWitnessSigningKeyData"><span class="hs-identifier hs-type">ShelleyBootstrapWitnessSigningKeyData</span></a></span><span>
</span><span id="line-1693"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.BootstrapWitnessError.html#BootstrapWitnessError"><span class="hs-identifier hs-type">BootstrapWitnessError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621682146182"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1694"></span><span id="mkShelleyBootstrapWitness"><span class="annot"><span class="annottext">mkShelleyBootstrapWitness :: forall era.
ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; ShelleyBootstrapWitnessSigningKeyData
-&gt; Either BootstrapWitnessError (KeyWitness era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitness"><span class="hs-identifier hs-var hs-var">mkShelleyBootstrapWitness</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Read.html#ShelleyBootstrapWitnessSigningKeyData"><span class="hs-identifier hs-type">ShelleyBootstrapWitnessSigningKeyData</span></a></span><span> </span><span class="annot"><span class="annottext">SigningKey ByronKey
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Address ByronAddr)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1695"></span><span>  </span><span class="annot"><span class="annottext">BootstrapWitnessError
-&gt; Either BootstrapWitnessError (KeyWitness era)
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapWitnessError
</span><a href="Cardano.CLI.Types.Errors.BootstrapWitnessError.html#MissingNetworkIdOrByronAddressError"><span class="hs-identifier hs-var">MissingNetworkIdOrByronAddressError</span></a></span><span>
</span><span id="line-1696"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitness"><span class="hs-identifier hs-var">mkShelleyBootstrapWitness</span></a></span><span> </span><span id="local-6989586621682148156"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148156"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682148157"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682148157"><span class="hs-identifier hs-var">nw</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682148158"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148158"><span class="hs-identifier hs-var">txBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Read.html#ShelleyBootstrapWitnessSigningKeyData"><span class="hs-identifier hs-type">ShelleyBootstrapWitnessSigningKeyData</span></a></span><span> </span><span id="local-6989586621682148159"><span class="annot"><span class="annottext">SigningKey ByronKey
</span><a href="#local-6989586621682148159"><span class="hs-identifier hs-var">skey</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Address ByronAddr)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1697"></span><span>  </span><span class="annot"><span class="annottext">KeyWitness era -&gt; Either BootstrapWitnessError (KeyWitness era)
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyWitness era -&gt; Either BootstrapWitnessError (KeyWitness era))
-&gt; KeyWitness era -&gt; Either BootstrapWitnessError (KeyWitness era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; WitnessNetworkIdOrByronAddress
-&gt; TxBody era
-&gt; SigningKey ByronKey
-&gt; KeyWitness era
forall era.
ShelleyBasedEra era
-&gt; WitnessNetworkIdOrByronAddress
-&gt; TxBody era
-&gt; SigningKey ByronKey
-&gt; KeyWitness era
</span><span class="hs-identifier hs-var">makeShelleyBootstrapWitness</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148156"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NetworkId -&gt; WitnessNetworkIdOrByronAddress
</span><span class="hs-identifier hs-var">Byron.WitnessNetworkId</span></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621682148157"><span class="hs-identifier hs-var">nw</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148158"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">SigningKey ByronKey
</span><a href="#local-6989586621682148159"><span class="hs-identifier hs-var">skey</span></a></span><span>
</span><span id="line-1698"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitness"><span class="hs-identifier hs-var">mkShelleyBootstrapWitness</span></a></span><span> </span><span id="local-6989586621682148162"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148162"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe NetworkId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148163"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148163"><span class="hs-identifier hs-var">txBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Read.html#ShelleyBootstrapWitnessSigningKeyData"><span class="hs-identifier hs-type">ShelleyBootstrapWitnessSigningKeyData</span></a></span><span> </span><span id="local-6989586621682148164"><span class="annot"><span class="annottext">SigningKey ByronKey
</span><a href="#local-6989586621682148164"><span class="hs-identifier hs-var">skey</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682148165"><span class="annot"><span class="annottext">Address ByronAddr
</span><a href="#local-6989586621682148165"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1699"></span><span>  </span><span class="annot"><span class="annottext">KeyWitness era -&gt; Either BootstrapWitnessError (KeyWitness era)
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyWitness era -&gt; Either BootstrapWitnessError (KeyWitness era))
-&gt; KeyWitness era -&gt; Either BootstrapWitnessError (KeyWitness era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; WitnessNetworkIdOrByronAddress
-&gt; TxBody era
-&gt; SigningKey ByronKey
-&gt; KeyWitness era
forall era.
ShelleyBasedEra era
-&gt; WitnessNetworkIdOrByronAddress
-&gt; TxBody era
-&gt; SigningKey ByronKey
-&gt; KeyWitness era
</span><span class="hs-identifier hs-var">makeShelleyBootstrapWitness</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148162"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Address ByronAddr -&gt; WitnessNetworkIdOrByronAddress
</span><span class="hs-identifier hs-var">Byron.WitnessByronAddress</span></span><span> </span><span class="annot"><span class="annottext">Address ByronAddr
</span><a href="#local-6989586621682148165"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148163"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">SigningKey ByronKey
</span><a href="#local-6989586621682148164"><span class="hs-identifier hs-var">skey</span></a></span><span>
</span><span id="line-1700"></span><span>
</span><span id="line-1701"></span><span class="hs-comment">-- | Attempt to construct Shelley bootstrap witnesses until an error is</span><span>
</span><span id="line-1702"></span><span class="hs-comment">-- encountered.</span><span>
</span><span id="line-1703"></span><span id="local-6989586621682146111"><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitnesses"><span class="hs-identifier hs-type">mkShelleyBootstrapWitnesses</span></a></span><span>
</span><span id="line-1704"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1705"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621682146111"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1706"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NetworkId</span></span><span>
</span><span id="line-1707"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxBody</span></span><span> </span><span class="annot"><a href="#local-6989586621682146111"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1708"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.CLI.Read.html#ShelleyBootstrapWitnessSigningKeyData"><span class="hs-identifier hs-type">ShelleyBootstrapWitnessSigningKeyData</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1709"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.BootstrapWitnessError.html#BootstrapWitnessError"><span class="hs-identifier hs-type">BootstrapWitnessError</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">KeyWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621682146111"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1710"></span><span id="mkShelleyBootstrapWitnesses"><span class="annot"><span class="annottext">mkShelleyBootstrapWitnesses :: forall era.
ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; Either BootstrapWitnessError [KeyWitness era]
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitnesses"><span class="hs-identifier hs-var hs-var">mkShelleyBootstrapWitnesses</span></a></span></span><span> </span><span id="local-6989586621682148169"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148169"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682148170"><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="#local-6989586621682148170"><span class="hs-identifier hs-var">mnw</span></a></span></span><span> </span><span id="local-6989586621682148171"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148171"><span class="hs-identifier hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1711"></span><span>  </span><span class="annot"><span class="annottext">(ShelleyBootstrapWitnessSigningKeyData
 -&gt; Either BootstrapWitnessError (KeyWitness era))
-&gt; [ShelleyBootstrapWitnessSigningKeyData]
-&gt; Either BootstrapWitnessError [KeyWitness era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; ShelleyBootstrapWitnessSigningKeyData
-&gt; Either BootstrapWitnessError (KeyWitness era)
forall era.
ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; ShelleyBootstrapWitnessSigningKeyData
-&gt; Either BootstrapWitnessError (KeyWitness era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitness"><span class="hs-identifier hs-var">mkShelleyBootstrapWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148169"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="#local-6989586621682148170"><span class="hs-identifier hs-var">mnw</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148171"><span class="hs-identifier hs-var">txBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1712"></span><span>
</span><span id="line-1713"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1714"></span><span class="hs-comment">-- Other misc small commands</span><span>
</span><span id="line-1715"></span><span class="hs-comment">--</span><span>
</span><span id="line-1716"></span><span>
</span><span id="line-1717"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionHashScriptDataCmd"><span class="hs-identifier hs-type">runTransactionHashScriptDataCmd</span></a></span><span>
</span><span id="line-1718"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1719"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionHashScriptDataCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionHashScriptDataCmdArgs</span></a></span><span>
</span><span id="line-1720"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1721"></span><span id="runTransactionHashScriptDataCmd"><span class="annot"><span class="annottext">runTransactionHashScriptDataCmd :: TransactionHashScriptDataCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionHashScriptDataCmd"><span class="hs-identifier hs-var hs-var">runTransactionHashScriptDataCmd</span></a></span></span><span>
</span><span id="line-1722"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionHashScriptDataCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionHashScriptDataCmdArgs</span></a></span><span>
</span><span id="line-1723"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682148173"><span class="annot"><span class="annottext">ScriptDataOrFile
scriptDataOrFile :: ScriptDataOrFile
scriptDataOrFile :: TransactionHashScriptDataCmdArgs -&gt; ScriptDataOrFile
</span><a href="#local-6989586621682148173"><span class="hs-identifier hs-var hs-var">scriptDataOrFile</span></a></span></span><span>
</span><span id="line-1724"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1725"></span><span>    </span><span id="local-6989586621682148175"><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682148175"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptDataError -&gt; TxCmdError)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdScriptDataError"><span class="hs-identifier hs-var">TxCmdScriptDataError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ScriptDataError IO ScriptRedeemer
 -&gt; ExceptT TxCmdError IO ScriptRedeemer)
-&gt; ExceptT ScriptDataError IO ScriptRedeemer
-&gt; ExceptT TxCmdError IO ScriptRedeemer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile -&gt; ExceptT ScriptDataError IO ScriptRedeemer
forall (m :: * -&gt; *).
MonadIO m =&gt;
ScriptDataOrFile -&gt; ExceptT ScriptDataError m ScriptRedeemer
</span><a href="Cardano.CLI.Read.html#readScriptDataOrFile"><span class="hs-identifier hs-var">readScriptDataOrFile</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataOrFile
</span><a href="#local-6989586621682148173"><span class="hs-identifier hs-var">scriptDataOrFile</span></a></span><span>
</span><span id="line-1726"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Char8.html#putStrLn"><span class="hs-identifier hs-var">BS.putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO ()) -&gt; ByteString -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Hash ScriptData -&gt; ByteString
forall a. SerialiseAsRawBytes a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">serialiseToRawBytesHex</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptRedeemer -&gt; Hash ScriptData
</span><span class="hs-identifier hs-var">hashScriptDataBytes</span></span><span> </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621682148175"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1727"></span><span>
</span><span id="line-1728"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionTxIdCmd"><span class="hs-identifier hs-type">runTransactionTxIdCmd</span></a></span><span>
</span><span id="line-1729"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1730"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionTxIdCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionTxIdCmdArgs</span></a></span><span>
</span><span id="line-1731"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1732"></span><span id="runTransactionTxIdCmd"><span class="annot"><span class="annottext">runTransactionTxIdCmd :: TransactionTxIdCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionTxIdCmd"><span class="hs-identifier hs-var hs-var">runTransactionTxIdCmd</span></a></span></span><span>
</span><span id="line-1733"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionTxIdCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionTxIdCmdArgs</span></a></span><span>
</span><span id="line-1734"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682148179"><span class="annot"><span class="annottext">InputTxBodyOrTxFile
inputTxBodyOrTxFile :: InputTxBodyOrTxFile
inputTxBodyOrTxFile :: TransactionTxIdCmdArgs -&gt; InputTxBodyOrTxFile
</span><a href="#local-6989586621682148179"><span class="hs-identifier hs-var hs-var">inputTxBodyOrTxFile</span></a></span></span><span>
</span><span id="line-1735"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1736"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682148185"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148185"><span class="hs-identifier hs-var">_era</span></a></span></span><span> </span><span id="local-6989586621682148186"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148186"><span class="hs-identifier hs-var">txbody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1737"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">InputTxBodyOrTxFile
</span><a href="#local-6989586621682148179"><span class="hs-identifier hs-var">inputTxBodyOrTxFile</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1738"></span><span>        </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#InputTxBodyFile"><span class="hs-identifier hs-type">InputTxBodyFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682148187"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148187"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1739"></span><span>          </span><span id="local-6989586621682148188"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148188"><span class="hs-identifier hs-var">txbodyFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148187"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span><span>
</span><span id="line-1740"></span><span>          </span><span id="local-6989586621682148189"><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148189"><span class="hs-identifier hs-var">unwitnessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1741"></span><span>            </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; (IO
      (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
    -&gt; ExceptT
         (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1742"></span><span>              </span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
</span><a href="Cardano.CLI.Read.html#readFileTxBody"><span class="hs-identifier hs-var">readFileTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148188"><span class="hs-identifier hs-var">txbodyFile</span></a></span><span>
</span><span id="line-1743"></span><span>          </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(InAnyShelleyBasedEra TxBody
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody))
-&gt; InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody -&gt; InAnyShelleyBasedEra TxBody
</span><a href="Cardano.CLI.Read.html#unIncompleteCddlTxBody"><span class="hs-identifier hs-var">unIncompleteCddlTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148189"><span class="hs-identifier hs-var">unwitnessed</span></a></span><span>
</span><span id="line-1744"></span><span>        </span><span class="annot"><a href="Cardano.CLI.Types.Common.html#InputTxFile"><span class="hs-identifier hs-type">InputTxFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682148190"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148190"><span class="hs-identifier hs-var">txFilePath</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1745"></span><span>          </span><span id="local-6989586621682148191"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148191"><span class="hs-identifier hs-var">txFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148190"><span class="hs-identifier hs-var">txFilePath</span></a></span><span>
</span><span id="line-1746"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682148195"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148195"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682148196"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682148196"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO
  (Either
     (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
</span><a href="Cardano.CLI.Read.html#readFileTx"><span class="hs-identifier hs-var">readFileTx</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148191"><span class="hs-identifier hs-var">txFile</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either
     (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either
         (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
    -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; ExceptT
     TxCmdError
     IO
     (Either
        (FileError TextEnvelopeCddlError) (InAnyShelleyBasedEra Tx))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx))
-&gt; (FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; FileError TextEnvelopeCddlError
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra Tx)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1747"></span><span>          </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(InAnyShelleyBasedEra TxBody
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody))
-&gt; (TxBody era -&gt; InAnyShelleyBasedEra TxBody)
-&gt; TxBody era
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; TxBody era -&gt; InAnyShelleyBasedEra TxBody
forall era (thing :: * -&gt; *).
Typeable era =&gt;
ShelleyBasedEra era -&gt; thing era -&gt; InAnyShelleyBasedEra thing
</span><span class="hs-identifier hs-var">InAnyShelleyBasedEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148195"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody))
-&gt; TxBody era
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxBody era
forall era. Tx era -&gt; TxBody era
</span><span class="hs-identifier hs-var">getTxBody</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682148196"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-1748"></span><span>
</span><span id="line-1749"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT TxCmdError IO ()
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT TxCmdError IO ())
-&gt; IO () -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; IO ()
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/bytestring-0.12.1.0-inplace/src/Data.ByteString.Char8.html#putStrLn"><span class="hs-identifier hs-var">BS.putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO ()) -&gt; ByteString -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; ByteString
forall a. SerialiseAsRawBytes a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">serialiseToRawBytesHex</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era -&gt; TxId
forall era. TxBody era -&gt; TxId
</span><span class="hs-identifier hs-var">getTxId</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148186"><span class="hs-identifier hs-var">txbody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1750"></span><span>
</span><span id="line-1751"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-1752"></span><span class="hs-comment">-- Witness commands</span><span>
</span><span id="line-1753"></span><span class="hs-comment">--</span><span>
</span><span id="line-1754"></span><span>
</span><span id="line-1755"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionWitnessCmd"><span class="hs-identifier hs-type">runTransactionWitnessCmd</span></a></span><span>
</span><span id="line-1756"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1757"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionWitnessCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionWitnessCmdArgs</span></a></span><span>
</span><span id="line-1758"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1759"></span><span id="runTransactionWitnessCmd"><span class="annot"><span class="annottext">runTransactionWitnessCmd :: TransactionWitnessCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionWitnessCmd"><span class="hs-identifier hs-var hs-var">runTransactionWitnessCmd</span></a></span></span><span>
</span><span id="line-1760"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionWitnessCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionWitnessCmdArgs</span></a></span><span>
</span><span id="line-1761"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txBodyFile :: TransactionWitnessCmdArgs -&gt; File (TxBody ()) 'In
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txBodyFile"><span class="hs-identifier hs-var">txBodyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682148199"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148199"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span></span><span>
</span><span id="line-1762"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148200"><span class="annot"><span class="annottext">WitnessSigningData
witnessSigningData :: WitnessSigningData
witnessSigningData :: TransactionWitnessCmdArgs -&gt; WitnessSigningData
</span><a href="#local-6989586621682148200"><span class="hs-identifier hs-var hs-var">witnessSigningData</span></a></span></span><span>
</span><span id="line-1763"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148202"><span class="annot"><span class="annottext">Maybe NetworkId
mNetworkId :: Maybe NetworkId
mNetworkId :: TransactionWitnessCmdArgs -&gt; Maybe NetworkId
</span><a href="#local-6989586621682148202"><span class="hs-identifier hs-var hs-var">mNetworkId</span></a></span></span><span>
</span><span id="line-1764"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148204"><span class="annot"><span class="annottext">File () 'Out
outFile :: File () 'Out
outFile :: TransactionWitnessCmdArgs -&gt; File () 'Out
</span><a href="#local-6989586621682148204"><span class="hs-identifier hs-var hs-var">outFile</span></a></span></span><span>
</span><span id="line-1765"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1766"></span><span>    </span><span id="local-6989586621682148206"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148206"><span class="hs-identifier hs-var">txbodyFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148199"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span><span>
</span><span id="line-1767"></span><span>    </span><span id="local-6989586621682148207"><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148207"><span class="hs-identifier hs-var">unwitnessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1768"></span><span>      </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; (IO
      (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
    -&gt; ExceptT
         (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT
     (FileError TextEnvelopeCddlError) IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1769"></span><span>        </span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
</span><a href="Cardano.CLI.Read.html#readFileTxBody"><span class="hs-identifier hs-var">readFileTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148206"><span class="hs-identifier hs-var">txbodyFile</span></a></span><span>
</span><span id="line-1770"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148207"><span class="hs-identifier hs-var">unwitnessed</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1771"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Read.html#IncompleteCddlTxBody"><span class="hs-identifier hs-type">IncompleteCddlTxBody</span></a></span><span> </span><span id="local-6989586621682148208"><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
</span><a href="#local-6989586621682148208"><span class="hs-identifier hs-var">anyTxBody</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1772"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682148217"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148217"><span class="hs-identifier hs-var">sbe</span></a></span></span><span> </span><span id="local-6989586621682148218"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148218"><span class="hs-identifier hs-var">txbody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra TxBody)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyShelleyBasedEra TxBody
</span><a href="#local-6989586621682148208"><span class="hs-identifier hs-var">anyTxBody</span></a></span><span>
</span><span id="line-1773"></span><span>        </span><span id="local-6989586621682148219"><span class="annot"><span class="annottext">SomeSigningWitness
</span><a href="#local-6989586621682148219"><span class="hs-identifier hs-var">someWit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1774"></span><span>          </span><span class="annot"><span class="annottext">(ReadWitnessSigningDataError -&gt; TxCmdError)
-&gt; ExceptT ReadWitnessSigningDataError IO SomeSigningWitness
-&gt; ExceptT TxCmdError IO SomeSigningWitness
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ReadWitnessSigningDataError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdReadWitnessSigningDataError"><span class="hs-identifier hs-var">TxCmdReadWitnessSigningDataError</span></a></span><span>
</span><span id="line-1775"></span><span>            </span><span class="annot"><span class="annottext">(ExceptT ReadWitnessSigningDataError IO SomeSigningWitness
 -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; (IO (Either ReadWitnessSigningDataError SomeSigningWitness)
    -&gt; ExceptT ReadWitnessSigningDataError IO SomeSigningWitness)
-&gt; IO (Either ReadWitnessSigningDataError SomeSigningWitness)
-&gt; ExceptT TxCmdError IO SomeSigningWitness
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either ReadWitnessSigningDataError SomeSigningWitness)
-&gt; ExceptT ReadWitnessSigningDataError IO SomeSigningWitness
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span>
</span><span id="line-1776"></span><span>            </span><span class="annot"><span class="annottext">(IO (Either ReadWitnessSigningDataError SomeSigningWitness)
 -&gt; ExceptT TxCmdError IO SomeSigningWitness)
-&gt; IO (Either ReadWitnessSigningDataError SomeSigningWitness)
-&gt; ExceptT TxCmdError IO SomeSigningWitness
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WitnessSigningData
-&gt; IO (Either ReadWitnessSigningDataError SomeSigningWitness)
</span><a href="Cardano.CLI.Read.html#readWitnessSigningData"><span class="hs-identifier hs-var">readWitnessSigningData</span></a></span><span> </span><span class="annot"><span class="annottext">WitnessSigningData
</span><a href="#local-6989586621682148200"><span class="hs-identifier hs-var">witnessSigningData</span></a></span><span>
</span><span id="line-1777"></span><span>        </span><span id="local-6989586621682148220"><span class="annot"><span class="annottext">KeyWitness era
</span><a href="#local-6989586621682148220"><span class="hs-identifier hs-var">witness</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1778"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeSigningWitness -&gt; ByronOrShelleyWitness
</span><a href="Cardano.CLI.Read.html#categoriseSomeSigningWitness"><span class="hs-identifier hs-var">categoriseSomeSigningWitness</span></a></span><span> </span><span class="annot"><span class="annottext">SomeSigningWitness
</span><a href="#local-6989586621682148219"><span class="hs-identifier hs-var">someWit</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1779"></span><span>            </span><span class="hs-comment">-- Byron witnesses require the network ID. This can either be provided</span><span>
</span><span id="line-1780"></span><span>            </span><span class="hs-comment">-- directly or derived from a provided Byron address.</span><span>
</span><span id="line-1781"></span><span>            </span><span class="annot"><a href="Cardano.CLI.Read.html#AByronWitness"><span class="hs-identifier hs-type">AByronWitness</span></a></span><span> </span><span id="local-6989586621682148221"><span class="annot"><span class="annottext">ShelleyBootstrapWitnessSigningKeyData
</span><a href="#local-6989586621682148221"><span class="hs-identifier hs-var">bootstrapWitData</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1782"></span><span>              </span><span class="annot"><span class="annottext">(BootstrapWitnessError -&gt; TxCmdError)
-&gt; ExceptT BootstrapWitnessError IO (KeyWitness era)
-&gt; ExceptT TxCmdError IO (KeyWitness era)
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdBootstrapWitnessError"><span class="hs-identifier hs-var">TxCmdBootstrapWitnessError</span></a></span><span>
</span><span id="line-1783"></span><span>                </span><span class="annot"><span class="annottext">(ExceptT BootstrapWitnessError IO (KeyWitness era)
 -&gt; ExceptT TxCmdError IO (KeyWitness era))
-&gt; (Either BootstrapWitnessError (KeyWitness era)
    -&gt; ExceptT BootstrapWitnessError IO (KeyWitness era))
-&gt; Either BootstrapWitnessError (KeyWitness era)
-&gt; ExceptT TxCmdError IO (KeyWitness era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Either BootstrapWitnessError (KeyWitness era)
-&gt; ExceptT BootstrapWitnessError IO (KeyWitness era)
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#hoistEither"><span class="hs-identifier hs-var">hoistEither</span></a></span><span>
</span><span id="line-1784"></span><span>                </span><span class="annot"><span class="annottext">(Either BootstrapWitnessError (KeyWitness era)
 -&gt; ExceptT TxCmdError IO (KeyWitness era))
-&gt; Either BootstrapWitnessError (KeyWitness era)
-&gt; ExceptT TxCmdError IO (KeyWitness era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; ShelleyBootstrapWitnessSigningKeyData
-&gt; Either BootstrapWitnessError (KeyWitness era)
forall era.
ShelleyBasedEra era
-&gt; Maybe NetworkId
-&gt; TxBody era
-&gt; ShelleyBootstrapWitnessSigningKeyData
-&gt; Either BootstrapWitnessError (KeyWitness era)
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#mkShelleyBootstrapWitness"><span class="hs-identifier hs-var">mkShelleyBootstrapWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148217"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NetworkId
</span><a href="#local-6989586621682148202"><span class="hs-identifier hs-var">mNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148218"><span class="hs-identifier hs-var">txbody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBootstrapWitnessSigningKeyData
</span><a href="#local-6989586621682148221"><span class="hs-identifier hs-var">bootstrapWitData</span></a></span><span>
</span><span id="line-1785"></span><span>            </span><span class="annot"><a href="Cardano.CLI.Read.html#AShelleyKeyWitness"><span class="hs-identifier hs-type">AShelleyKeyWitness</span></a></span><span> </span><span id="local-6989586621682148222"><span class="annot"><span class="annottext">ShelleyWitnessSigningKey
</span><a href="#local-6989586621682148222"><span class="hs-identifier hs-var">skShelley</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1786"></span><span>              </span><span class="annot"><span class="annottext">KeyWitness era -&gt; ExceptT TxCmdError IO (KeyWitness era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyWitness era -&gt; ExceptT TxCmdError IO (KeyWitness era))
-&gt; KeyWitness era -&gt; ExceptT TxCmdError IO (KeyWitness era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; TxBody era -&gt; ShelleyWitnessSigningKey -&gt; KeyWitness era
forall era.
ShelleyBasedEra era
-&gt; TxBody era -&gt; ShelleyWitnessSigningKey -&gt; KeyWitness era
</span><span class="hs-identifier hs-var">makeShelleyKeyWitness</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148217"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148218"><span class="hs-identifier hs-var">txbody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyWitnessSigningKey
</span><a href="#local-6989586621682148222"><span class="hs-identifier hs-var">skShelley</span></a></span><span>
</span><span id="line-1787"></span><span>
</span><span id="line-1788"></span><span>        </span><span class="annot"><span class="annottext">(FileError () -&gt; TxCmdError)
-&gt; ExceptT (FileError ()) IO () -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#firstExceptT"><span class="hs-identifier hs-var">firstExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT (FileError ()) IO () -&gt; ExceptT TxCmdError IO ())
-&gt; (IO (Either (FileError ()) ()) -&gt; ExceptT (FileError ()) IO ())
-&gt; IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ()) -&gt; ExceptT (FileError ()) IO ()
forall (m :: * -&gt; *) x a. m (Either x a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#newExceptT"><span class="hs-identifier hs-var">newExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either (FileError ()) ()) -&gt; ExceptT TxCmdError IO ())
-&gt; IO (Either (FileError ()) ()) -&gt; ExceptT TxCmdError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1789"></span><span>          </span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; File () 'Out -&gt; KeyWitness era -&gt; IO (Either (FileError ()) ())
forall era.
ShelleyBasedEra era
-&gt; File () 'Out -&gt; KeyWitness era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxWitnessFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148217"><span class="hs-identifier hs-var">sbe</span></a></span><span> </span><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148204"><span class="hs-identifier hs-var">outFile</span></a></span><span> </span><span class="annot"><span class="annottext">KeyWitness era
</span><a href="#local-6989586621682148220"><span class="hs-identifier hs-var">witness</span></a></span><span>
</span><span id="line-1790"></span><span>
</span><span id="line-1791"></span><span class="annot"><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignWitnessCmd"><span class="hs-identifier hs-type">runTransactionSignWitnessCmd</span></a></span><span>
</span><span id="line-1792"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1793"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSignWitnessCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionSignWitnessCmdArgs</span></a></span><span>
</span><span id="line-1794"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdError"><span class="hs-identifier hs-type">TxCmdError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/ghc-prim-0.11.0-inplace/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1795"></span><span id="runTransactionSignWitnessCmd"><span class="annot"><span class="annottext">runTransactionSignWitnessCmd :: TransactionSignWitnessCmdArgs -&gt; ExceptT TxCmdError IO ()
</span><a href="Cardano.CLI.EraBased.Run.Transaction.html#runTransactionSignWitnessCmd"><span class="hs-identifier hs-var hs-var">runTransactionSignWitnessCmd</span></a></span></span><span>
</span><span id="line-1796"></span><span>  </span><span class="annot"><a href="Cardano.CLI.EraBased.Commands.Transaction.html#TransactionSignWitnessCmdArgs"><span class="hs-identifier hs-type">Cmd.TransactionSignWitnessCmdArgs</span></a></span><span>
</span><span id="line-1797"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txBodyFile :: TransactionSignWitnessCmdArgs -&gt; File (TxBody ()) 'In
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#txBodyFile"><span class="hs-identifier hs-var">txBodyFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">File</span></span><span> </span><span id="local-6989586621682148226"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148226"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span></span><span>
</span><span id="line-1798"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">witnessFiles :: TransactionSignWitnessCmdArgs -&gt; [WitnessFile]
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#witnessFiles"><span class="hs-identifier hs-var">witnessFiles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148228"><span class="annot"><span class="annottext">[WitnessFile]
</span><a href="#local-6989586621682148228"><span class="hs-identifier hs-var">witnessFiles</span></a></span></span><span>
</span><span id="line-1799"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">outFile :: TransactionSignWitnessCmdArgs -&gt; File () 'Out
</span><a href="Cardano.CLI.EraBased.Commands.Transaction.html#outFile"><span class="hs-identifier hs-var">outFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148230"><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148230"><span class="hs-identifier hs-var">outFile</span></a></span></span><span>
</span><span id="line-1800"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1801"></span><span>    </span><span id="local-6989586621682148231"><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148231"><span class="hs-identifier hs-var">txbodyFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a. IO a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe)
-&gt; IO FileOrPipe -&gt; ExceptT TxCmdError IO FileOrPipe
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileOrPipe
</span><a href="Cardano.CLI.Read.html#fileOrPipe"><span class="hs-identifier hs-var">fileOrPipe</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148226"><span class="hs-identifier hs-var">txbodyFilePath</span></a></span><span>
</span><span id="line-1802"></span><span>    </span><span id="local-6989586621682148232"><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148232"><span class="hs-identifier hs-var">unwitnessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT
     TxCmdError
     IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileOrPipe
-&gt; IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
</span><a href="Cardano.CLI.Read.html#readFileTxBody"><span class="hs-identifier hs-var">readFileTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">FileOrPipe
</span><a href="#local-6989586621682148231"><span class="hs-identifier hs-var">txbodyFile</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; (ExceptT
      TxCmdError
      IO
      (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
    -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError TextEnvelopeCddlError
 -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; ExceptT
     TxCmdError
     IO
     (Either (FileError TextEnvelopeCddlError) IncompleteCddlTxBody)
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO IncompleteCddlTxBody)
-&gt; (FileError TextEnvelopeCddlError -&gt; TxCmdError)
-&gt; FileError TextEnvelopeCddlError
-&gt; ExceptT TxCmdError IO IncompleteCddlTxBody
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeCddlError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdTextEnvCddlError"><span class="hs-identifier hs-var">TxCmdTextEnvCddlError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1803"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IncompleteCddlTxBody
</span><a href="#local-6989586621682148232"><span class="hs-identifier hs-var">unwitnessed</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1804"></span><span>      </span><span class="annot"><a href="Cardano.CLI.Read.html#IncompleteCddlTxBody"><span class="hs-identifier hs-type">IncompleteCddlTxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682148246"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148246"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621682148247"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148247"><span class="hs-identifier hs-var">txbody</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1805"></span><span>        </span><span class="hs-comment">-- TODO: Left off here. Remember we were never reading byron key witnesses anyways!</span><span>
</span><span id="line-1806"></span><span>        </span><span id="local-6989586621682148248"><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682148248"><span class="hs-identifier hs-var">witnesses</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1807"></span><span>          </span><span class="annot"><span class="annottext">[ExceptT TxCmdError IO (KeyWitness era)]
-&gt; ExceptT TxCmdError IO [KeyWitness era]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
forall (m :: * -&gt; *) a. Monad m =&gt; [m a] -&gt; m [a]
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a></span><span>
</span><span id="line-1808"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1809"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">InAnyShelleyBasedEra</span></span><span> </span><span id="local-6989586621682148257"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148257"><span class="hs-identifier hs-var">era'</span></a></span></span><span> </span><span id="local-6989586621682148258"><span class="annot"><span class="annottext">KeyWitness era
</span><a href="#local-6989586621682148258"><span class="hs-identifier hs-var">witness</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1810"></span><span>                  </span><span class="annot"><span class="annottext">IO (Either CddlWitnessError (InAnyShelleyBasedEra KeyWitness))
-&gt; ExceptT
     TxCmdError
     IO
     (Either CddlWitnessError (InAnyShelleyBasedEra KeyWitness))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
-&gt; IO (Either CddlWitnessError (InAnyShelleyBasedEra KeyWitness))
</span><a href="Cardano.CLI.Read.html#readFileTxKeyWitness"><span class="hs-identifier hs-var">readFileTxKeyWitness</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148260"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT
  TxCmdError
  IO
  (Either CddlWitnessError (InAnyShelleyBasedEra KeyWitness))
-&gt; (ExceptT
      TxCmdError
      IO
      (Either CddlWitnessError (InAnyShelleyBasedEra KeyWitness))
    -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(CddlWitnessError
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness))
-&gt; ExceptT
     TxCmdError
     IO
     (Either CddlWitnessError (InAnyShelleyBasedEra KeyWitness))
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness)
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError
 -&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness))
-&gt; (CddlWitnessError -&gt; TxCmdError)
-&gt; CddlWitnessError
-&gt; ExceptT TxCmdError IO (InAnyShelleyBasedEra KeyWitness)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CddlWitnessError -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdCddlWitnessError"><span class="hs-identifier hs-var">TxCmdCddlWitnessError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1811"></span><span>
</span><span id="line-1812"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; ShelleyBasedEra era -&gt; Maybe (era :~: era)
forall a b.
ShelleyBasedEra a -&gt; ShelleyBasedEra b -&gt; Maybe (a :~: b)
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#testEquality"><span class="hs-identifier hs-var">testEquality</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148246"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148257"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1813"></span><span>                  </span><span class="annot"><span class="annottext">Maybe (era :~: era)
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1814"></span><span>                    </span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO (KeyWitness era)
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO (KeyWitness era))
-&gt; TxCmdError -&gt; ExceptT TxCmdError IO (KeyWitness era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1815"></span><span>                      </span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; AnyCardanoEra -&gt; WitnessFile -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWitnessEraMismatch"><span class="hs-identifier hs-var">TxCmdWitnessEraMismatch</span></a></span><span>
</span><span id="line-1816"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; AnyCardanoEra
forall era. Typeable era =&gt; CardanoEra era -&gt; AnyCardanoEra
</span><span class="hs-identifier hs-var">AnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">(CardanoEra era -&gt; AnyCardanoEra)
-&gt; CardanoEra era -&gt; AnyCardanoEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148246"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1817"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era -&gt; AnyCardanoEra
forall era. Typeable era =&gt; CardanoEra era -&gt; AnyCardanoEra
</span><span class="hs-identifier hs-var">AnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">(CardanoEra era -&gt; AnyCardanoEra)
-&gt; CardanoEra era -&gt; AnyCardanoEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
forall (eon :: * -&gt; *) era.
ToCardanoEra eon =&gt;
eon era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">toCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148257"><span class="hs-identifier hs-var">era'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1818"></span><span>                        </span><span class="annot"><span class="annottext">WitnessFile
</span><a href="#local-6989586621682148263"><span class="hs-identifier hs-var">witnessFile</span></a></span><span>
</span><span id="line-1819"></span><span>                  </span><span class="annot"><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">era :~: era
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Type.Equality.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyWitness era -&gt; ExceptT TxCmdError IO (KeyWitness era)
forall a. a -&gt; ExceptT TxCmdError IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">KeyWitness era
KeyWitness era
</span><a href="#local-6989586621682148258"><span class="hs-identifier hs-var">witness</span></a></span><span>
</span><span id="line-1820"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682148263"><span class="annot"><span class="annottext">witnessFile :: WitnessFile
</span><a href="#local-6989586621682148263"><span class="hs-identifier hs-var">witnessFile</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.CLI.Types.Common.html#WitnessFile"><span class="hs-identifier hs-type">WitnessFile</span></a></span><span> </span><span id="local-6989586621682148260"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621682148260"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[WitnessFile]
</span><a href="#local-6989586621682148228"><span class="hs-identifier hs-var">witnessFiles</span></a></span><span>
</span><span id="line-1821"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1822"></span><span>
</span><span id="line-1823"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148267"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621682148267"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[KeyWitness era] -&gt; TxBody era -&gt; Tx era
forall era. [KeyWitness era] -&gt; TxBody era -&gt; Tx era
</span><span class="hs-identifier hs-var">makeSignedTransaction</span></span><span> </span><span class="annot"><span class="annottext">[KeyWitness era]
</span><a href="#local-6989586621682148248"><span class="hs-identifier hs-var">witnesses</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621682148247"><span class="hs-identifier hs-var">txbody</span></a></span><span>
</span><span id="line-1824"></span><span>
</span><span id="line-1825"></span><span>        </span><span class="annot"><span class="annottext">IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT TxCmdError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/transformers-0.6.1.0-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra era
-&gt; File () 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
forall era content.
ShelleyBasedEra era
-&gt; File content 'Out -&gt; Tx era -&gt; IO (Either (FileError ()) ())
</span><span class="hs-identifier hs-var">writeTxFileTextEnvelopeCddl</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621682148246"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">File () 'Out
</span><a href="#local-6989586621682148230"><span class="hs-identifier hs-var">outFile</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621682148267"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; (ExceptT TxCmdError IO (Either (FileError ()) ())
    -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO ()
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/Data.Function.html#%26"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(FileError () -&gt; ExceptT TxCmdError IO ())
-&gt; ExceptT TxCmdError IO (Either (FileError ()) ())
-&gt; ExceptT TxCmdError IO ()
forall e x (m :: * -&gt; *) a.
Monad m =&gt;
(e -&gt; ExceptT x m a) -&gt; ExceptT x m (Either e a) -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxCmdError -&gt; ExceptT TxCmdError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/transformers-except-0.1.4-bad5d8c0254b70100e8070368b7f08803e54bc74ec0cc52f230a0731e6e3e6b9/share/doc/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCmdError -&gt; ExceptT TxCmdError IO ())
-&gt; (FileError () -&gt; TxCmdError)
-&gt; FileError ()
-&gt; ExceptT TxCmdError IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FileError () -&gt; TxCmdError
</span><a href="Cardano.CLI.Types.Errors.TxCmdError.html#TxCmdWriteFileError"><span class="hs-identifier hs-var">TxCmdWriteFileError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1826"></span></pre></body></html>